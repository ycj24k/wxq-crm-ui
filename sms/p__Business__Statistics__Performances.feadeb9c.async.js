(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4290],{78677:function(m,D,e){"use strict";var o=e(67294),f=e(76565),u=e(29640),l=e(79360),_=e(24770),c=e(27681),v=function(t,d){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&d.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)d.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s},y=(0,o.forwardRef)(function(t,d){var s=t.chartRef,r=t.style,a=r===void 0?{height:"inherit"}:r,p=t.className,O=t.loading,M=t.loadingTemplate,i=t.errorTemplate,E=v(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),h=(0,u.Z)(f.sg,E),n=h.chart,x=h.container;return(0,o.useEffect)(function(){(0,l.J)(s,n.current)},[n.current]),(0,o.useImperativeHandle)(d,function(){return{getChart:function(){return n.current}}}),o.createElement(_.Z,{errorTemplate:i},O&&o.createElement(c.Z,{loadingTemplate:M,theme:t.theme}),o.createElement("div",{className:p,style:a,ref:x}))});D.Z=y},63430:function(m,D,e){"use strict";var o=e(67294),f=e(76565),u=e(29640),l=e(79360),_=e(24770),c=e(27681),v=function(t,d){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&d.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)d.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s},y=(0,o.forwardRef)(function(t,d){var s=t.chartRef,r=t.style,a=r===void 0?{height:"inherit"}:r,p=t.className,O=t.loading,M=t.loadingTemplate,i=t.errorTemplate,E=v(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),h=(0,u.Z)(f.by,E),n=h.chart,x=h.container;return(0,o.useEffect)(function(){(0,l.J)(s,n.current)},[n.current]),(0,o.useImperativeHandle)(d,function(){return{getChart:function(){return n.current}}}),o.createElement(_.Z,{errorTemplate:i},O&&o.createElement(c.Z,{loadingTemplate:M,theme:t.theme}),o.createElement("div",{className:p,style:a,ref:x}))});D.Z=y},45510:function(m,D,e){"use strict";e.d(D,{Z:function(){return J}});var o=e(28991),f=e(81253),u=e(85893),l=e(67294),_=e(66758),c=e(53048),v=["proFieldProps","fieldProps"],y="date",t=l.forwardRef(function(g,R){var A=g.proFieldProps,B=g.fieldProps,I=(0,f.Z)(g,v),F=(0,l.useContext)(_.Z);return(0,u.jsx)(c.Z,(0,o.Z)({ref:R,valueType:y,fieldProps:(0,o.Z)({getPopupContainer:F.getPopupContainer},B),proFieldProps:A,filedConfig:{valueType:y,customLightMode:!0}},I))}),d=t,s=["proFieldProps","fieldProps"],r="dateMonth",a=l.forwardRef(function(g,R){var A=g.proFieldProps,B=g.fieldProps,I=(0,f.Z)(g,s),F=(0,l.useContext)(_.Z);return(0,u.jsx)(c.Z,(0,o.Z)({ref:R,valueType:r,fieldProps:(0,o.Z)({getPopupContainer:F.getPopupContainer},B),proFieldProps:A,filedConfig:{valueType:r,customLightMode:!0}},I))}),p=a,O=["fieldProps"],M="dateQuarter",i=l.forwardRef(function(g,R){var A=g.fieldProps,B=(0,f.Z)(g,O),I=(0,l.useContext)(_.Z);return(0,u.jsx)(c.Z,(0,o.Z)({ref:R,valueType:M,fieldProps:(0,o.Z)({getPopupContainer:I.getPopupContainer},A),filedConfig:{valueType:M,customLightMode:!0}},B))}),E=i,h=["proFieldProps","fieldProps"],n="dateWeek",x=l.forwardRef(function(g,R){var A=g.proFieldProps,B=g.fieldProps,I=(0,f.Z)(g,h),F=(0,l.useContext)(_.Z);return(0,u.jsx)(c.Z,(0,o.Z)({ref:R,valueType:n,fieldProps:(0,o.Z)({getPopupContainer:F.getPopupContainer},B),proFieldProps:A,filedConfig:{valueType:n,customLightMode:!0}},I))}),$=x,Q=["proFieldProps","fieldProps"],z="dateYear",H=l.forwardRef(function(g,R){var A=g.proFieldProps,B=g.fieldProps,I=(0,f.Z)(g,Q),F=(0,l.useContext)(_.Z);return(0,u.jsx)(c.Z,(0,o.Z)({ref:R,valueType:z,fieldProps:(0,o.Z)({getPopupContainer:F.getPopupContainer},B),proFieldProps:A,filedConfig:{valueType:z,customLightMode:!0}},I))}),G=H,U=d;U.Week=$,U.Month=p,U.Quarter=E,U.Year=G,U.displayName="ProFormComponent";var J=U},20940:function(m,D,e){"use strict";e.r(D);var o=e(20228),f=e(11382),u=e(11849),l=e(39428),_=e(3182),c=e(2824),v=e(30202),y=e(71906),t=e(67294),d=e(63863),s=e(952),r=e(45510),a=e(30381),p=e.n(a),O=e(78677),M=e(91584),i=e(47833),E=e(96266),h=e(3133),n=e(85893);D.default=function(){var x=(0,t.useState)([]),$=(0,c.Z)(x,2),Q=$[0],z=$[1],H=(0,t.useState)([]),G=(0,c.Z)(H,2),U=G[0],J=G[1],g=(0,t.useState)({department:[],num:0}),R=(0,c.Z)(g,2),A=R[0],B=R[1],I=(0,t.useState)([]),F=(0,c.Z)(I,2),ye=F[0],oe=F[1],ue=(0,t.useState)(!1),k=(0,c.Z)(ue,2),V=k[0],se=k[1],_e=(0,t.useState)(),X=(0,c.Z)(_e,2),ie=X[0],le=X[1],ce=(0,t.useState)([]),q=(0,c.Z)(ce,2),de=q[0],me=q[1],pe=(0,t.useState)(p()().format("YYYY")),ee=(0,c.Z)(pe,2),Y=ee[0],fe=ee[1],te=(0,t.useRef)(),ve=(0,t.useState)(!1),re=(0,c.Z)(ve,2),Pe=re[0],ae=re[1],Ee=(0,t.forwardRef)(i.Z);(0,t.useEffect)(function(){var C,T=[],Z=[];(C=te.current)===null||C===void 0||C.setFieldsValue({createTime:Y});for(var P=1;P<=12;P++)T.push({"createTime-start":"".concat(Y,"-").concat(P<10?"0"+P:P,"-01"),"createTime-end":"".concat(Y,"-").concat(P<10?"0"+P:P,"-31")}),Z.push({"auditTime-start":"".concat(Y,"-").concat(P<10?"0"+P:P,"-01"),"auditTime-end":"".concat(Y,"-").concat(P<10?"0"+P:P,"-31"),auditType:4,confirm:!0,enable:!0,"type-in":"1,3"});he(T,Z)},[Y]);var he=function(){var C=(0,_.Z)((0,l.Z)().mark(function T(Z){var P,j,L,W=arguments;return(0,l.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return P=W.length>1&&W[1]!==void 0?W[1]:!1,K.next=3,d.Z.get("/sms/business/bizOrder/newOrder/totals",{array:JSON.stringify(Z),totalFields:"amount"});case 3:j=K.sent.data,L=[],j.forEach(function(w,S){L.push({name:"\u7F34\u8D39",\u6708\u4EFD:"".concat(S+1,"\u6708"),\u91D1\u989D:w.amount,time:Z[S]})}),console.log("arrContent",L),z(L);case 8:case"end":return K.stop()}},T)}));return function(Z){return C.apply(this,arguments)}}(),ge={isGroup:!0,xField:"\u6708\u4EFD",yField:"\u91D1\u989D",seriesField:"name",label:{position:"middle",layout:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"}]},xAxis:{label:{autoHide:!0,autoRotate:!1}},meta:{type:{alias:"\u6708\u4EFD"},amount:{alias:"\u4E1A\u7EE9\u989D"}}},Oe=function(T){T.on("element:click",(0,_.Z)((0,l.Z)().mark(function Z(){var P,j,L,W,b,K,w,S,ne=arguments;return(0,l.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:for(ae(!0),j=ne.length,L=new Array(j),W=0;W<j;W++)L[W]=ne[W];return b=(P=L[0].data)===null||P===void 0?void 0:P.data,console.log(b),N.next=6,d.Z.get("/sms/business/bizOrder/newOrder",{parentId:"-1","createTime-start":b.time["createTime-start"],"createTime-end":b.time["createTime-end"],_isGetAll:!0});case 6:return K=N.sent.data.content,w=(0,E.Z)(K),J(w.arr2),le(JSON.stringify([b.time["createTime-start"],b.time["createTime-end"]])),oe(w.arr3),se(w.arr4),N.next=14,(0,h.Z)(b.time["createTime-start"],b.time["createTime-end"],null);case 14:S=N.sent,console.log("resultData1",S),B(S.department),me(S.result),ae(!1);case 19:case"end":return N.stop()}},Z)})))},De=function(){var C=(0,_.Z)((0,l.Z)().mark(function T(Z){return(0,l.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",new Promise(function(L){fe(Z.createTime),L(!0)}));case 1:case"end":return j.stop()}},T)}));return function(Z){return C.apply(this,arguments)}}();return(0,n.jsx)(y.ZP,{children:(0,n.jsx)(f.Z,{spinning:Pe,children:(0,n.jsx)(v.ZP,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(s.ZP,{layout:"inline",onFinish:function(){var C=(0,_.Z)((0,l.Z)().mark(function T(Z){return(0,l.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,De(Z);case 2:case"end":return j.stop()}},T)}));return function(T){return C.apply(this,arguments)}}(),formRef:te,children:(0,n.jsx)(r.Z,{name:"createTime",label:"\u65E5\u671F\u65F6\u95F4",fieldProps:{picker:"year",format:"YYYY"}})}),(0,n.jsx)(v.ZP,{split:"vertical",style:{margin:"30px 0"},title:"\u70B9\u51FB\u5177\u4F53\u67D0\u4E2A\u6708\u4EFD\u4E1A\u7EE9\u77E9\u5F62\uFF0C\u53EF\u4EE5\u67E5\u770B\u8BE6\u7EC6\u7EC6\u8282",children:(0,n.jsx)(O.Z,(0,u.Z)((0,u.Z)({data:Q},ge),{},{onReady:Oe}))}),V&&(0,n.jsx)(M.Z,{data:U,todayContent:V,moon:ie}),(0,n.jsx)(Ee,{orderContent:de}),(0,n.jsxs)("div",{className:"statistics",children:[A.department.map(function(C){return(0,n.jsxs)(v.ZP,{className:"statistics-card",children:[(0,n.jsx)("div",{className:"statistics-card-title",children:C.departmentName}),(0,n.jsxs)("div",{className:"statistics-card-people",children:["\u8BA2\u5355\u4EBA\u6570:",C.num,"\u4EBA"]})]})}),(0,n.jsxs)(v.ZP,{className:"statistics-card",children:[(0,n.jsx)("div",{className:"statistics-card-title",children:"\u603B\u8BA2\u5355\u4EBA\u6570"}),(0,n.jsxs)("div",{className:"statistics-card-people",children:[A.num,"\u4EBA"]})]})]})]})})})})}},91584:function(m,D,e){"use strict";var o=e(11849),f=e(63430),u=e(30202),l=e(21010),_=e(85893);D.Z=function(c){var v=c.data,y=c.todayContent,t=y===void 0?!1:y,d=c.moon,s={appendPadding:10,angleField:"amount",colorField:"project",radius:.8,legend:{layout:"horizontal",position:"bottom"},label:{type:"outer",content:function(p){return"".concat(p.project).concat(p.amount,"\u5143")}},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},r={appendPadding:10,angleField:"num",colorField:"project",radius:.8,legend:{layout:"horizontal",position:"bottom"},label:{type:"outer",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}],meta:{num:{alias:"\u4EBA\u6570"},amount:{project:"\u9879\u76EE"}}};return(0,_.jsxs)(u.ZP,{split:"vertical",className:"cards",children:[(0,_.jsx)(u.ZP,{title:"\u4E1A\u7EE9\u91D1\u989D",style:{height:"400px"},children:(0,_.jsx)(f.Z,(0,o.Z)({data:v},s))}),(0,_.jsx)(u.ZP,{title:"\u62DB\u751F\u4EBA\u6570",style:{height:"400px"},children:(0,_.jsx)(f.Z,(0,o.Z)({data:v},r))}),t&&(0,_.jsx)(u.ZP,{title:"\u4E1A\u7EE9\u6392\u540D",colSpan:"20%",children:(0,_.jsx)("ul",{className:"contentUl",style:{overflow:"auto",height:"390px"},children:t.map(function(a,p){return(0,_.jsxs)("li",{onClick:function(){l.m8.push("/business/statistics/performance?userId="+a.userId+"&moonTime="+d)},children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("span",{children:p+1}),a.name]}),(0,_.jsxs)("div",{children:[a.amount,"\u5143"]})]},"pie-chart-".concat(p))})})})]})}},47833:function(m,D,e){"use strict";var o=e(11849),f=e(39428),u=e(3182),l=e(67294),_=e(63430),c=e(30202),v=e(85893);D.Z=function(y,t){var d=y.orderContent,s={appendPadding:10,angleField:"value",colorField:"source",radius:.8,label:{type:"inner",offset:"-8%",content:"{name}",style:{fontSize:12}},interactions:[{type:"pie-legend-active"},{type:"element-active"}]},r={appendPadding:10,angleField:"value",colorField:"sourceValue",radius:.8,label:{type:"inner",offset:"-8%",content:"{name}",style:{fontSize:12}},interactions:[{type:"pie-legend-active"},{type:"element-active"}]};(0,l.useImperativeHandle)(t,function(){return{getPieData:a}});var a=function(){var p=(0,u.Z)((0,f.Z)().mark(function O(M,i,E){return(0,f.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}},O)}));return function(M,i,E){return p.apply(this,arguments)}}();return(0,v.jsx)("div",{children:(0,v.jsxs)(c.ZP,{split:"vertical",className:"cards",children:[(0,v.jsx)(c.ZP,{title:"\u8BA2\u5355\u6765\u6E90\u5360\u6BD4",style:{height:"400px"},children:(0,v.jsx)(_.Z,(0,o.Z)({data:d},s))}),(0,v.jsx)(c.ZP,{title:"\u8BA2\u5355\u6765\u6E90\u7B14\u6570",style:{height:"400px"},children:(0,v.jsx)(_.Z,(0,o.Z)({data:d},r))})]})})}},3133:function(m,D,e){"use strict";var o=e(39428),f=e(3182),u=e(37490),l=e(63863),_=function(){var y=(0,f.Z)((0,o.Z)().mark(function t(d,s,r){var a,p,O,M;return(0,o.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return a={},p={"status-isNot":0,enable:!0,parentId:-1,_isGetAll:!0,"createTime-start":d,"createTime-end":s},r&&(p.userId=r),E.next=5,l.Z.get("/sms/business/bizOrder",p);case 5:return O=E.sent.data,M=c(O),a.result=M,a.department=v(O),E.abrupt("return",a);case 10:case"end":return E.stop()}},t)}));return function(d,s,r){return y.apply(this,arguments)}}(),c=function(t){var d=t.content.reduce(function(s,r){var a=u.Z.getName("dict_source",r.source),p=s.find(function(O){return O.type===a});return p?p.value+=1:s.push({type:a,value:1}),s},[]);return d.forEach(function(s){var r=(s.value/t.content.length*100).toFixed(2);console.log("baifenbi",r),s.sourceValue="".concat(s.type).concat(s.value,"\u7B14"),s.source="".concat(s.type," ").concat(r,"%")}),d},v=function(t){var d=0,s=JSON.parse(localStorage.getItem("Department")),r=[];s==null||s.forEach(function(i){i.departmentName=="\u6C47\u5FB7\u6559\u80B2"&&(r=i.children)});var a=[],p=["\u4E2D\u5EFA\u4E8B\u4E1A\u90E8","\u5171\u8D62\u672A\u6765\u4E8B\u4E1A\u90E8","\u624D\u5B50\u4E8B\u4E1A\u90E8","\u6C47\u624D\u4E8B\u4E1A\u90E8","\u4E2D\u53F0","\u540E\u53F0"];r.forEach(function(i){p.indexOf(i.departmentName)>=0&&a.push(i)});var O=function i(E,h,n){E.forEach(function(x){if(x.userId==h.userId){n.num?n.num=n.num+h.quantity:n.num=h.quantity;return}x.children&&i(x.children,h,x)})};t.content.forEach(function(i){d=d+i.quantity,O(a,i,a)});var M=function i(E){var h=0;return E&&E.forEach(function(n){n.num&&(h=h+n.num),n.children&&(h=h+i(n.children))}),h};return a.forEach(function(i){i.num=i.num?i.num:0,i.num=M(i.children)+i.num}),{department:a,num:d}};D.Z=_},96266:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _services_util_dictionaries__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37490),contentData=function(content){var arr2=[],arr3={amount:0,num:0},arr4=[],arrProject=[];return content.forEach(function(m){arrProject.indexOf(m.project)=="-1"&&arrProject.push(m.project);var D=m.project?m.project.split(","):[""],e={project:_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_0__.Z.getCascaderName("dict_reg_job",D[0]),amount:m.amount,num:m.quantity?m.quantity:1,name:m.userName,userId:m.userId};if(arr2.length>0){var o=arr2.filter(function(u){return u.project==e.project}),f=arr4.filter(function(u){return u.name==e.name});f.length>0?arr4.forEach(function(u){u.name==f[0].name&&(u.amount=e.amount+f[0].amount)}):arr4.push({name:m.userName,amount:m.amount,userId:m.userId}),o.length>0?arr2.forEach(function(u){u.project==o[0].project&&(u.amount=o[0].amount+e.amount,u.quantity?u.num=u.num+u.quantity:u.num=u.num+1,arr3.amount=arr3.amount+e.amount,arr3.num=arr3.num+e.num)}):(arr2.push(e),arr3.amount=arr3.amount+e.amount,arr3.num=arr3.num+e.num)}else arr2.push(e),arr3.amount=arr3.amount+e.amount,arr3.num=arr3.num+e.num,arr4.push({name:m.userName,amount:m.amount,userId:m.userId})}),arr4.sort(function(m,D){return D.amount-m.amount}),arr3.num&&(arr3.num=eval(arr3.num.toString().split("").join("+"))),{arr2,arr3,arr4,arrProject}};__webpack_exports__.Z=contentData}}]);
