(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8646],{19619:function(xe,x,e){"use strict";e.d(x,{Z:function(){return j}});var D=e(28991),m=e(67294),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},P=S,O=e(27029),B=function(A,C){return m.createElement(O.Z,(0,D.Z)((0,D.Z)({},A),{},{ref:C,icon:P}))},T=m.forwardRef(B),j=T},22:function(xe,x,e){"use strict";var D=e(39428),m=e(11849),S=e(3182),P=e(2824),O=e(66801),B=e(63863),T=e(67294),j=e(85893);x.Z=function(a){var A=a.columns,C=a.actionRef,o=a.formRef,V=a.cardBordered,E=V===void 0?!0:V,w=a.scroll,_=w===void 0?!1:w,u=a.request,G=a.beforeSearchSubmit,L=a.toolbar,M=L===void 0?void 0:L,s=a.pagesizes,y=s===void 0?10:s,g=a.rowKey,f=g===void 0?"id":g,I=a.toolBarRender,K=I===void 0?[]:I,ne=a.dateFormatter,je=ne===void 0?"string":ne,se=a.rowSelection,Ae=se===void 0?!1:se,ie=a.expandable,t=ie===void 0?void 0:ie,Ce=a.tableAlertOptionRender,ye=Ce===void 0?void 0:Ce,_e=a.onRow,H=a.params,J=H===void 0?"":H,re=a.dataSource,le=re===void 0?void 0:re,Y=a.tableStyle,oe=Y===void 0?void 0:Y,ue=a.footer,de=ue===void 0?void 0:ue,W=a.onReset,U=W===void 0?void 0:W,me=a.onSubmit,ce=me===void 0?void 0:me,Q=a.onFn,X=Q===void 0?void 0:Q,fe=a.getTotalElements,k=fe===void 0?void 0:fe,Ee=a.getData,he=Ee===void 0?void 0:Ee,be=a.loding,q=be===void 0?void 0:be,N=a.search,F=N===void 0?void 0:N,ve=a.searchData,pe=ve===void 0?{}:ve,ee=a.headerTitle,De=a.editable,Pe=De===void 0?void 0:De,Be=a.className,R=Be===void 0?"tables":Be,Oe=a.rowClassName,Me=Oe===void 0?void 0:Oe,ge=!1;u&&(ge=u.sortList);var b={_orderBy:"",_direction:""},d=(0,T.useState)(y),r=(0,P.Z)(d,2),n=r[0],v=r[1],h=(0,T.useState)({}),p=(0,P.Z)(h,2),Te=p[0],Ie=p[1];return(0,j.jsx)(O.ZP,{columns:A,className:R,actionRef:C,formRef:o,cardBordered:E,scroll:_,headerTitle:ee,tableStyle:oe,dataSource:le,rowClassName:Me,request:function(){var te=(0,S.Z)((0,D.Z)().mark(function Z(c,Re,Se){var ae,l,z;return(0,D.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return Object.keys(c).forEach(function(i){(c[i]=="null"||c[i]==null)&&(c["".concat(i,"-isNull")]=!0,delete c[i])}),Object.keys(Re).length>0?Object.keys(Re).forEach(function(i){var Ze;b._orderBy=i,((Ze=Re[i])===null||Ze===void 0?void 0:Ze.indexOf("desc"))==0?b._direction="desc":b._direction="asc"}):ge?Object.keys(u.sortList).forEach(function(i){b._orderBy=i,b._direction=u.sortList[i]}):b={_orderBy:"",_direction:""},ae=c,Object.keys(ae).forEach(function(i){ae[i]===""&&delete ae[i]}),l=(0,m.Z)((0,m.Z)((0,m.Z)((0,m.Z)({},Se),u.params),ae),pe),Object.keys(l).forEach(function(i){(l[i]==""||l[i]==[""]||l[i]=="-isNull")&&l[i]!==0&&l[i]!==!1&&(l["".concat(i)+"-isNull"]=!0,delete l[i]),l[i]===null&&delete l[i],l[i]=="All"&&delete l[i]}),b._orderBy!==""&&Object.assign(l,b),Ie(l),$.next=10,B.Z.get(u.url,(0,m.Z)({},l));case 10:return z=$.sent,X&&X(z.data.content),he&&he(l),q&&q(!1),k&&k(z.data.totalElements),$.abrupt("return",{data:z.data.content,success:z.success,total:z.data.totalElements});case 16:case"end":return $.stop()}},Z)}));return function(Z,c,Re){return te.apply(this,arguments)}}(),rowKey:f,pagination:{pageSize:n,showSizeChanger:!0,onChange:function(Z,c){v(c)}},toolBarRender:function(){return K},rowSelection:Ae,params:J,expandable:t,dateFormatter:je,tableAlertOptionRender:ye,toolbar:M,onRow:_e,beforeSearchSubmit:G,onReset:U,onSubmit:ce,search:F,editable:Pe,footer:de,columnsState:{persistenceKey:R,persistenceType:"localStorage"}})}},42025:function(xe,x,e){"use strict";var D=e(39428),m=e(3182),S=e(34792),P=e(48086),O=e(11849),B=e(67294),T=e(37476),j=e(952),a=e(90672),A=e(63863),C=e(85893);x.Z=function(o){var V=o.modalVisible,E=o.setModalVisible,w=o.callbackRef,_=o.renderData,u=o.callback;console.log("renderData",_);var G=(0,B.useRef)(),L=function(s){var y=0;if(_.type!=0&&(y=_!=null&&_.auditNum?(_==null?void 0:_.auditNum)+1:1),s.confirm=_.confirm,s.entityId=_.id,s.entityId instanceof Array){for(var g=[],f=0;f<s.entityId.length;f++)g[f]=(0,O.Z)((0,O.Z)({},s),{},{entityId:s.entityId[f]});s=g}else s=[s];return new Promise(function(I){A.Z.postAll("/sms/business/bizAudit/audits/"+y,s).then(function(K){K.status=="success"&&(P.default.success("\u64CD\u4F5C\u6210\u529F"),E(),w(),I(!0))}).catch(function(K){I(!0)})})};return(0,C.jsx)(T.Y,{title:"\u5BA1\u6838\u610F\u89C1",formRef:G,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){E()},maskClosable:!1},onFinish:function(){var M=(0,m.Z)((0,D.Z)().mark(function s(y){return(0,D.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,L(y);case 2:case"end":return f.stop()}},s)}));return function(s){return M.apply(this,arguments)}}(),visible:V,children:(0,C.jsx)(j.ZP.Group,{children:(0,C.jsx)(a.Z,{label:"\u5BA1\u6838\u610F\u89C1",name:"remark",width:"lg",rules:[{required:!_.confirm,message:"\u8BF7\u8F93\u5165\u672A\u901A\u8FC7\u539F\u56E0"}]})})})}},14248:function(xe,x,e){"use strict";e.r(x);var D=e(54029),m=e(79166),S=e(32059),P=e(39428),O=e(11849),B=e(3182),T=e(62350),j=e(24565),a=e(34792),A=e(48086),C=e(22385),o=e(94199),V=e(57663),E=e(71577),w=e(71153),_=e(60331),u=e(2824),G=e(22),L=e(71906),M=e(63863),s=e(67294),y=e(40110),g=e(8212),f=e(19619),I=e(82061),K=e(79189),ne=e(90631),je=e(42025),se=e(25912),Ae=e(94361),ie=e(66573),t=e(85893);x.default=function(Ce){var ye=(0,s.useState)(!1),_e=(0,u.Z)(ye,2),H=_e[0],J=_e[1],re=(0,s.useState)(!1),le=(0,u.Z)(re,2),Y=le[0],oe=le[1],ue=(0,s.useState)({"auditNum-isNull":!0,enable:!0,isSubmit:!0}),de=(0,u.Z)(ue,2),W=de[0],U=de[1],me=(0,s.useState)(!1),ce=(0,u.Z)(me,2),Q=ce[0],X=ce[1],fe=(0,s.useState)(7),k=(0,u.Z)(fe,2),Ee=k[0],he=k[1],be=(0,s.useState)(null),q=(0,u.Z)(be,2),N=q[0],F=q[1],ve=(0,s.useState)([0,0]),pe=(0,u.Z)(ve,2),ee=pe[0],De=pe[1],Pe=(0,s.useRef)(),Be="/sms/business/bizStudent",R=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Pe.current.reload(),r&&Me()},Oe=[{width:80,title:"\u7F16\u53F7",dataIndex:"num",sorter:!0},{width:100,title:"\u7533\u8BF7\u90E8\u95E8",dataIndex:"departmentName",sorter:!0},{width:90,title:"\u7533\u8BF7\u4EBA",dataIndex:"userName",sorter:!0},{width:100,title:"\u6536\u6B3E\u5355\u4F4D",dataIndex:"payee",sorter:!0},{width:100,title:"\u4ED8\u6B3E\u660E\u7EC6",dataIndex:"details",sorter:!0},{width:100,title:"\u4ED8\u6B3E\u91D1\u989D",dataIndex:"amount",sorter:!0},{width:90,title:"\u8D1F\u8D23\u4EBA",dataIndex:"chargePersonName",sorter:!0},{title:"\u7533\u8BF7\u65F6\u95F4",key:"createTime",dataIndex:"createTime",valueType:"dateRange",sorter:!0,render:function(r,n){return(0,t.jsx)("span",{children:n.createTime},"createTime-".concat(n.id))}},{title:"\u8981\u6C42\u4ED8\u6B3E\u65F6\u95F4",key:"paymentTime",dataIndex:"paymentTime",valueType:"dateRange",sorter:!0,render:function(r,n){return(0,t.jsx)("span",{children:n.paymentTime},"paymentTime-".concat(n.id))}},{width:100,title:"\u6709\u65E0\u53D1\u7968",dataIndex:"hasInvoice",search:!1,sorter:!0,render:function(r,n){return(0,t.jsx)("span",{children:n.hasInvoice?"\u6709\u53D1\u7968":"\u65E0\u53D1\u7968"},"hasInvoice-".concat(n.id))}},{title:"\u5907\u6CE8",dataIndex:"description",search:!1},{width:100,title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"confirm",sorter:!0,render:function(r,n){return(0,t.jsx)(t.Fragment,{children:n.confirm===!1?(0,t.jsxs)(_.Z,{color:"#FF0000",children:[n.auditType=="7"?"\u90E8\u95E8\u4E3B\u7BA1":"\u8D22\u52A1","\u672A\u901A\u8FC7"]}):n.auditType=="8"?(0,t.jsx)(_.Z,{color:"#87d068",children:"\u5DF2\u901A\u8FC7"}):(0,t.jsx)(_.Z,{color:"#f50",children:"\u672A\u5BA1\u6838"})})}},{width:100,title:"\u5BA1\u6838\u5EFA\u8BAE",dataIndex:"remark",search:!1,sorter:!0},{width:90,title:"\u5BA1\u6838\u4EBA",dataIndex:"auditor",search:!1,sorter:!0},{title:"\u64CD\u4F5C",search:!1,width:180,render:function(r,n){return[(0,t.jsx)(o.Z,{placement:"topLeft",title:"\u67E5\u770B",children:(0,t.jsx)(E.Z,{type:"primary",size:"small",icon:(0,t.jsx)(y.Z,{}),style:{marginRight:"10px",marginBottom:"8px"},onClick:function(){F(n),X(!0)},children:"\u67E5\u770B"},"eidt-payment-audit")},"eidts-view"),(0,t.jsx)(o.Z,{placement:"topLeft",title:"\u91CD\u65B0\u63D0\u4EA4",children:(0,t.jsx)(E.Z,{type:"primary",size:"small",hidden:n.isSubmit,icon:(0,t.jsx)(g.Z,{}),style:{marginRight:"10px",marginBottom:"8px"},onClick:function(){M.Z.post("/sms/business/bizPaymentApply",{id:n.id,isSubmit:!0}).then(function(h){h.status=="success"&&(A.default.success("\u91CD\u65B0\u63D0\u4EA4\u6210\u529F"),R())})},children:"\u91CD\u65B0\u63D0\u4EA4"},"eidt-payment-audit-resubmit")},"eidts-resubmit"),(0,t.jsx)(o.Z,{placement:"topLeft",title:"\u5BA1\u6838",children:(0,t.jsx)(j.Z,{title:"\u5BA1\u6838",okText:"\u901A\u8FC7",cancelText:"\u672A\u901A\u8FC7",onConfirm:function(h){h==null||h.stopPropagation(),F({auditNum:n!=null&&n.auditNum?n.auditNum:6,confirm:!0,id:n.id}),J(!0)},onCancel:function(){F({auditNum:n!=null&&n.auditNum?n.auditNum:6,confirm:!1,id:n.id}),J(!0)},children:(0,t.jsx)(E.Z,{type:"primary",size:"small",hidden:!n.isSubmit,icon:(0,t.jsx)(f.Z,{}),style:{marginRight:"10px",marginBottom:"8px"},children:"\u5BA1\u6838"},"audit-payment-audit")},"look-payment-audit")},"looks-audit"),(0,t.jsx)(o.Z,{placement:"topLeft",title:"\u7F16\u8F91",children:(0,t.jsx)(E.Z,{type:"primary",size:"small",icon:(0,t.jsx)(g.Z,{}),className:"tablebut",style:{marginRight:"10px",marginBottom:"8px"},onClick:(0,B.Z)((0,P.Z)().mark(function v(){return(0,P.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:F((0,O.Z)((0,O.Z)({},n),{},{type:"eidt",renderDataNum:0,audit:Ee})),oe(!0);case 2:case"end":return p.stop()}},v)})),children:"\u7F16\u8F91"},"editable-payment-audit")},"editables"),(0,t.jsx)(o.Z,{placement:"topLeft",title:"\u5E9F\u9664",children:(0,t.jsx)(j.Z,{title:"\u662F\u5426\u5E9F\u9664",okText:"\u5E9F\u9664",cancelText:"\u53D6\u6D88",onConfirm:function(h){M.Z.post("/sms/business/bizPaymentApply/disable/"+n.id).then(function(p){p.status=="success"&&(A.default.success("\u64CD\u4F5C\u6210\u529F"),R())})},children:(0,t.jsx)(E.Z,{type:"primary",size:"small",danger:!0,style:{marginRight:"10px",marginBottom:"8px"},icon:(0,t.jsx)(I.Z,{}),className:"tablebut",children:"\u5E9F\u9664"},"enable-payment-audit-btn")},"enable-payment-audit")},"enable"),(0,t.jsx)(o.Z,{placement:"topLeft",title:"\u5BFC\u51FA\u4ED8\u8D39\u4FE1\u606F",children:(0,t.jsx)(E.Z,{type:"primary",hidden:W.auditNum!="8",size:"small",style:{marginRight:"10px",marginBottom:"8px"},icon:(0,t.jsx)(K.Z,{}),onClick:function(){(0,ie.Z)("/sms/business/bizPaymentApply/export",n.id)},children:"\u5BFC\u51FA\u4ED8\u8D39\u4FE1\u606F"},"dapchu-payment-audit-btn")},"dapchu-payment-audit"),(0,t.jsx)(o.Z,{placement:"topLeft",title:"\u6253\u5370",children:(0,t.jsx)(E.Z,{type:"primary",hidden:W.auditNum!="8",size:"small",style:{marginRight:"10px",marginBottom:"8px"},icon:(0,t.jsx)(ne.Z,{}),onClick:function(){var h=sessionStorage.getItem("tokenName"),p=sessionStorage.getItem("tokenValue"),Te={};Te[h]=p,fetch("/sms/business/bizPaymentApply/export/2?id="+n.id,{method:"GET",headers:Te}).then(function(Ie){Ie.blob().then(function(te){var Z,c=document.createElement("iframe");c.src=URL.createObjectURL(new Blob([te],{type:"application/pdf"})),c.style.display="none",document.body.appendChild(c),(Z=c.contentWindow)===null||Z===void 0||Z.print()})})},children:"\u6253\u5370"},"\u6253\u5370")},"dayin-print")]}}],Me=function(){M.Z.get("/sms/business/bizPaymentApply/statistics",{array:JSON.stringify([{"auditNum-isNull":!0,isSubmit:!0},{auditNum:"7",confirm:!0,isSubmit:!0},{enable:!0,isSubmit:!1}])}).then(function(r){De(r.data)})};(0,s.useEffect)(function(){Me()},[]);var ge=W,b=(0,S.Z)({},"num,updateTime","desc,desc");return(0,t.jsxs)(L.ZP,{children:[(0,t.jsx)(G.Z,{actionRef:Pe,columns:Oe,className:"PaymentAudit",search:{labelWidth:120,defaultCollapsed:!0,defaultColsNumber:6},request:{url:"/sms/business/bizPaymentApply",params:ge,sortList:b},toolbar:{menu:{type:"tab",items:[{key:"6",label:(0,t.jsx)(m.Z,{count:ee[0],size:"small",offset:[5,3],children:(0,t.jsx)("span",{children:"\u2460\u4E3B\u7BA1\u5BA1\u6838"})})},{key:"7",label:(0,t.jsx)(m.Z,{count:ee[1],size:"small",offset:[5,3],children:(0,t.jsx)("span",{children:"\u2461\u8D22\u52A1\u5BA1\u6838"})})},{key:"8",label:(0,t.jsx)("span",{children:"\u5BA1\u6838\u5B8C\u6210"})},{key:"false",label:(0,t.jsx)(m.Z,{count:ee[2],size:"small",offset:[5,3],children:(0,t.jsx)("span",{children:"\u5BA1\u6838\u672A\u901A\u8FC7"})})},{key:"enable",label:(0,t.jsx)("span",{children:"\u5DF2\u5E9F\u9664"})}],onChange:function(r){U(r==="false"?{isSubmit:!1,enable:!0}:r==="6"?{"auditNum-isNull":!0,enable:!0,isSubmit:!0}:r==="enable"?{enable:!1}:{auditNum:r,"confirm-isNot":!1,enable:!0,isSubmit:!0}),he(Number(r)+1),R(!1)}}}}),H&&(0,t.jsx)(je.Z,{setModalVisible:function(){return J(!1)},modalVisible:H,callbackRef:function(){return R()},renderData:N}),Q&&(0,t.jsx)(se.Z,{setModalVisible:function(){return X(!1)},modalVisible:Q,renderData:N,callbackRef:function(){return R()}}),Y&&(0,t.jsx)(Ae.Z,{setModalVisible:function(){return oe(!1)},modalVisible:Y,renderData:N,callbackRef:function(){return R()}})]})}}}]);
