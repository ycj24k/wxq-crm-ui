(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7927],{71198:function(X,I,e){"use strict";e.r(I);var Y=e(71194),T=e(50146),w=e(77883),y=e(49747),k=e(43358),F=e(34041),q=e(47673),Z=e(4107),ee=e(57663),W=e(71577),te=e(62350),K=e(24565),se=e(34792),h=e(48086),i=e(39428),D=e(11849),O=e(3182),ne=e(9715),E=e(55843),f=e(2824),c=e(67294),g=e(71906),U=e(66801),v=e(63863),x=e(37490),s=e(85893);I.default=function(){var C=(0,c.useRef)(),b=(0,c.useState)(!1),A=(0,f.Z)(b,2),S=A[0],P=A[1],$=(0,c.useState)(null),R=(0,f.Z)($,2),B=R[0],j=R[1],z=E.Z.useForm(),N=(0,f.Z)(z,1),M=N[0],V=(0,c.useState)([]),L=(0,f.Z)(V,2),G=L[0],H=L[1];(0,c.useEffect)(function(){J()},[]);var J=function(){var l=(0,O.Z)((0,i.Z)().mark(function a(){var n,r,t,o,_;return(0,i.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,v.Z.get("/sms/share/getDepartment",{_isGetAll:!0});case 2:n=d.sent,r=n.data[0].id,t=n.data.find(function(u){return u.parentId===r}),o=t?n.data.filter(function(u){return u.parentId===r&&u.parentId!=-1}):[],_=o.map(function(u){return(0,D.Z)((0,D.Z)({},u),{},{label:u.name,value:u.id})}),H(_);case 8:case"end":return d.stop()}},a)}));return function(){return l.apply(this,arguments)}}(),Q=[{title:"\u7B49\u7EA7\u540D\u79F0",dataIndex:"name"},{title:"\u90E8\u95E8",dataIndex:"departmentId",search:!1,sorter:!0,render:function(a,n){return(0,s.jsx)("span",{children:x.Z.getDepartmentName(n.departmentId)[0]})}},{title:"\u4F18\u5148\u7EA7",dataIndex:"weight",sorter:!0},{title:"\u63CF\u8FF0",dataIndex:"description",ellipsis:!0},{title:"\u64CD\u4F5C",valueType:"option",render:function(a,n){return[(0,s.jsx)("a",{onClick:function(){j(n),M.setFieldsValue(n),P(!0)},children:"\u7F16\u8F91"},"edit"),(0,s.jsx)(K.Z,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u7B49\u7EA7\uFF1F",onConfirm:(0,O.Z)((0,i.Z)().mark(function r(){var t;return(0,i.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,v.Z.delete("/sms/business/bizStudentLevel",{id:n.id});case 2:h.default.success("\u5220\u9664\u6210\u529F"),(t=C.current)===null||t===void 0||t.reload();case 4:case"end":return _.stop()}},r)})),children:(0,s.jsx)("a",{children:"\u5220\u9664"})},"del")]}}];return(0,s.jsxs)(g.ZP,{children:[(0,s.jsx)(U.ZP,{rowKey:"id",columns:Q,actionRef:C,search:{labelWidth:"auto"},toolBarRender:function(){return[(0,s.jsx)(W.Z,{type:"primary",onClick:function(){j(null),M.resetFields(),P(!0)},children:"\u65B0\u589E"},"new")]},request:function(){var l=(0,O.Z)((0,i.Z)().mark(function a(n,r){var t,o,_,p,d,u;return(0,i.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return _=(0,D.Z)({},n),r&&Object.keys(r).length&&(d=Object.keys(r)[0],_._orderBy=d,_._direction=(p=r[d])!==null&&p!==void 0&&p.startsWith("desc")?"desc":"asc"),m.next=4,v.Z.get("/sms/business/bizStudentLevel",_);case 4:return u=m.sent,m.abrupt("return",{data:((t=u.data)===null||t===void 0?void 0:t.content)||[],success:!0,total:((o=u.data)===null||o===void 0?void 0:o.totalElements)||0});case 6:case"end":return m.stop()}},a)}));return function(a,n){return l.apply(this,arguments)}}()}),(0,s.jsx)(T.Z,{title:B?"\u7F16\u8F91\u5B66\u5458\u7B49\u7EA7":"\u65B0\u589E\u5B66\u5458\u7B49\u7EA7",open:S,destroyOnClose:!0,onCancel:function(){return P(!1)},onOk:(0,O.Z)((0,i.Z)().mark(function l(){var a,n;return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.validateFields();case 2:if(n=t.sent,!B){t.next=9;break}return t.next=6,v.Z.post("/sms/business/bizStudentLevel",(0,D.Z)({id:B.id},n));case 6:h.default.success("\u66F4\u65B0\u6210\u529F"),t.next=12;break;case 9:return t.next=11,v.Z.post("/sms/business/bizStudentLevel",n);case 11:h.default.success("\u65B0\u589E\u6210\u529F");case 12:P(!1),(a=C.current)===null||a===void 0||a.reload();case 14:case"end":return t.stop()}},l)})),children:(0,s.jsxs)(E.Z,{form:M,layout:"vertical",preserve:!1,children:[(0,s.jsx)(E.Z.Item,{label:"\u7B49\u7EA7\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7B49\u7EA7\u540D\u79F0"}],children:(0,s.jsx)(Z.Z,{placeholder:"\u4F8B\u5982\uFF1AVIP\u3001\u666E\u901A\u3001\u91CD\u70B9\u8DDF\u8FDB"})}),(0,s.jsx)(E.Z.Item,{name:"departmentId",label:"\u6240\u5C5E\u516C\u53F8",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6240\u5C5E\u516C\u53F8"}],children:(0,s.jsx)(F.Z,{style:{width:"100%"},options:G,placeholder:"\u516C\u53F8"})}),(0,s.jsx)(E.Z.Item,{label:"\u4F18\u5148\u7EA7",name:"weight",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F18\u5148\u7EA7"}],children:(0,s.jsx)(y.Z,{min:0,precision:0,style:{width:"100%"},placeholder:"\u6570\u5B57\u8D8A\u5927\u4F18\u5148\u7EA7\u8D8A\u9AD8"})}),(0,s.jsx)(E.Z.Item,{label:"\u63CF\u8FF0",name:"description",children:(0,s.jsx)(Z.Z.TextArea,{rows:3,placeholder:"\u53EF\u586B\u5199\u8BE5\u7B49\u7EA7\u7684\u8BF4\u660E"})})]})})]})}}}]);
