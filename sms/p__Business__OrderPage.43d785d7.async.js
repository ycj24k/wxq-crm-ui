(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[998,4713,7785],{20924:function(g,p,e){"use strict";e.d(p,{Z:function(){return t}});var c=e(28991),v=e(67294),E={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},m=E,n=e(27029),i=function(l,o){return v.createElement(n.Z,(0,c.Z)((0,c.Z)({},l),{},{ref:o,icon:m}))},u=v.forwardRef(i),t=u},32779:function(g,p,e){"use strict";e.d(p,{Z:function(){return t}});var c=e(28991),v=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},m=E,n=e(27029),i=function(l,o){return v.createElement(n.Z,(0,c.Z)((0,c.Z)({},l),{},{ref:o,icon:m}))},u=v.forwardRef(i),t=u},76407:function(g,p,e){"use strict";e.d(p,{Z:function(){return t}});var c=e(28991),v=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"},m=E,n=e(27029),i=function(l,o){return v.createElement(n.Z,(0,c.Z)((0,c.Z)({},l),{},{ref:o,icon:m}))},u=v.forwardRef(i),t=u},8214:function(g,p,e){"use strict";var c=e(28991),v=e(81253),E=e(85893),m=e(67294),n=e(53048),i=["fieldProps","request","params","proFieldProps"],u=function(a,l){var o=a.fieldProps,D=a.request,j=a.params,T=a.proFieldProps,O=(0,v.Z)(a,i);return(0,E.jsx)(n.Z,(0,c.Z)({valueType:"cascader",fieldProps:o,ref:l,request:D,params:j,filedConfig:{customLightMode:!0},proFieldProps:T},O))};p.Z=m.forwardRef(u)},63434:function(g,p,e){"use strict";var c=e(63185),v=e(9676),E=e(28991),m=e(81253),n=e(85893),i=e(96202),u=e(67294),t=e(71436),a=e(53048),l=["options","fieldProps","proFieldProps","valueEnum"],o=u.forwardRef(function(O,S){var L=O.options,ee=O.fieldProps,qe=O.proFieldProps,Ve=O.valueEnum,we=(0,m.Z)(O,l);return(0,n.jsx)(a.Z,(0,E.Z)({ref:S,valueType:"checkbox",valueEnum:(0,i.h)(Ve,void 0),fieldProps:(0,E.Z)({options:L},ee),lightProps:(0,E.Z)({labelFormatter:function(){return(0,n.jsx)(a.Z,(0,E.Z)({ref:S,valueType:"checkbox",mode:"read",valueEnum:(0,i.h)(Ve,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,E.Z)({options:L},ee),proFieldProps:qe},we))}},we.lightProps),proFieldProps:qe},we))}),D=u.forwardRef(function(O,S){var L=O.fieldProps,ee=O.children;return(0,n.jsx)(v.Z,(0,E.Z)((0,E.Z)({ref:S},L),{},{children:ee}))}),j=(0,t.G)(D,{valuePropName:"checked"}),T=j;T.Group=o,p.Z=T},34540:function(g,p,e){"use strict";var c=e(28991),v=e(81253),E=e(85893),m=e(51617),n=e(67294),i=e(66758),u=e(53048),t=["fieldProps","proFieldProps"],a="dateRange",l=n.forwardRef(function(o,D){var j=o.fieldProps,T=o.proFieldProps,O=(0,v.Z)(o,t),S=(0,n.useContext)(i.Z);return(0,E.jsx)(u.Z,(0,c.Z)({ref:D,fieldProps:(0,c.Z)({getPopupContainer:S.getPopupContainer},j),valueType:a,proFieldProps:T,filedConfig:{valueType:a,lightFilterLabelFormatter:function(ee){return(0,m.Z)(ee,(j==null?void 0:j.format)||"YYYY-MM-DD")}}},O))});p.Z=l},22452:function(g,p,e){"use strict";var c=e(28991),v=e(81253),E=e(85893),m=e(67294),n=e(66758),i=e(53048),u=["fieldProps","proFieldProps"],t="dateTime",a=m.forwardRef(function(l,o){var D=l.fieldProps,j=l.proFieldProps,T=(0,v.Z)(l,u),O=(0,m.useContext)(n.Z);return(0,E.jsx)(i.Z,(0,c.Z)({ref:o,fieldProps:(0,c.Z)({getPopupContainer:O.getPopupContainer},D),valueType:t,proFieldProps:j,filedConfig:{valueType:t,customLightMode:!0}},T))});p.Z=a},5436:function(g,p,e){"use strict";var c=e(28991),v=e(81253),E=e(85893),m=e(67294),n=e(53048),i=["fieldProps","proFieldProps","locale","min","max"],u=function(a,l){var o=a.fieldProps,D=a.proFieldProps,j=a.locale,T=a.min,O=a.max,S=(0,v.Z)(a,i);return(0,E.jsx)(n.Z,(0,c.Z)({valueType:{type:"money",locale:j},fieldProps:(0,c.Z)({min:T,max:O},o),ref:l,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:D},S))};p.Z=m.forwardRef(u)},86615:function(g,p,e){"use strict";var c=e(88983),v=e(55742),E=e(28991),m=e(81253),n=e(85893),i=e(96202),u=e(67294),t=e(71436),a=e(53048),l=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],o=u.forwardRef(function(O,S){var L=O.fieldProps,ee=O.options,qe=O.radioType,Ve=O.layout,we=O.proFieldProps,r_=O.valueEnum,f=(0,m.Z)(O,l);return(0,n.jsx)(a.Z,(0,E.Z)((0,E.Z)({valueType:qe==="button"?"radioButton":"radio",ref:S,valueEnum:(0,i.h)(r_,void 0)},f),{},{fieldProps:(0,E.Z)({options:ee,layout:Ve},L),proFieldProps:we,filedConfig:{customLightMode:!0}}))}),D=u.forwardRef(function(O,S){var L=O.fieldProps,ee=O.children;return(0,n.jsx)(v.ZP,(0,E.Z)((0,E.Z)({},L),{},{ref:S,children:ee}))}),j=(0,t.G)(D,{valuePropName:"checked",ignoreWidth:!0}),T=j;T.Group=o,T.Button=v.ZP.Button,T.displayName="ProFormComponent",p.Z=T},35687:function(g,p,e){"use strict";e.r(p),e.d(p,{default:function(){return Dr}});var c=e(11849),v=e(71194),E=e(50146),m=e(57663),n=e(71577),i=e(34792),u=e(48086),t=e(86582),a=e(39428),l=e(3182),o=e(2824),D=e(30202),j=e(71906),T=e(952),O=e(37476),S=e(64317),L=e(5966),ee=e(8214),qe=e(90672),Ve=e(59962),we=e(24739),r_=e(66801),f=e(67294),M=e(37490),ne=e(63863),d_=e(21874),ur=e(14500),at=e(32157),nr=e(5816),or=e(91220),st=e(47673),ir=e(4107),r=e(85893),lr=ir.Z.Search,dr=function(Z){var te=Z.MenuVisible,Ee=Z.setMenuVisible,A=Z.callbackRef,$=Z.backProject,Oe=Z.awaylsUseProject,$e=(0,f.useState)([]),de=(0,o.Z)($e,2),_e=de[0],ce=de[1],Pe=(0,f.useState)([]),re=(0,o.Z)(Pe,2),ge=re[0],oe=re[1],Me=(0,f.useState)([]),K=(0,o.Z)(Me,2),Y=K[0],k=K[1],Ce=(0,f.useState)([]),me=(0,o.Z)(Ce,2),Je=me[0],Re=me[1],Ue=(0,f.useState)(""),Te=(0,o.Z)(Ue,2),Ye=Te[0],Ge=Te[1],Ie=function G(w){return!w||!Array.isArray(w)?[]:w.map(function(U){return{key:U.value,title:U.name,children:U.children?G(U.children):[]}})};(0,f.useEffect)(function(){},[]),(0,f.useEffect)(function(){var G=localStorage.getItem("dictionariesList");if(G){var w=JSON.parse(G)[1].children,U=Ie(w);console.log(U,"handleOpenProject()"),ce(U),oe(U)}},[]);var We=function(){if(Oe){var w=localStorage.getItem("dictionariesList");if(w){var U=JSON.parse(w)[1].children,J=M.Z.findDataByValues(Oe,U);if(J){var H=[J],W=Ie(H);ce(W),oe(W)}else console.error("\u7A7A\u6570\u7EC4")}}else{var z=localStorage.getItem("dictionariesList");if(z){var fe=JSON.parse(z)[1].children,De=Ie(fe);ce(De),oe(De)}}},t_=function G(w,U){return U?w.map(function(J){var H=(0,c.Z)({},J),W=J.title.toLowerCase().includes(U.toLowerCase());return J.children&&J.children.length>0?(H.children=G(J.children,U),H.children.length>0||W?H:null):W?H:null}).filter(Boolean):w};(0,f.useEffect)(function(){oe(t_(_e,Ye))},[Ye,_e]),(0,f.useEffect)(function(){$&&$.length>0?(k($),Re($)):(k([]),Re([]))},[$]);var Fe=function(w){var U=[],J=function H(W){!W||(W.key&&U.push(W.key),W.children&&W.children.length>0&&W.children.forEach(function(z){return H(z)}))};return J(w),U},Ke=function G(w,U){var J=(0,or.Z)(U),H;try{for(J.s();!(H=J.n()).done;){var W=H.value;if(W.key===w)return W;if(W.children&&W.children.length>0){var z=G(w,W.children);if(z)return z}}}catch(fe){J.e(fe)}finally{J.f()}return null},a_=function(w,U){var J=U.node,H=U.checked,W=J.key,z=(0,t.Z)(Y);if(H){var fe=Ke(W,_e);if(fe){var De=Fe(fe);z=(0,t.Z)(new Set([].concat((0,t.Z)(z),(0,t.Z)(De))))}}else{var Ae=Ke(W,_e);if(Ae){var He=Fe(Ae);z=z.filter(function(Qe){return!He.includes(Qe)})}}k(z),console.log(z,"newCheckedKeys"),Re(z)},ze=function(){ne.Z.postAll("/sms/commonProjects",Je).then(function(w){w.status=="success"&&(u.default.success("\u64CD\u4F5C\u6210\u529F"),Ee(!1),A())})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(E.Z,{title:"\u8BBE\u7F6E\u5E38\u7528\u9879\u76EE",open:te,onCancel:function(){Ee(!1),ce([])},onOk:function(){ze()},width:500,destroyOnClose:!0,children:(0,r.jsx)("div",{style:{width:"100%",height:"400px",overflowY:"auto"},children:(0,r.jsx)("div",{style:{width:"100%",overflowY:"auto"},children:(0,r.jsxs)("div",{className:"menu-tree-container",children:[(0,r.jsx)(lr,{placeholder:"\u641C\u7D22\u83DC\u5355",allowClear:!0,onChange:function(w){return Ge(w.target.value)},style:{marginBottom:8}}),_e.length>0?ge.length>0?(0,r.jsx)(nr.Z,{showIcon:!0,checkable:!0,defaultExpandAll:!1,treeData:ge,checkedKeys:Y,onCheck:a_,checkStrictly:!0}):(0,r.jsx)("div",{children:"\u6CA1\u6709\u5339\u914D\u7684\u83DC\u5355\u9879"}):(0,r.jsx)("div",{children:"\u6682\u65E0\u83DC\u5355\u6570\u636E"})]})})})})})},ut=e(12968),cr=e(20352),nt=e(43185),v_=e(43027),Z_=e(80876),mr=e(35562),pr=e(86615),Er=e(45510),fr=function(Z){var te=Z.modalVisible,Ee=Z.setModalVisible,A=Z.callbackRef,$=Z.datas,Oe=Z.url,$e=Z.setSubimtDatas,de=(0,f.useState)(""),_e=(0,o.Z)(de,2),ce=_e[0],Pe=_e[1],re=(0,f.useRef)();(0,f.useEffect)(function(){var K;Pe($.job),re==null||(K=re.current)===null||K===void 0||K.setFieldsValue($)},[]);var ge=function(Y){$e(JSON.stringify(Y)),Ee()},oe=function(Y,k){return k.some(function(Ce){return Ce.label.toLowerCase().indexOf(Y.toLowerCase())>-1})};function Me(K,Y){Pe(K),console.log(K,Y)}return(0,r.jsxs)(O.Y,{title:"\u5065\u5EB7\u627F\u82E5\u4E66\u8D44\u6599",visible:te,formRef:re,width:660,autoFocusFirstInput:!0,modalProps:{onCancel:function(){return Ee()},destroyOnClose:!0},onFinish:function(){var K=(0,l.Z)((0,a.Z)().mark(function Y(k){return(0,a.Z)().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return k.job=M.Z.getCascaderAllName("dict_reg_job",k.job),k.project=M.Z.getCascaderName("dict_reg_job",k.project),k.degree=M.Z.getName("dict_education",k.degree),k.sex=k.sex?"\u5973":"\u7537",me.next=6,ge(k);case 6:case"end":return me.stop()}},Y)}));return function(Y){return K.apply(this,arguments)}}(),children:[(0,r.jsx)(pr.Z.Group,{name:"type",label:"\u57F9\u8BAD\u65B9\u5F0F",options:[{label:"\u521D\u8BAD",value:"1"},{label:"\u590D\u8BAD",value:"2"}]}),(0,r.jsx)(L.Z,{label:"\u59D3\u540D",name:"name"},"name1"),(0,r.jsx)(L.Z,{label:"\u624B\u673A\u53F7\u7801",name:"mobile"},"mobile1"),(0,r.jsx)(L.Z,{label:"\u8EAB\u4EFD\u8BC1",name:"idCard"},"idCard1"),(0,r.jsx)(S.Z,{label:"\u6027\u522B",name:"sex",width:"xs",valueEnum:{false:"\u7537",true:"\u5973"}}),(0,r.jsx)(S.Z,{label:"\u5B66\u5386",name:"degree",width:"xs",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5B66\u5386"}],request:(0,l.Z)((0,a.Z)().mark(function K(){return(0,a.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",M.Z.getList("dict_education"));case 1:case"end":return k.stop()}},K)}))}),(0,r.jsx)(S.Z,{width:"md",name:"job",placeholder:"\u9009\u62E9\u62A5\u8003\u5C97\u4F4D",label:"\u62A5\u8003\u5C97\u4F4D",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u62A5\u8003\u5C97\u4F4D"}],fieldProps:{options:M.Z.getList("dict_reg_job"),showSearch:{filter:oe},onChange:Me,onSearch:function(Y){return console.log(Y)}}}),(0,r.jsx)(S.Z,{width:"md",name:"project",placeholder:"\u9009\u62E9\u62A5\u8003\u5C97\u4F4D",label:"\u62A5\u8003\u5C97\u4F4D",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u62A5\u8003\u5C97\u4F4D"}],fieldProps:{options:M.Z.getList("dict_reg_job",ce),showSearch:{filter:oe}}}),(0,r.jsx)(L.Z,{label:"\u5DE5\u4F5C\u5355\u4F4D\u6216\u4F4F\u5740",name:"address"},"address1"),(0,r.jsxs)(T.ZP.Group,{title:"\u5DE5\u4F5C\u7ECF\u5386",children:[(0,r.jsx)(Er.Z,{name:"jobTime",fieldProps:{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD"},width:"sm",label:"\u5DE5\u4F5C\u65F6\u95F4\u6BB5"}),(0,r.jsx)(L.Z,{label:"\u5728\u4F55\u5730\u4F55\u5355\u4F4D",name:"jobAdress"},"jobAdress1"),(0,r.jsx)(L.Z,{label:"\u6240\u4ECE\u4E8B\u5DE5\u79CD",name:"jobType"},"jobType1")]})]})},vr=function(Z){var te=Z.modalVisible,Ee=Z.setModalVisible,A=Z.callbackRef,$=Z.renderData,Oe=Z.callbackData,$e=Z.url,de=Z.studentid,_e=Z.setID;console.log(de,"studentid"),console.log(_e,"setID");var ce=(0,f.useState)(!1),Pe=(0,o.Z)(ce,2),re=Pe[0],ge=Pe[1],oe=(0,f.useState)(!1),Me=(0,o.Z)(oe,2),K=Me[0],Y=Me[1],k=(0,f.useState)(!1),Ce=(0,o.Z)(k,2),me=Ce[0],Je=Ce[1],Re=(0,f.useState)(!1),Ue=(0,o.Z)(Re,2),Te=Ue[0],Ye=Ue[1],Ge=(0,f.useState)({}),Ie=(0,o.Z)(Ge,2),We=Ie[0],t_=Ie[1],Fe=(0,f.useState)(!1),Ke=(0,o.Z)(Fe,2),a_=Ke[0],ze=Ke[1],G=(0,f.useState)(),w=(0,o.Z)(G,2),U=w[0],J=w[1],H=(0,f.useState)({}),W=(0,o.Z)(H,2),z=W[0],fe=W[1],De=(0,f.useState)(),Ae=(0,o.Z)(De,2),He=Ae[0],Qe=Ae[1],ve=(0,f.useRef)(),h_=sessionStorage.getItem("tokenName"),s_=sessionStorage.getItem("tokenValue"),u_={};u_[h_]=s_,(0,f.useMemo)(function(){var N;console.log("subimtDatas",We),ve==null||(N=ve.current)===null||N===void 0||N.setFieldValue(Te,We)},[We]),(0,f.useEffect)(function(){var N=[];N=$.signup.map(function(P){return P_(P)}),ge(N),setTimeout(function(){var P,V={},q="";$.signup.forEach(function(){var y=(0,l.Z)((0,a.Z)().mark(function ie(x){return(0,a.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(x.name=="\u5B66\u5458\u59D3\u540D"&&(V[x.fieldId]=$.studentName),x.value){b.next=3;break}return b.abrupt("return");case 3:x.value.indexOf(".")>0?V[x.fieldId]=[{uid:x.orderFieldId,name:x.name,response:{data:x.value}}]:V[x.fieldId]=x.value;case 4:case"end":return b.stop()}},ie)}));return function(ie){return y.apply(this,arguments)}}()),ve==null||(P=ve.current)===null||P===void 0||P.setFieldsValue((0,c.Z)({},V))},100)},[]);var n_=function(){var N=(0,l.Z)((0,a.Z)().mark(function P(V,q){var y;return(0,a.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,mr.Z)("/sms/business/bizOrderField/download",V,q);case 2:return y=x.sent,x.abrupt("return",y.imgUrl[0]);case 4:case"end":return x.stop()}},P)}));return function(V,q){return N.apply(this,arguments)}}(),b_=function(){var N=(0,l.Z)((0,a.Z)().mark(function P(){var V,q,y;return(0,a.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:V=sessionStorage.getItem("tokenName"),q=sessionStorage.getItem("tokenValue"),y="/sms/business/bizOrder/buildSubmitQrcode?id="+_e+"&"+V+"="+q,ze(!0),J(y);case 5:case"end":return x.stop()}},P)}));return function(){return N.apply(this,arguments)}}(),c_=function(P){ne.Z.get("/sms/business/bizStudentUser",{id:de.studentId}).then(function(V){var q=V.data.content[0],y={name:q.name,mobile:q.mobile,idCard:q.idCard,sex:q.sex+"",degree:q.education+"",job:M.Z.getCascaderValue("dict_reg_job",$.project)[0],project:$.project};fe(y),Je(!0),Ye(P)})},P_=function(P){var V=P.format?new Function("return"+P.format)():{},q=V.size,y=q===void 0?null:q,ie=V.required,x=ie===void 0?!1:ie;switch(P.type){case 0:return(0,r.jsx)(L.Z,{name:P.fieldId,label:(0,r.jsxs)("text",{children:[P.name," ",V.typeName=="ChengruoData"?(0,r.jsx)("a",{onClick:function(){return c_(P.fieldId)},children:"\u63D0\u4EA4\u8D44\u6599"}):""]}),width:560,disabled:V.typeName=="ChengruoData",rules:[{required:x,pattern:new RegExp(/^\S*$/),message:"\u4E0D\u80FD\u5305\u542B\u7A7A\u683C/\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u7528\u6237\u540D"}]},P.fieldId);case 1:return(0,r.jsx)(L.Z,{name:P.fieldId,label:P.name,width:560,rules:[{required:x,pattern:new RegExp(M.Z.getRegex("idCard")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u8EAB\u4EFD\u8BC1\u53F7"}]},P.fieldId);case 2:return(0,r.jsx)(L.Z,{name:P.fieldId,label:P.name,width:560,rules:[{required:x,pattern:new RegExp(M.Z.getRegex("mobile")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"}]},P.fieldId);case 3:return(0,r.jsx)(Z_.Z,{width:560,name:P.fieldId,label:P.name,action:"/sms/business/bizOrderField/upload",rules:[{required:x}],fieldProps:{multiple:!1,headers:(0,c.Z)({},u_),listType:"picture",defaultFileList:[],beforeUpload:function(b){if(y&&b.size>y*1e3)return u.default.error("\u4E0A\u4F20\u6587\u4EF6\u4E0D\u80FD\u5927\u4E8E".concat(y,"kb")),v_.Z.LIST_IGNORE;if(b.type!="image/png"&&b.type!="image/jpeg")return u.default.error("\u53EA\u80FD\u4E0A\u4F20png\u3001jpg\u683C\u5F0F"),v_.Z.LIST_IGNORE},onPreview:function(){var le=(0,l.Z)((0,a.Z)().mark(function X(ke){var xe;return(0,a.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,n_(ke.uid,ke.response.data);case 2:xe=ae.sent,Qe(xe),Y(!0);case 5:case"end":return ae.stop()}},X)}));function b(X){return le.apply(this,arguments)}return b}(),onChange:function(b){var X=b.file.status;X==="done"?u.default.success("".concat(b.file.name," \u4E0A\u4F20\u6210\u529F.")):X==="error"&&u.default.error("".concat(b.file.name," \u4E0A\u4F20\u5931\u8D25."))}}},P.fieldId);case 4:return(0,r.jsx)(Z_.Z,{width:560,name:P.fieldId,label:P.name,action:"/sms/business/bizOrderField/upload",rules:[{required:x}],fieldProps:{multiple:!1,headers:(0,c.Z)({},u_),listType:"picture",defaultFileList:[],beforeUpload:function(b){if(y&&b.size>y*1e3)return u.default.error("\u4E0A\u4F20\u6587\u4EF6\u4E0D\u80FD\u5927\u4E8E".concat(y,"kb")),v_.Z.LIST_IGNORE},onPreview:function(){var le=(0,l.Z)((0,a.Z)().mark(function X(ke){var xe;return(0,a.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,n_(ke.uid,ke.response.data);case 2:xe=ae.sent,Qe(xe),Y(!0);case 5:case"end":return ae.stop()}},X)}));function b(X){return le.apply(this,arguments)}return b}(),onChange:function(b){var X=b.file.status;X==="done"?u.default.success("".concat(b.file.name," \u4E0A\u4F20\u6210\u529F.")):X==="error"&&u.default.error("".concat(b.file.name," \u4E0A\u4F20\u5931\u8D25."))}}},P.fieldId);case 5:return(0,r.jsx)(S.Z,{width:560,name:P.fieldId,placeholder:P.name,label:P.name,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u62A5\u8003\u5C97\u4F4D"}],fieldProps:{options:M.Z.getList("dict_reg_job",M.Z.getCascaderAllName("dict_reg_job",$.project,"value"),!1)}})}},m_=function(P,V){var q=[];Object.keys(P).forEach(function(y,ie){$.signup.forEach(function(x){x.fieldId==y&&(typeof P[y]=="object"?q.push({fieldId:y,value:P[y][0].response.data,orderId:_e,type:$.valueType}):q.push({fieldId:y,value:P[y],orderId:_e,type:$.valueType}),x.orderFieldId&&(q[ie].id=x.orderFieldId))})}),ne.Z.postAll("/sms/business/bizOrderField/saveArray",{array:q}).then(function(y){y.status=="success"&&(u.default.success("\u64CD\u4F5C\u6210\u529F"),Ee(),Oe())})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.Z,{title:"\u63D0\u4EA4\u8D44\u6599\u4E8C\u7EF4\u7801",open:a_,width:500,onCancel:function(){return ze(!1)},footer:null,destroyOnClose:!0,children:(0,r.jsx)("img",{style:{width:"400px",height:"400px"},src:U})}),(0,r.jsxs)(O.Y,{title:"\u63D0\u4EA4\u8D44\u6599",formRef:ve,visible:te,width:660,autoFocusFirstInput:!0,modalProps:{onCancel:function(){return Ee()}},onFinish:function(){var N=(0,l.Z)((0,a.Z)().mark(function P(V){return(0,a.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,m_(V,"edit");case 2:case"end":return y.stop()}},P)}));return function(P){return N.apply(this,arguments)}}(),children:[(0,r.jsx)(n.Z,{type:"primary",onClick:function(){return b_()},children:"\u6536\u96C6\u8D44\u6599\u4E8C\u7EF4\u7801"}),(0,r.jsx)(T.ZP.Group,{children:re}),(0,r.jsx)("div",{style:{display:"none"},children:(0,r.jsx)(cr.Z,{width:200,style:{display:"none"},preview:{visible:K,src:He,onVisibleChange:function(P){Y(P)}}})}),me&&(0,r.jsx)(fr,{setModalVisible:function(){return Je(!1)},modalVisible:me,renderData:$,callbackRef:function(){return A()},setSubimtDatas:function(P){return t_(P)},datas:z})]})]})},hr=e(21010),br=e(15258),Pr=e(90631),Dr=function(){var Z=(0,f.useRef)(),te=(0,f.useRef)(),Ee=(0,hr.tT)("@@initialState"),A=Ee.initialState,$=(0,f.useState)(!1),Oe=(0,o.Z)($,2),$e=Oe[0],de=Oe[1],_e=(0,f.useState)(!1),ce=(0,o.Z)(_e,2),Pe=ce[0],re=ce[1],ge=(0,f.useState)(!1),oe=(0,o.Z)(ge,2),Me=oe[0],K=oe[1],Y=(0,f.useState)(!1),k=(0,o.Z)(Y,2),Ce=k[0],me=k[1],Je=(0,f.useState)(0),Re=(0,o.Z)(Je,2),Ue=Re[0],Te=Re[1],Ye=(0,f.useState)(!1),Ge=(0,o.Z)(Ye,2),Ie=Ge[0],We=Ge[1],t_=(0,f.useState)(),Fe=(0,o.Z)(t_,2),Ke=Fe[0],a_=Fe[1],ze=(0,f.useState)(),G=(0,o.Z)(ze,2),w=G[0],U=G[1],J=(0,f.useState)(!1),H=(0,o.Z)(J,2),W=H[0],z=H[1],fe=(0,f.useState)(!1),De=(0,o.Z)(fe,2),Ae=De[0],He=De[1],Qe=(0,f.useState)(!1),ve=(0,o.Z)(Qe,2),h_=ve[0],s_=ve[1],u_=(0,f.useState)(!1),n_=(0,o.Z)(u_,2),b_=n_[0],c_=n_[1],P_=(0,f.useState)(),m_=(0,o.Z)(P_,2),N=m_[0],P=m_[1],V=(0,f.useState)(!1),q=(0,o.Z)(V,2),y=q[0],ie=q[1],x=(0,f.useState)({}),le=(0,o.Z)(x,2),b=le[0],X=le[1],ke=(0,f.useState)(!1),xe=(0,o.Z)(ke,2),p_=xe[0],ae=xe[1],jr=(0,f.useState)(""),y_=(0,o.Z)(jr,2),Or=y_[0],gr=y_[1],Mr=(0,f.useState)("0"),B_=(0,o.Z)(Mr,2),D_=B_[0],L_=B_[1],Cr=(0,f.useState)(),S_=(0,o.Z)(Cr,2),o_=S_[0],Rr=S_[1],Tr=(0,f.useState)(),w_=(0,o.Z)(Tr,2),Ir=w_[0],Ar=w_[1],xr=(0,f.useState)(1),U_=(0,o.Z)(xr,2),Zr=U_[0],yr=U_[1],Br=(0,f.useState)(),W_=(0,o.Z)(Br,2),Lr=W_[0],Sr=W_[1],wr=(0,f.useState)(),F_=(0,o.Z)(wr,2),Ur=F_[0],K_=F_[1],Wr=(0,f.useState)(),k_=(0,o.Z)(Wr,2),E_=k_[0],Fr=k_[1],Kr=(0,f.useState)(),N_=(0,o.Z)(Kr,2),q_=N_[0],kr=N_[1],Nr=(0,f.useState)(0),V_=(0,o.Z)(Nr,2),$_=V_[0],j_=V_[1],qr=(0,f.useState)(!1),J_=(0,o.Z)(qr,2),Y_=J_[0],G_=J_[1],Vr=(0,f.useState)(!1),z_=(0,o.Z)(Vr,2),ot=z_[0],H_=z_[1],se=(0,f.useRef)(null),he=(0,f.useRef)(null),be=(0,f.useRef)(null),$r=(0,f.useState)(),Q_=(0,o.Z)($r,2),O_=Q_[0],i_=Q_[1],Jr=(0,f.useState)(),X_=(0,o.Z)(Jr,2),g_=X_[0],M_=X_[1],Yr=(0,f.useState)(),er=(0,o.Z)(Yr,2),C_=er[0],R_=er[1],Xe=function(){var s,_,R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;_r.current.reloadAndRest(),(s=T_.current)===null||s===void 0||(_=s.reloadAndRest)===null||_===void 0||_.call(s),tr()},Gr=function(){s_(!1)},_r=(0,f.useRef)(),T_=(0,f.useRef)(),f_=(0,f.useRef)(null),l_=(0,f.useRef)(null);(0,f.useEffect)(function(){setTimeout(function(){var d;Z==null||(d=Z.current)===null||d===void 0||d.setFieldsValue({mobile:E_})},100)},[E_]);var it=function(s){yr(s.target.value)},rr=function d(s){return!s||!Array.isArray(s)?[]:s.map(function(_){return{key:_.id,value:_.value,label:_.name,children:_.children?d(_.children):[]}})},tr=function(){var d=(0,l.Z)((0,a.Z)().mark(function s(){var _,R,h,C,F,B;return(0,a.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,ne.Z.get("/sms/commonProjects");case 2:return _=Q.sent,R=localStorage.getItem("dictionariesList"),K_(_.data),R&&(C=JSON.parse(R)[1].children,F=M.Z.extractMatchingItems(C,_.data),F?(B=rr(F),h=B,U(B)):console.error("\u7A7A\u6570\u7EC4")),a_(_.data),Q.abrupt("return",h);case 8:case"end":return Q.stop()}},s)}));return function(){return d.apply(this,arguments)}}(),ar=function(){de(!1),G_(!1),re(!0);var s={};E_&&(s.mobile=E_),q_&&(s.weChat=q_),Object.keys(s).length>0&&setTimeout(function(){var _,R,h,C;te==null||(_=te.current)===null||_===void 0||_.setFieldsValue(s);var F={};F={name:A==null||(R=A.currentUser)===null||R===void 0?void 0:R.name,id:A==null||(h=A.currentUser)===null||h===void 0?void 0:h.userid},se==null||(C=se.current)===null||C===void 0||C.setDepartment(F),i_(F)},100),sr()},zr=function(){var d=(0,l.Z)((0,a.Z)().mark(function s(_){var R,h,C,F,B;return(0,a.Z)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:H_(!0),sr(),Ar(_),console.log(_,"\u4E0B\u5355"),Te(_.type),X(_),K(!0),R=M.Z.getCascaderValue("dict_reg_job",_.project)[0],h=M.Z.getCascaderValue("dict_reg_job",_.project)[1],C=M.Z.getCascaderName("dict_reg_job",R),F=M.Z.getCascaderName("dict_reg_job",h),B="".concat(C,"/").concat(F),setTimeout(function(){var pe,Ze,ue,je;Z==null||(pe=Z.current)===null||pe===void 0||pe.setFieldsValue({name:_.name,idCard:_.idCard,weChat:_.weChat,mobile:_.mobile,type:_.type.toString(),source:_.studentSource.toString(),project:B});var ye={},e_={id:_.userId,name:_.userName},Be={};if(_.provider)ye={id:_.provider,name:_.providerName};else{var Le,__;ye={name:A==null||(Le=A.currentUser)===null||Le===void 0?void 0:Le.name,id:A==null||(__=A.currentUser)===null||__===void 0?void 0:__.userid}}if(_.owner)Be={id:_.owner,name:_.ownerName?_.ownerName:"\u65E0"};else{var Se,Ne;Be={name:A==null||(Se=A.currentUser)===null||Se===void 0?void 0:Se.name,id:A==null||(Ne=A.currentUser)===null||Ne===void 0?void 0:Ne.userid}}se==null||(Ze=se.current)===null||Ze===void 0||Ze.setDepartment(e_),he==null||(ue=he.current)===null||ue===void 0||ue.setDepartment(ye),be==null||(je=be.current)===null||je===void 0||je.setDepartment(Be),i_(e_),M_(ye),R_(Be)},100);case 13:case"end":return Q.stop()}},s)}));return function(_){return d.apply(this,arguments)}}(),Hr=function(){var d=(0,l.Z)((0,a.Z)().mark(function s(_){var R,h,C,F,B,I,Q,pe;return(0,a.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,ne.Z.get("/sms/commonProjects");case 2:R=ue.sent,K_(R.data),h=localStorage.getItem("dictionariesList"),h&&(C=JSON.parse(h)[1].children,F=M.Z.extractMatchingItems(C,R.data),B=M.Z.findObjectAndRelated(C,_.project),I=F==null?void 0:F.find(function(je){return JSON.stringify(je)===JSON.stringify([B.parent][0])}),I?Q=F:Q=[].concat((0,t.Z)(F||[]),[[B.parent][0]]),pe=rr(Q),console.log(pe,"newData"),U(pe)),G_(!0),re(!0),Sr(_.studentId),Te(_.type),console.log(_,"record--------->"),setTimeout(function(){var je,ye,e_,Be;te==null||(je=te.current)===null||je===void 0||je.setFieldsValue({name:_.name,idCard:_.idCard,weChat:_.weChat,mobile:_.mobile,type:_.type.toString(),source:_.studentSource.toString(),project:M.Z.getCascaderValue("dict_reg_job",_.project)});var Le={},__={id:_.userId,name:_.userName},Se={};if(_.provider)Le={id:_.provider,name:_.providerName};else{var Ne,I_;Le={name:A==null||(Ne=A.currentUser)===null||Ne===void 0?void 0:Ne.name,id:A==null||(I_=A.currentUser)===null||I_===void 0?void 0:I_.userid}}if(_.owner)Se={id:_.owner,name:_.ownerName?_.ownerName:"\u65E0"};else{var A_,x_;Se={name:A==null||(A_=A.currentUser)===null||A_===void 0?void 0:A_.name,id:A==null||(x_=A.currentUser)===null||x_===void 0?void 0:x_.userid}}se==null||(ye=se.current)===null||ye===void 0||ye.setDepartment(__),he==null||(e_=he.current)===null||e_===void 0||e_.setDepartment(Le),be==null||(Be=be.current)===null||Be===void 0||Be.setDepartment(Se),i_(__),M_(Le),R_(Se)},100);case 12:case"end":return ue.stop()}},s)}));return function(_){return d.apply(this,arguments)}}(),Qr=function(){var s;He(!0),(s=te.current)===null||s===void 0||s.setFieldsValue({project:null})},Xr=function(){ne.Z.get("/sms/business/bizField/orderField",{orderId:o_,valueType:0,_isGetAll:!0,_orderBy:"fieldStandardId",_direction:"asc"}).then(function(s){var _=s.data.content;if(_.length<=0){u.default.error("\u5B66\u5458\u62A5\u8003\u9879\u76EE\u5C1A\u672A\u914D\u7F6E\u62A5\u540D\u8D44\u6599\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6DFB\u52A0\u3002",5);return}X({signup:_,valueType:0}),z(!0)})},et=function(){var d=(0,l.Z)((0,a.Z)().mark(function s(){var _,R,h;return(0,a.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:_=sessionStorage.getItem("tokenName"),R=sessionStorage.getItem("tokenValue"),h="/sms/business/bizOrder/buildSubmitQrcode?id="+o_+"&"+_+"="+R,c_(!0),P(h);case 5:case"end":return F.stop()}},s)}));return function(){return d.apply(this,arguments)}}(),sr=function(){var d=(0,l.Z)((0,a.Z)().mark(function s(){var _;return(0,a.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,ne.Z.get("/sms/commonProjects/enable");case 2:_=h.sent,_.status=="success"&&tr();case 4:case"end":return h.stop()}},s)}));return function(){return d.apply(this,arguments)}}(),_t={isPay:!0,isFormal:!0,"userId-isNull":!1,type:0,_orderBy:"isPay,isFormal,createTime",_direction:"asc,asc,desc",_page:0,_size:10},lt={},rt="/sms/business/bizStudentUser",tt=[{width:100,fixed:"left",title:"\u5B66\u5458",dataIndex:"name",align:"center",key:"name",search:!1},{title:"\u624B\u673A\u53F7",dataIndex:"mobile",key:"mobile",width:130},{title:"\u5FAE\u4FE1",dataIndex:"weChat",key:"weChat",width:130},{width:90,title:"\u6240\u5C5E\u8001\u5E08",dataIndex:"userName",search:!1},{width:100,title:"\u4FE1\u606F\u6240\u6709\u4EBA",dataIndex:"ownerName",render:function(s,_){return(0,r.jsxs)("div",{children:[_.ownerName,(0,r.jsx)("span",{children:_.ownerName&&"("+_.percent*100+"%)"})]})},search:!1},{width:100,title:"\u4FE1\u606F\u63D0\u4F9B\u4EBA",dataIndex:"providerName",search:!1},{width:100,title:"\u5BA2\u6237\u6765\u6E90",dataIndex:"studentSource",valueType:"select",key:"studentSource",search:!1,filters:!0,filterMultiple:!1,valueEnum:M.Z.getSearch("dict_source"),render:function(s,_){return(0,r.jsx)("span",{children:M.Z.getName("dict_source",_.studentSource)})}},{width:100,title:"\u54A8\u8BE2\u5C97\u4F4D",dataIndex:"project-in",search:!1,sorter:!0,key:"project-in",valueType:"select",fieldProps:{options:M.Z.getCascader("dict_reg_job"),mode:"tags"},render:function(s,_){return(0,r.jsx)("span",{children:M.Z.getCascaderName("dict_reg_job",_.project)})}},{title:"\u6027\u522B",dataIndex:"sex",width:70,search:!1,valueType:"select",key:"sex",valueEnum:{false:"\u7537",true:"\u5973"},render:function(s,_){return(0,r.jsx)("span",{children:_.sex==null?"\u672A\u77E5":_.sex?"\u5973":"\u7537"})}},{title:"\u9879\u76EE\u603B\u79F0",dataIndex:"parentProjects",search:!1,key:"parentProjects",sorter:!0,valueType:"select",fieldProps:{options:M.Z.getList("dict_reg_job"),mode:"tags"},width:100,render:function(s,_){return(0,r.jsx)("span",{children:M.Z.getCascaderAllName("dict_reg_job",_.project)},"parentProjects")}},{title:"QQ",dataIndex:"qq",search:!1,key:"qq",width:100,render:function(s,_){return(0,r.jsx)("span",{style:{userSelect:"none"},children:_.qq})}},{title:"\u8EAB\u4EFD\u8BC1",search:!1,dataIndex:"idCard",key:"idCard",hideInTable:!0},{title:"\u4FE1\u7528\u4EE3\u7801",search:!1,dataIndex:"code",key:"code",hideInTable:!0},{title:"\u662F\u5426\u662F\u540C\u884C\u4F01\u4E1A",dataIndex:"isPeer",search:!1,valueType:"select",key:"isPeer",valueEnum:{false:"\u5426",true:"\u662F"},hideInTable:!0},{width:100,title:"\u8D44\u6E90\u7C7B\u578B",dataIndex:"source",valueType:"select",search:!1,key:"source",filters:!0,filterMultiple:!1,valueEnum:M.Z.getSearch("circulationType"),render:function(s,_){return(0,r.jsx)("span",{children:M.Z.getName("circulationType",_.source)})}},{width:100,title:"\u9886\u53D6\u65F6\u95F4",search:!1,key:"receiveTime",dataIndex:"circulationTime",valueType:"dateRange",sorter:!0,render:function(s,_){return(0,r.jsx)("span",{children:_.circulationTime})}},{width:100,title:"\u4ECB\u7ECD\u65F6\u95F4",search:!1,key:"createTime",dataIndex:"createTimes",valueType:"dateRange",sorter:!0,render:function(s,_){return(0,r.jsx)("span",{children:_.createTime})}},{width:100,title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime",search:!1,dataIndex:"createTime",valueType:"dateRange",sorter:!0,render:function(s,_){return(0,r.jsx)("span",{children:_.createTime})}},{width:100,title:"\u54A8\u8BE2\u65F6\u95F4",key:"consultationTime",search:!1,dataIndex:"consultationTime",valueType:"dateRange",sorter:!0,render:function(s,_){return(0,r.jsx)("span",{children:_.consultationTime})}},{title:"\u662F\u5426\u4E3A\u51FA\u955C\u4EBA\u4E13\u5C5E\u8D44\u6E90",key:"isLive",dataIndex:"isLive",search:!1,valueType:"select",valueEnum:{true:"\u662F",false:"\u5426"},hideInTable:!0},{width:100,title:"\u5907\u6CE8",search:!1,dataIndex:"description",key:"descriptions",ellipsis:!0,tip:"\u5907\u6CE8\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u64CD\u4F5C",valueType:"option",width:260,key:"options",fixed:"right",render:function(s,_,R,h){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z,{type:"primary",size:"small",onClick:function(){return zr(_)},children:"\u4E0B\u5355"}),(0,r.jsx)(n.Z,{style:{marginLeft:"10px"},type:"primary",size:"small",onClick:function(){return Hr(_)},children:"\u7F16\u8F91"})]})}}];return(0,r.jsxs)(j.ZP,{children:[(0,r.jsx)(D.ZP,{children:(0,r.jsx)(r_.ZP,{columns:tt,className:"student",actionRef:_r,formRef:Z,cardBordered:!0,scroll:{x:1500},params:_t,request:(0,l.Z)((0,a.Z)().mark(function d(){var s,_,R,h,C=arguments;return(0,a.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return s=C.length>0&&C[0]!==void 0?C[0]:{},_=C.length>1?C[1]:void 0,R=C.length>2?C[2]:void 0,B.next=5,ne.Z.get(rt,s);case 5:return h=B.sent,Fr(s.mobile),kr(s.weChat),h.data.content.length===0&&de(!0),B.abrupt("return",{data:h.data.content,success:h.success,total:h.data.totalElements});case 10:case"end":return B.stop()}},d)}))})}),(0,r.jsx)(E.Z,{title:"\u67E5\u8BE2\u7ED3\u679C",onCancel:function(){de(!1)},onOk:ar,open:$e,children:(0,r.jsx)("p",{children:"\u5B66\u5458\u8D44\u6599\u4E0D\u5B58\u5728\uFF0C\u8BF7\u5B8C\u5584\u8D44\u6599\u540E\u518D\u4E0B\u5355"})}),(0,r.jsx)(E.Z,{title:"\u8D44\u6599\u63D0\u4EA4",onCancel:function(){s_(!1)},onOk:function(){return Xr()},open:h_,children:(0,r.jsx)("p",{children:"\u662F\u5426\u8FDB\u884C\u62A5\u8003\u8D44\u6599\u63D0\u4EA4"})}),(0,r.jsxs)(O.Y,{visible:Pe,title:"\u5B66\u5458\u4FE1\u606F",width:1e3,layout:"horizontal",formRef:te,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){L_("0"),re(!1)},maskClosable:!1},onFinish:function(){var d=(0,l.Z)((0,a.Z)().mark(function s(_){return(0,a.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(console.log(_,"values------>"),_.type&&(_.type=D_),_.isPeer&&(_.isPeer=_.isPeer),_.project&&(_.project=_.project[_.project.length-1]),_.owner&&(_.owner=M.Z.getUserId(_.owner.label)[0]),_.userId&&(_.userId=M.Z.getUserId(_.userId.label)[0]),_.provider&&(_.provider=M.Z.getUserId(_.provider.label)[0]),O_&&(_.userId=O_.id),g_&&(_.provider=g_.id),C_&&(_.owner=C_.id),O_){h.next=13;break}return E.Z.error({title:"\u8BF7\u9009\u62E9\u62DB\u751F\u8001\u5E08"}),h.abrupt("return");case 13:if(g_){h.next=16;break}return E.Z.error({title:"\u8BF7\u9009\u62E9\u4FE1\u606F\u63D0\u4F9B\u4EBA"}),h.abrupt("return");case 16:if(C_){h.next=19;break}return E.Z.error({title:"\u8BF7\u9009\u62E9\u51FA\u955C\u4EBA"}),h.abrupt("return");case 19:return console.log(_,"values------>"),H_(!1),X(_),Y_&&(K(!1),ne.Z.post("/sms/business/bizStudent",(0,c.Z)({id:Lr},_)).then(function(C){C.status=="success"&&(u.default.success("\u4FEE\u6539\u6210\u529F"),Xe(),re(!1))})),Y_||K(!0),h.abrupt("return",!0);case 25:case"end":return h.stop()}},s)}));return function(s){return d.apply(this,arguments)}}(),children:[(0,r.jsx)("div",{style:{marginBottom:"15px"},children:(0,r.jsx)(n.Z,{type:"primary",style:{marginBottom:"15px",marginLeft:"15px"},onClick:Qr,children:"\u8BBE\u7F6E\u5E38\u7528\u62A5\u8003\u9879\u76EE"})}),(0,r.jsxs)(T.ZP.Group,{children:[(0,r.jsx)(S.Z,{label:"\u5B66\u5458\u7C7B\u578B",name:"type",width:"md",request:(0,l.Z)((0,a.Z)().mark(function d(){return(0,a.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",M.Z.getList("studentType"));case 1:case"end":return _.stop()}},d)})),fieldProps:{onChange:function(s){console.log(s,"e---->"),L_(s),Te(s)}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5B66\u5458\u7C7B\u578B"}]}),(0,r.jsx)(L.Z,{width:"md",name:"name",label:D_==="0"?"\u5B66\u5458\u59D3\u540D":D_==="1"?"\u4F01\u4E1A\u540D\u79F0":"\u4EE3\u7406\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u5B66\u5458\u540D\u79F0",rules:[{required:!0,pattern:new RegExp(/^[\u4e00-\u9fa5]{2,5}$/),message:"\u4E0D\u80FD\u5305\u542B\u7A7A\u683C,\u4E0D\u80FD\u4E3A\u82F1\u6587,\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC75\u4E2A\u5B57"}]})]}),(0,r.jsxs)(T.ZP.Group,{children:[(0,r.jsx)(L.Z,{width:"md",name:"mobile",label:"\u624B\u673A\u53F7\u7801",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",rules:[{required:!0,pattern:new RegExp(M.Z.getRegex("mobile")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"}]}),(0,r.jsx)(L.Z,{width:"md",name:"weChat",label:"\u5FAE\u4FE1\u53F7\u7801",placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1\u53F7\u7801"})]}),(0,r.jsxs)(T.ZP.Group,{children:[(0,r.jsx)(L.Z,{width:"md",name:"idCard",label:"\u8EAB\u4EFD\u8BC1\u53F7",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",rules:[{required:!0,pattern:new RegExp(M.Z.getRegex("idCard")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u8EAB\u4EFD\u8BC1\u53F7"}]}),(0,r.jsx)(S.Z,{label:"\u5BA2\u6237\u6765\u6E90",name:"source",width:"md",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA2\u6237\u6765\u6E90"}],request:(0,l.Z)((0,a.Z)().mark(function d(){return(0,a.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",M.Z.getList("dict_source"));case 1:case"end":return _.stop()}},d)}))})]}),(0,r.jsxs)(T.ZP.Group,{children:[(0,r.jsx)(ee.Z,{width:"md",name:"project",placeholder:"\u54A8\u8BE2\u62A5\u8003\u5C97\u4F4D",label:"\u62A5\u8003\u5C97\u4F4D",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u62A5\u8003\u5C97\u4F4D"}],fieldProps:{options:w}}),(0,r.jsx)(d_.Z,{disabled:!1,newMedia:!0,ref:se,userLabel:"\u62DB\u751F\u8001\u5E08",userNames:"userId",userPlaceholder:"\u8BF7\u8F93\u5165\u62DB\u751F\u8001\u5E08",setUserNameId:function(s){return i_(s)},flag:!0})]}),(0,r.jsxs)(T.ZP.Group,{children:[(0,r.jsx)(d_.Z,{ref:be,userLabel:"\u51FA\u955C\u4EBA",filter:function(s){return s.unshift({title:"\u65E0",userId:-1,value:"-1"}),s},userNames:"owner",newMedia:!1,userPlaceholder:"\u8BF7\u8F93\u5165\u51FA\u955C\u4EBA",setUserNameId:function(s){return R_(s)},flag:!0}),(0,r.jsx)(d_.Z,{ref:he,userLabel:"\u4FE1\u606F\u63D0\u4F9B\u4EBA",userNames:"provider",userPlaceholder:"\u8BF7\u8F93\u5165\u4FE1\u606F\u63D0\u4F9B\u4EBA",setUserNameId:function(s){return M_(s)},flag:!0})]}),(0,r.jsx)(qe.Z,{width:1100,label:"\u5907\u6CE8",name:"description"}),Ue=="1"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(T.ZP.Group,{children:[(0,r.jsx)(L.Z,{width:"md",name:"chargePersonName",label:"\u4F01\u4E1A\u8054\u7CFB\u4EBA",placeholder:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u8054\u7CFB\u4EBA",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F01\u4E1A\u8054\u7CFB\u4EBA"}]}),(0,r.jsx)(L.Z,{width:"md",name:"code",label:"\u7EDF\u4E00\u793E\u4F1A\u4FE1\u7528\u4EE3\u7801",placeholder:"\u8BF7\u8F93\u5165\u7EDF\u4E00\u793E\u4F1A\u4FE1\u7528\u4EE3\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EDF\u4E00\u793E\u4F1A\u4FE1\u7528\u4EE3\u7801"}]}),(0,r.jsx)(S.Z,{label:"\u662F\u5426\u662F\u540C\u884C",name:"isPeer",width:"md",options:[{label:"\u662F",value:"true"},{label:"\u5426",value:"false"}],fieldProps:{onChange:function(s){console.log(s)}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u662F\u540C\u884C"}]})]}),Zr=="2"?(0,r.jsx)(Ve.u,{style:{marginTop:"15px"},name:"labels",label:"\u5171\u4EAB\u5206\u6210",deleteIconProps:!1,copyIconProps:!1,children:(0,r.jsxs)(we.UW,{children:[(0,r.jsx)(d_.Z,{ref:se,userNames:"userId",userPlaceholder:"\u8BF7\u9009\u62E9",setUserNameId:function(s){return i_(s)},flag:!0}),(0,r.jsx)(L.Z,{name:"label",placeholder:"\u8BF7\u8F93\u5165\u5206\u6210\u7684\u5360\u6BD4"})]},"group")}):""]}):""]}),(0,r.jsxs)(O.Y,{title:"\u4E0B\u5355",submitter:{submitButtonProps:{loading:Ie}},width:1200,visible:Me,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,onCancel:function(){Xe(),j_(0),K(!1)},maskClosable:!1},onFinish:function(){var d=(0,l.Z)((0,a.Z)().mark(function s(_){var R,h,C;return(0,a.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(R=f_.current)===null||R===void 0?void 0:R.getFormValues();case 2:h=B.sent,C=h.users.map(function(I){return{charge:{amount:I.amount,chargeLogIds:I.chargeLogIds,chargeLogName:I.chargeLogName,chargeTime:I.chargeTime,collectedAmount:I.collectedAmount,departmentId:b.departmentId,method:I.method,description:I.description,files:I.files?I.files[0].response.data:null,paymentTime:I.paymentTime,type:I.type,userId:b.userId},order:{classType:JSON.parse(I.JobClassExam).classType,examType:JSON.parse(I.JobClassExam).classType,classYear:JSON.parse(I.JobClassExam).classYear,receivable:JSON.parse(I.JobClassExam).receivable,project:JSON.parse(I.JobClassExam).project,discount:I.discount,source:b.source,discountRemark:I.discountRemark,provider:b.provider,quantity:I.quantity,studenUserId:b.studentId},student:{idCard:b.idCard,mobile:b.mobile,name:b.name,owner:b.owner,project:b.project,provider:b.provider,source:b.source,isPeer:b.isPeer?b.isPeer:null,type:b.type,userId:b.userId,totalReceivable:$_,chargePersonName:b.chargePersonName?b.chargePersonName:null,code:b.code?b.code:null}}}),ne.Z.postAll("/sms/business/bizOrder/intelligence",C).then(function(I){if(I.status=="success"){var Q,pe,Ze,ue;u.default.success("\u64CD\u4F5C\u6210\u529F"),b.type=="1"&&ie(!0),(b.type=="0"||b.type=="2")&&s_(!0),Rr(I.data[0]),j_(0),Xe(),(Q=Z.current)===null||Q===void 0||Q.resetFields(),se==null||(pe=se.current)===null||pe===void 0||pe.setDepartment({}),he==null||(Ze=he.current)===null||Ze===void 0||Ze.setDepartment({}),be==null||(ue=be.current)===null||ue===void 0||ue.setDepartment({}),K(!1),re(!1),f_.current&&f_.current.resetForm(),l_.current&&l_.current.resetPayWay()}else We(!1),u.default.error(I.msg)}).catch(function(I){console.log(I,"err"),We(!1)}),console.log(C,"newSubmitValue------>");case 6:case"end":return B.stop()}},s)}));return function(s){return d.apply(this,arguments)}}(),children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[(0,r.jsxs)("div",{style:{width:"30%",height:"40px",color:"rgba(0, 0, 0, 0.85)",fontWeight:"500",fontSize:"16px"},children:["\u5B66\u5458\u59D3\u540D\uFF1A",b.name]}),(0,r.jsxs)("div",{style:{width:"30%",height:"40px",color:"rgba(0, 0, 0, 0.85)",fontWeight:"500",fontSize:"16px"},children:["\u8054\u7CFB\u65B9\u5F0F\uFF1A",b.mobile]}),(0,r.jsxs)("div",{style:{width:"30%",height:"40px",color:"rgba(0, 0, 0, 0.85)",fontWeight:"500",fontSize:"16px"},children:["\u5F53\u524D\u8BA2\u5355\u5E94\u6536\u603B\u989D\uFF1A",$_]})]}),(0,r.jsx)(ur.Z,{renderData:b,typeStatus:Ue,projectslist:w,ref:f_,onTotalPriceChange:function(s){var _;j_(s),(_=Z.current)===null||_===void 0||_.setFieldsValue({totalReceivable:s})},onTotalQuantityChange:function(s){var _;(_=Z.current)===null||_===void 0||_.setFieldsValue({quantity:s})},onAddClassType:function(){var s,_;(s=l_.current)===null||s===void 0||(_=s.addPayWayItem)===null||_===void 0||_.call(s)},onRemoveClassType:function(s){if(l_.current){var _=l_.current;_.removePayWayItem&&_.removePayWayItem(s)}}})]}),(0,r.jsx)(E.Z,{title:"\u63D0\u4EA4\u8D44\u6599\u4E8C\u7EF4\u7801",open:b_,width:500,onCancel:function(){return c_(!1)},footer:null,destroyOnClose:!0,children:(0,r.jsx)("img",{style:{width:"400px",height:"400px"},src:N})}),p_&&(0,r.jsx)(br.Z,{setModalVisible:function(){return ae(!1)},modalVisible:p_,url:Or,type:"studentOrder",propsData:{resourceType:0,parentId:b.studentId},callbackRef:function(){return Xe()},callbackFn:function(s){var _,R;(_=T_.current)===null||_===void 0||(R=_.reloadAndRest)===null||R===void 0||R.call(_)}}),(0,r.jsx)(E.Z,{width:1100,title:"\u56E2\u7EC4\u5B66\u5458\u4FE1\u606F",onCancel:function(){ie(!1)},onOk:ar,open:y,children:(0,r.jsx)(r_.ZP,{toolBarRender:function(){return[(0,r.jsx)(n.Z,{icon:(0,r.jsx)(Pr.Z,{}),type:"primary",onClick:function(){var _="/sms/business/bizOrder/saveStudentAndOrder";gr(_+"?id="+o_),ae(!0)},children:"\u6279\u91CF\u5BFC\u5165\u5B66\u5458"},"buttons"),(0,r.jsx)(n.Z,{type:"primary",onClick:function(){return et()},children:"\u6536\u96C6\u8D44\u6599\u4E8C\u7EF4\u7801"},"buttons")]},columns:[{title:"\u5B66\u5458",dataIndex:"studentName",readonly:!0},{title:"\u73ED\u578B\u5E94\u6536\u91D1\u989D",dataIndex:"receivable",readonly:!0},{title:"\u73ED\u578B\u4EBA\u6570",dataIndex:"quantity",readonly:!0},{title:"\u62A5\u8003\u5C97\u4F4D",search:!1,readonly:!0,render:function(s,_){return(0,r.jsx)("span",{children:_.project&&(0,t.Z)(new Set(_.project.split(","))).map(function(R,h){return(0,r.jsxs)("span",{children:[M.Z.getCascaderName("dict_reg_job",R)," ",(0,r.jsx)("br",{})]},"project-".concat(R,"-").concat(h))})})}},{title:"\u73ED\u7EA7\u7C7B\u578B",dataIndex:"classType",search:!1,readonly:!0,render:function(s,_){return(0,r.jsx)("span",{children:M.Z.getName("dict_class_type",_.classType)})}},{title:"\u73ED\u578B\u5E74\u9650",dataIndex:"classYear",search:!1,readonly:!0,render:function(s,_){return(0,r.jsx)("span",{children:M.Z.getName("dict_class_year",_.classYear)})}},{title:"\u8003\u8BD5\u7C7B\u578B",dataIndex:"examType",readonly:!0,search:!1,render:function(s,_){return(0,r.jsx)("span",{children:M.Z.getName("dict_exam_type",_.examType)})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime",sorter:!0,dataIndex:"createTime",valueType:"dateRange",render:function(s,_){return(0,r.jsx)("span",{children:_.createTime})}}],search:!1,cardBordered:!0,rowKey:"id",actionRef:T_,editable:{type:"multiple",onSave:function(){var d=(0,l.Z)((0,a.Z)().mark(function _(R,h,C){var F;return(0,a.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(F=[{amount:h.amount,id:h.id}],console.log(h),!(h.amount>h.averageReceivable)){I.next=5;break}return u.default.error("\u5206\u914D\u91D1\u989D\u4E0D\u5F97\u5927\u4E8E\u5B9E\u9645\u5E94\u6536\u91D1\u989D"),I.abrupt("return",!1);case 5:ne.Z.postAll("/sms/business/bizOrder/saveArray",{array:F}),setTimeout(function(){},500);case 7:case"end":return I.stop()}},_)}));function s(_,R,h){return d.apply(this,arguments)}return s}()},request:(0,l.Z)((0,a.Z)().mark(function d(){var s,_,R,h,C=arguments;return(0,a.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return s=C.length>0&&C[0]!==void 0?C[0]:{},_=C.length>1?C[1]:void 0,R=C.length>2?C[2]:void 0,s.parentId=o_,B.next=6,ne.Z.get("/sms/business/bizOrder",(0,c.Z)({},s));case 6:return h=B.sent,console.log(h,"-======-"),B.abrupt("return",{data:h.data.content,success:h.success,total:h.data.totalElements});case 9:case"end":return B.stop()}},d)}))})}),Ae&&(0,r.jsx)(dr,{awaylsUseProject:Ke,MenuVisible:Ae,callbackRef:function(){return Xe()},backProject:Ur,setMenuVisible:function(){return He(!1)}}),W&&(0,r.jsx)(vr,{setModalVisible:function(){return z(!1)},modalVisible:W,renderData:b,setID:o_,studentid:Ir,callbackRef:function(){return Xe()},callbackData:function(){return Gr()}})]})}},14500:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var antd_es_modal_style__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(71194),antd_es_modal__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(50146),antd_es_button_style__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(57663),antd_es_button__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(71577),E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(11849),E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(86582),E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2824),E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(39428),antd_es_message_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(34792),antd_es_message__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(48086),E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3182),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(5894),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(59962),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(24739),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(8214),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(64317),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(31199),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(5436),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(5966),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(19054),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(22452),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(90672),_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(80876),_ant_design_pro_card__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(30202),_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(37490),moment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30381),moment__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__),_ant_design_icons__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(68855),_services_ant_design_pro_apiRequest__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63863),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(67294),_pages_Business_ChargeLog__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(81927),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(85893),JobClassExamA=[],quantitys=[0,0,0,0,0,0,0,0,0],comNumbers=[0,0,0,0,0,0,0,0,0],ClassList=(0,react__WEBPACK_IMPORTED_MODULE_6__.forwardRef)(function(props,ref){var renderData=props.renderData,onTotalPriceChange=props.onTotalPriceChange,onTotalQuantityChange=props.onTotalQuantityChange,onAddClassType=props.onAddClassType,onRemoveClassType=props.onRemoveClassType,projectslist=props.projectslist,typeStatus=props.typeStatus;console.log(typeStatus,"typeStatus"),(0,react__WEBPACK_IMPORTED_MODULE_6__.useImperativeHandle)(ref,function(){return{getFormValues:function(){var g=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function e(){var c,v,E;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(c=formRef.current)===null||c===void 0?void 0:c.validateFields();case 3:return v=n.sent,n.abrupt("return",v);case 7:throw n.prev=7,n.t0=n.catch(0),n.t0&&n.t0.errorFields?(E=n.t0.errorFields[0],antd_es_message__WEBPACK_IMPORTED_MODULE_11__.default.error(E.errors[0]||"\u8868\u5355\u9A8C\u8BC1\u5931\u8D25")):antd_es_message__WEBPACK_IMPORTED_MODULE_11__.default.error("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8868\u5355\u586B\u5199\u662F\u5426\u5B8C\u6574"),n.t0;case 11:case"end":return n.stop()}},e,null,[[0,7]])}));function p(){return g.apply(this,arguments)}return p}(),resetForm:function(){var p,e;(p=formRef.current)===null||p===void 0||p.resetFields(),setTotalPrice(0),setDiscountPrice(0),setTotalQuantity(0),setJobClassExam([]);var c=[{project:[],quantity:1,receivable:0,discount:0,discountRemark:"",source:""}];(e=formRef.current)===null||e===void 0||e.setFieldsValue({users:c})}}});var _useState=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(),_useState2=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState,2),userNameId=_useState2[0],setUserNameId=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState4=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState3,2),orderList=_useState4[0],setOrderList=_useState4[1],_useState5=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState6=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState5,2),JobClassExam=_useState6[0],setJobClassExam=_useState6[1],_useState7=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(0),_useState8=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState7,2),totalPrice=_useState8[0],setTotalPrice=_useState8[1],_useState9=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(0),_useState10=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState9,2),discountPrice=_useState10[0],setDiscountPrice=_useState10[1],_useState11=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(0),_useState12=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState11,2),totalQuantity=_useState12[0],setTotalQuantity=_useState12[1],_useState13=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState14=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState13,2),discountRemake=_useState14[0],setDiscountRemake=_useState14[1],_useState15=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState16=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState15,2),chargeType=_useState16[0],setChargeType=_useState16[1],_useState17=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState18=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState17,2),chargeLogVisible=_useState18[0],setChargeLogVisible=_useState18[1],_useState19=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(),_useState20=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState19,2),chargeLog=_useState20[0],setChargeLog=_useState20[1],_useState21=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(),_useState22=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState21,2),chargeLogIndex=_useState22[0],setChargeLogIndex=_useState22[1],_useState23=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(),_useState24=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_12__.Z)(_useState23,2),newProjectslist=_useState24[0],setProjectslist=_useState24[1],tokenName=sessionStorage.getItem("tokenName"),tokenValue=sessionStorage.getItem("tokenValue"),obj={};tokenValue!==null?obj[tokenName]=tokenValue:console.error("Token value is null");var formRef=(0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null),userRef=(0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null),convertToTreeData=function g(p){return!p||!Array.isArray(p)?[]:p.map(function(e){return{key:e.id,value:e.value,label:e.name,children:e.children?g(e.children):[]}})},getProject=function(){var g=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function p(){var e,c,v,E,m,n,i,u;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_services_ant_design_pro_apiRequest__WEBPACK_IMPORTED_MODULE_5__.Z.get("/sms/commonProjects");case 2:e=a.sent,c=localStorage.getItem("dictionariesList"),c&&(v=JSON.parse(c)[1].children,E=_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.extractMatchingItems(v,e.data),E&&(m=_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.findObjectAndRelated(v,renderData.project),n=convertToTreeData([[m.parent][0]]),i=projectslist==null?void 0:projectslist.find(function(l){return JSON.stringify(l)===JSON.stringify(n[0])}),i?setProjectslist(projectslist):(u=[].concat((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(projectslist||[]),[n[0]]),setProjectslist(u))));case 5:case"end":return a.stop()}},p)}));return function(){return g.apply(this,arguments)}}();(0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(function(){getProject()},[projectslist]),(0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(function(){if(console.log(renderData),!renderData){var _formRef$current4;formRef==null||(_formRef$current4=formRef.current)===null||_formRef$current4===void 0||_formRef$current4.setFieldsValue({users:[{project:[],quantity:1,receivable:0,discount:0,discountRemark:""}]});return}renderData.project&&handleChangeProject([renderData.project],0);var list=[],orderList=[renderData];setOrderList(orderList),orderList.forEach(function(){var g=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function p(e,c){var v;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:e.project&&handleChangeProject([e.project],c),quantitys[c]=e.quantity||1,comNumbers[c]=e.receivable||0,v=_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getName("dict_source",e.source),list.push({project:e.project?_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getCascaderValue("dict_reg_job",e.project):[],quantity:e.quantity||1,receivable:e.receivable||0,discount:e.discount||0,source:v,discountRemark:e.discountRemark||"",userId:{value:e.userId},studentUserId:e.id||null});case 5:case"end":return m.stop()}},p)}));return function(p,e){return g.apply(this,arguments)}}()),setTimeout((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function _callee4(){var _formRef$current5,_userRef$current,data;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:formRef==null||(_formRef$current5=formRef.current)===null||_formRef$current5===void 0||_formRef$current5.setFieldsValue((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},renderData),{},{percent:renderData.percent?renderData.percent*100:0,quantity:quantitys.length>0?eval(quantitys.join("+")):1,project:renderData.project?_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getCascaderValue("dict_reg_job",renderData.project):[],users:list,provider:renderData.provider})),renderData.provider&&renderData.providerName&&(data={id:renderData.provider,name:renderData.providerName},userRef==null||(_userRef$current=userRef.current)===null||_userRef$current===void 0||_userRef$current.setDepartment(data),setUserNameId(data));case 2:case"end":return _context4.stop()}},_callee4)})),500)},[renderData]);var filter=function(p,e){return e.some(function(c){return c.label.toLowerCase().indexOf(p.toLowerCase())>-1})},handleChangeProject=function(){var g=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function p(e,c){var v,E,m,n,i;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(formRef==null||(v=formRef.current)===null||v===void 0||v.setFieldsValue({JobClassExam:"",receivable:0}),E=JSON.parse(JSON.stringify(JobClassExam)),!(e&&e.length>0)){t.next=17;break}return t.prev=3,t.next=6,_services_ant_design_pro_apiRequest__WEBPACK_IMPORTED_MODULE_5__.Z.get("/sms/business/bizChargeStandard?project="+e[e.length-1]+"&useNum=0&_size=999&enable=true");case 6:m=t.sent,n=m.data.content,n&&n.length>0?(E[c]=projectClassExamListFn(n),JobClassExamA[c]=projectClassExamListFn(n)):E[c]=null,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error("\u83B7\u53D6\u73ED\u578B\u6570\u636E\u5931\u8D25:",t.t0),E[c]=null;case 15:t.next=18;break;case 17:E[c]=null;case 18:i=renderData||{},setTimeout(function(){try{var a=i.type||"";setJobClassExam(a!=="order"?E:JobClassExamA)}catch(l){console.error("\u8BBE\u7F6E\u73ED\u578B\u6570\u636E\u5931\u8D25:",l),setJobClassExam(E)}},100);case 20:case"end":return t.stop()}},p,null,[[3,11]])}));return function(e,c){return g.apply(this,arguments)}}();function projectClassExamListFn(g){var p=[];return g.forEach(function(e){p.push({label:_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getName("dict_class_type",e.classType)+"/"+_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getName("dict_exam_type",e.examType)+"/"+_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getName("dict_class_year",e.classYear),value:JSON.stringify({classType:e.classType,examType:e.examType,classYear:e.classYear,receivable:e.receivable,project:e.project})})}),p}var getDepartment=function(){var g=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function p(){var e,c,v;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return e=function n(i){var u=[];return i.forEach(function(t,a){var l=[];t.children&&(l=n(t.children));var o="",D=!1,j={};t.departmentName?(o=t.departmentName,j.id=t.id,D=!0):t.enable&&(o=t.name,j.userId=t.userId,D=!0),D&&(l.length>0?u.push((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},j),{},{title:o,parentId:t.parentId,children:l})):u.push((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},j),{},{title:o,parentId:t.parentId})))}),u},c=function n(i,u){i.forEach(function(t,a){t.value=t.userId,t.value||(t.value=u+"-"+a),t.children&&n(t.children,t.value)})},v=e(JSON.parse(localStorage.getItem("Department"))),c(v,0),m.abrupt("return",v.reverse());case 5:case"end":return m.stop()}},p)}));return function(){return g.apply(this,arguments)}}();(0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(function(){if(chargeLog){var g,p;setChargeLogVisible(!1);var e=(formRef==null||(g=formRef.current)===null||g===void 0?void 0:g.getFieldValue("users"))||[],c=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(e);Array.isArray(chargeLog)&&chargeLog.forEach(function(v){c[chargeLogIndex]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},c[chargeLogIndex]),{},{chargeLogIds:chargeLog[0].id,amount:chargeLog[0].amount,chargeLogName:chargeLog.map(function(E){return E.name}).join("\u3001")+"\u7684\u6536\u6B3E\u8BB0\u5F55",paymentTime:chargeLog[0].paymentTime,userId:{value:chargeLog[0].userId},method:chargeLog[0].method+"",surplus:e[chargeLogIndex].receivable-chargeLog[0].amount})}),formRef==null||(p=formRef.current)===null||p===void 0||p.setFieldsValue({users:c})}},[chargeLog]);var handlejisuan=function(){var p,e=(formRef==null||(p=formRef.current)===null||p===void 0?void 0:p.getFieldValue("users"))||[],c=0;e.forEach(function(v){var E=JSON.parse(v.JobClassExam);c+=E.receivable*v.quantity-v.discount}),onTotalPriceChange==null||onTotalPriceChange(c),console.log(c,"totalReceivable------totalReceivable")};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_15__.A,{formRef,submitter:!1,onFinish:function(){var g=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function p(e){return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",console.log(e));case 1:case"end":return v.stop()}},p)}));return function(p){return g.apply(this,arguments)}}(),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_16__.u,{name:"users",creatorButtonProps:{creatorButtonText:"\u65B0\u589E\u4E00\u6761\u73ED\u578B\u4FE1\u606F"},creatorRecord:function(){var p,e,c,v={project:renderData!=null&&renderData.project?_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getCascaderValue("dict_reg_job",renderData.project):[],quantity:1,provider:{value:(p=renderData==null?void 0:renderData.provider)!==null&&p!==void 0?p:null},userId:(e=renderData==null?void 0:renderData.userId)!==null&&e!==void 0?e:null,receivable:0,studentUserId:(c=renderData==null?void 0:renderData.id)!==null&&c!==void 0?c:null,discount:0,discountRemark:"",JobClassExam:null};return renderData?v:(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},v),{},{project:[],source:"",provider:{value:null},studentUserId:null})},actionGuard:{beforeAddRow:function(){var g=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function e(c,v){var E,m,n,i,u,t,a,l;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,n=(renderData==null?void 0:renderData.project)||[],D.next=4,handleChangeProject(Array.isArray(n)?n:[n],v);case 4:return i=(formRef==null||(E=formRef.current)===null||E===void 0?void 0:E.getFieldValue("users"))||[],u=i.reduce(function(j,T){return j+(Number(T.discount)||0)},0),t=i.reduce(function(j,T){return j+(Number(T.quantity)||0)},0),a=i.reduce(function(j,T){return j+(Number(T.receivable)||0)-(Number(T.discount)||0)},0)+c.receivable-c.discount,l=c.receivable*(t+c.quantity)-(u+c.discount),setDiscountPrice(u),setTotalPrice(a),setTotalQuantity(t),onTotalPriceChange==null||onTotalPriceChange(l),onTotalQuantityChange==null||onTotalQuantityChange(t),formRef==null||(m=formRef.current)===null||m===void 0||m.setFieldsValue({receivable:a,quantity:t}),D.abrupt("return",!0);case 18:return D.prev=18,D.t0=D.catch(0),console.error("\u6DFB\u52A0\u884C\u65F6\u5904\u7406\u9879\u76EE\u5931\u8D25:",D.t0),D.abrupt("return",!1);case 22:case"end":return D.stop()}},e,null,[[0,18]])}));function p(e,c){return g.apply(this,arguments)}return p}(),beforeRemoveRow:function(){var g=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function e(c){return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",new Promise(function(m){var n;if(c===0){antd_es_message__WEBPACK_IMPORTED_MODULE_11__.default.error("\u8FD9\u884C\u4E0D\u80FD\u5220"),m(!1);return}var i=(formRef==null||(n=formRef.current)===null||n===void 0?void 0:n.getFieldValue("users"))||[],u=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(i);u.splice(c,1);var t=u.reduce(function(D,j){return D+(Number(j.receivable)||0)},0),a=u.reduce(function(D,j){return D+(Number(j.quantity)||0)},0),l=u.reduce(function(D,j){return D+(Number(j.discount)||0)},0),o=(t-l)*a;onTotalPriceChange==null||onTotalPriceChange(o),setTotalPrice(t),setTotalQuantity(a),setDiscountPrice(l),onTotalQuantityChange==null||onTotalQuantityChange(a),setTimeout(function(){var D;formRef==null||(D=formRef.current)===null||D===void 0||D.setFieldsValue({receivable:t,quantity:a}),m(!0)},100)}));case 1:case"end":return E.stop()}},e)}));function p(e){return g.apply(this,arguments)}return p}()},itemRender:function(p,e){var c=p.listDom,v=p.action,E=e.record,m=e.index;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_ant_design_pro_card__WEBPACK_IMPORTED_MODULE_17__.ZP,{bordered:!0,title:"\u62A5\u8003\u73ED\u578B",extra:v,style:{width:"1000px",margin:"0 auto",marginBlockEnd:8},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_18__.UW,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_15__.A.Group,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_19__.Z,{width:"sm",name:"project",placeholder:"\u54A8\u8BE2\u62A5\u8003\u5C97\u4F4D",label:"\u62A5\u8003\u5C97\u4F4D",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u62A5\u8003\u5C97\u4F4D"}],fieldProps:{options:newProjectslist,showSearch:{filter},onChange:function(i){handleChangeProject(i,m)}}}),JobClassExam[m]?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_20__.Z,{label:"\u73ED\u578B\u9009\u62E9",name:"JobClassExam",fieldProps:{options:JobClassExam[m],showSearch:!0,onSelect:function(i){handlejisuan();var u=JSON.parse(i);try{var t,a,l=JSON.parse(i);if(!l||typeof l!="object")throw new Error("Invalid data format");var o=(formRef==null||(t=formRef.current)===null||t===void 0?void 0:t.getFieldValue("users"))||[];if(!Array.isArray(o))throw new Error("Users data is not an array");var D=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(o);D[m]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},D[m]),{},{receivable:l.receivable||0}),formRef==null||(a=formRef.current)===null||a===void 0||a.setFieldsValue({users:D}),console.log(u.receivable,"newE=====>")}catch(j){antd_es_message__WEBPACK_IMPORTED_MODULE_11__.default.error("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}}},width:"sm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u73ED\u578B\u9009\u62E9"}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(antd_es_button__WEBPACK_IMPORTED_MODULE_21__.Z,{style:{marginTop:"30px",marginLeft:"-30px"},type:"primary",onClick:(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function n(){var i;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=JSON.parse(JSON.stringify(JobClassExam)),i[m]=!1,setJobClassExam(i);case 3:case"end":return t.stop()}},n)})),children:"\u53D6\u6D88"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_22__.Z,{name:"quantity",width:"sm",label:"\u62A5\u540D\u4EBA\u6570",fieldProps:{onChange:function(i){handlejisuan()}},rules:[{required:!0,message:"\u8BF7\u586B\u5199\u62A5\u540D\u4EBA\u6570"}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_22__.Z,{name:"receivable",label:"\u6536\u8D39\u6807\u51C6",width:"sm",disabled:JobClassExam[m],fieldProps:{onChange:function(i){}},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u91D1\u989D"}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_23__.Z,{name:"discount",label:"\u8BA2\u5355\u4F18\u60E0\u91D1\u989D",width:"sm",customSymbol:"\xA5",fieldProps:{onChange:function(i){handlejisuan();var u=Number(i)!==0;setDiscountRemake(u)}},rules:[{required:!0}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_24__.Z,{name:"discountRemark",label:"\u8BA2\u5355\u4F18\u60E0\u539F\u56E0",width:"sm",fieldProps:{autoComplete:"no"},rules:[{required:discountRemake,message:"\u8BF7\u586B\u5199\u672C\u6B21\u6298\u6263\u539F\u56E0"}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_24__.Z,{name:"studentUserId",hidden:!0,label:"\u9690\u85CF\u8D4B\u503C",width:"sm",fieldProps:{autoComplete:"no"},rules:[]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_25__.Z,{name:"provider",label:"\u4FE1\u606F\u63D0\u4F9B\u4EBA",placeholder:"\u8BF7\u8F93\u5165\u4FE1\u606F\u63D0\u4F9B\u4EBA",allowClear:!0,hidden:!0,width:"sm",secondary:!0,request:function(){return getDepartment()},required:!0,fieldProps:{treeDefaultExpandAll:!0,filterTreeNode:!0,showSearch:!0,dropdownMatchSelectWidth:!1,labelInValue:!0,treeNodeFilterProp:"title",fieldNames:{label:"title"}}})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{style:{display:"inline-block",marginTop:"32px"},children:"\u8BE5\u9879\u76EE\u5C1A\u672A\u8BBE\u7F6E\u6536\u8D39\u6807\u51C6,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u8BBE\u7F6E!"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{style:{fontSize:"16px",fontWeight:"500",color:"rgba(0, 0, 0, 0.85)",marginBottom:"20px"},children:"\u652F\u4ED8\u65B9\u5F0F"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_15__.A.Group,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_20__.Z,{label:"\u7F34\u8D39\u7C7B\u578B",name:"type",width:"sm",request:(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function n(){var i;return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(i=_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getList("chargeType"))===null||i===void 0?void 0:i.filter(function(a){return["0","4","5","6"].indexOf(a.value)!=-1}));case 1:case"end":return t.stop()}},n)})),fieldProps:{onChange:function(i,u){var t=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(chargeType);t[m]=i,setChargeType(t)}},required:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_24__.Z,{label:"chargeLogIds",name:"chargeLogIds",width:"sm",hidden:!0}),chargeType[m]==="6"?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_24__.Z,{label:"\u6536\u6B3E\u8BB0\u5F55",name:"chargeLogName",width:"sm",rules:[{required:!0}],fieldProps:{onClick:function(){return setChargeLogIndex(m),setChargeLog(null),setChargeLogVisible(!0),!1}}})}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_20__.Z,{label:"\u4ED8\u6B3E\u65B9\u5F0F",name:"method",width:"sm",request:(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function n(){return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",_services_util_dictionaries__WEBPACK_IMPORTED_MODULE_3__.Z.getList("dict_stu_refund_type"));case 1:case"end":return u.stop()}},n)})),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED8\u6B3E\u65B9\u5F0F"}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_20__.Z,{label:"\u4ED8\u6B3E\u65B9\u5F0F",name:"departmentId",width:"sm",hidden:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_25__.Z,{name:"userId",label:"\u6536\u8D39\u4EBA",placeholder:"\u8BF7\u8F93\u5165\u6536\u8D39\u4EBA",allowClear:!0,width:"sm",secondary:!0,request:function(){return getDepartment()},required:!0,fieldProps:{treeDefaultExpandAll:!0,filterTreeNode:!0,showSearch:!0,dropdownMatchSelectWidth:!1,labelInValue:!0,treeNodeFilterProp:"title",fieldNames:{label:"title"}}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_26__.Z,{name:"chargeTime",width:"sm",label:"\u6536\u8D39\u65E5\u671F",initialValue:moment__WEBPACK_IMPORTED_MODULE_4___default()().format("YYYY-MM-DD HH:mm:ss"),fieldProps:{onChange:function(i){var u,t,a=(formRef==null||(u=formRef.current)===null||u===void 0?void 0:u.getFieldValue("users"))||[],l=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(a);l[m]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},l[m]),{},{chargeTime:moment__WEBPACK_IMPORTED_MODULE_4___default()(i).format("YYYY-MM-DD HH:mm:ss")}),formRef==null||(t=formRef.current)===null||t===void 0||t.setFieldsValue({users:l})},format:"YYYY-MM-DD HH:mm:ss"},rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6536\u8D39\u65E5\u671F"}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_26__.Z,{name:"paymentTime",label:"\u5B9E\u9645\u5230\u8D26\u65E5\u671F",fieldProps:{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",onChange:function(i){if(i){var u,t,a=(formRef==null||(u=formRef.current)===null||u===void 0?void 0:u.getFieldValue("users"))||[],l=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(a);l[m]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},l[m]),{},{paymentTime:moment__WEBPACK_IMPORTED_MODULE_4___default()(i).format("YYYY-MM-DD HH:mm:ss")}),formRef==null||(t=formRef.current)===null||t===void 0||t.setFieldsValue({users:l})}}},width:"sm",disabled:chargeType[m]=="4"||chargeType[m]=="6",rules:[{required:["4","6"].indexOf(chargeType[m])==-1,message:"\u8BF7\u586B\u5199\u7F34\u8D39\u65E5\u671F"}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_26__.Z,{name:"nextPaymentTime",width:"sm",label:"\u4E0B\u6B21\u7F34\u8D39\u65F6\u95F4",fieldProps:{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:function(i){if(i){var u,t,a=(formRef==null||(u=formRef.current)===null||u===void 0?void 0:u.getFieldValue("users"))||[],l=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(a);l[m]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},l[m]),{},{nextPaymentTime:moment__WEBPACK_IMPORTED_MODULE_4___default()(i).format("YYYY-MM-DD HH:mm:ss")}),formRef==null||(t=formRef.current)===null||t===void 0||t.setFieldsValue({users:l})}}}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_23__.Z,{label:"\u672C\u6B21\u6536\u8D39\u91D1\u989D",name:"amount",width:"sm",customSymbol:"\xA5",fieldProps:{onChange:function(i){var u,t=(formRef==null||(u=formRef.current)===null||u===void 0?void 0:u.getFieldValue("users"))||[],a=Number(i)||0,l=t[m].receivable||0,o=t[m].quantity||0,D=l*o,j=D-a,T=a-t[m].collectedAmount;if(isNaN(T)){var O,S=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(t);S[m]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},S[m]),{},{surplus:j,performanceAmount:0,commissionBase:0}),formRef==null||(O=formRef.current)===null||O===void 0||O.setFieldsValue({users:S})}else{var L,ee=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(t);ee[m]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},ee[m]),{},{surplus:j,performanceAmount:T,commissionBase:T}),formRef==null||(L=formRef.current)===null||L===void 0||L.setFieldsValue({users:ee})}}},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6536\u8D39\u91D1\u989D"},{type:"number",min:0,message:"\u91D1\u989D\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E0"},{validator:function(){var n=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function u(t,a){return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(a&&a>999999999)){o.next=2;break}throw new Error("\u91D1\u989D\u4E0D\u80FD\u8D85\u8FC79\u4F4D\u6570");case 2:return o.abrupt("return",Promise.resolve());case 3:case"end":return o.stop()}},u)}));function i(u,t){return n.apply(this,arguments)}return i}()}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_23__.Z,{tooltip:"\u8FD4\u4EE3\u7406\u8D39\u3001\u5FEB\u9012\u8D39\u3001\u7A0E\u8D39\uFF0C\u4E0D\u5305\u542B\u5728\u6536\u8D39\u6807\u51C6\u91CC\u7684\u62A5\u540D\u8D39\u7B49",label:"\u4EE3\u6536\u6B3E\u9879",name:"collectedAmount",width:"sm",customSymbol:"\xA5",min:0,fieldProps:{onChange:function(i){var u,t=(formRef==null||(u=formRef.current)===null||u===void 0?void 0:u.getFieldValue("users"))||[],a=Number(i)||0,l=t[m].amount,o=l-a;if(a>l)antd_es_modal__WEBPACK_IMPORTED_MODULE_27__.Z.info({title:"\u6CE8\u610F\uFF01\u5F53\u524D\u4EE3\u6536\u6B3E\u9879\u91D1\u989D\u5927\u4E8E\u6536\u8D39\u91D1\u989D\uFF01",icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_28__.Z,{}),onOk:function(){var O,S=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(t);S[m]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},S[m]),{},{performanceAmount:0,commissionBase:0,collectedAmount:""}),formRef==null||(O=formRef.current)===null||O===void 0||O.setFieldsValue({users:S})}});else{var D,j=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_13__.Z)(t);j[m]=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},j[m]),{},{performanceAmount:o,commissionBase:o}),formRef==null||(D=formRef.current)===null||D===void 0||D.setFieldsValue({users:j})}}},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE3\u6536\u6B3E\u9879\u91D1\u989D"},{type:"number",min:0,message:"\u91D1\u989D\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E0"},{validator:function(){var n=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function u(t,a){return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(a&&a>999999999)){o.next=2;break}throw new Error("\u91D1\u989D\u4E0D\u80FD\u8D85\u8FC79\u4F4D\u6570");case 2:return o.abrupt("return",Promise.resolve());case 3:case"end":return o.stop()}},u)}));function i(u,t){return n.apply(this,arguments)}return i}()}]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_22__.Z,{label:"\u4E1A\u7EE9\u91D1\u989D\uFF08+\uFF09",readonly:!0,name:"performanceAmount",width:"sm"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_22__.Z,{label:"\u63D0\u6210\u57FA\u6570\uFF08+\uFF09",readonly:!0,name:"commissionBase",width:"sm"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_24__.Z,{label:"\u672C\u6B21\u6536\u8D39\u540E\u5269\u4F59\u5C3E\u6B3E",name:"surplus",readonly:!0})]})]},"class-type-".concat(m)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_29__.Z,{width:1100,label:"\u5907\u6CE8",name:"description"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_ant_design_pro_form__WEBPACK_IMPORTED_MODULE_30__.Z,{width:950,label:"\u4E0A\u4F20\u9644\u4EF6",name:"files",action:"/sms/business/bizNotice/upload",fieldProps:{multiple:!0,headers:(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_14__.Z)({},obj),listType:"picture",onRemove:function(i){},beforeUpload:function(i){console.log("file",i)},onPreview:function(){var n=(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_9__.Z)((0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().mark(function u(t){return(0,E_project_2025_3_huide_wxq_crm_ui_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_10__.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:console.log("file",t),!t.url&&!t.preview&&console.log("1");case 2:case"end":return l.stop()}},u)}));function i(u){return n.apply(this,arguments)}return i}(),onChange:function(i){var u=i.file.status;u==="done"?antd_es_message__WEBPACK_IMPORTED_MODULE_11__.default.success("".concat(i.file.name," \u4E0A\u4F20\u6210\u529F.")):u==="error"&&antd_es_message__WEBPACK_IMPORTED_MODULE_11__.default.error("".concat(i.file.name," \u4E0A\u4F20\u5931\u8D25."))}}})]})})}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(antd_es_modal__WEBPACK_IMPORTED_MODULE_27__.Z,{title:"\u9009\u62E9\u6536\u6B3E\u8BB0\u5F55",width:1200,open:chargeLogVisible,onCancel:function(){return setChargeLogVisible(!1)},footer:null,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_pages_Business_ChargeLog__WEBPACK_IMPORTED_MODULE_7__.default,{select:setChargeLog,type:1,Orderpage:!0})})]})});__webpack_exports__.Z=ClassList}}]);
