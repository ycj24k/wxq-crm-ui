(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9504],{45510:function(re,R,e){"use strict";e.d(R,{Z:function(){return Y}});var i=e(28991),d=e(81253),P=e(85893),s=e(67294),M=e(66758),u=e(53048),g=["proFieldProps","fieldProps"],_="date",t=s.forwardRef(function(a,l){var f=a.proFieldProps,m=a.fieldProps,E=(0,d.Z)(a,g),v=(0,s.useContext)(M.Z);return(0,P.jsx)(u.Z,(0,i.Z)({ref:l,valueType:_,fieldProps:(0,i.Z)({getPopupContainer:v.getPopupContainer},m),proFieldProps:f,filedConfig:{valueType:_,customLightMode:!0}},E))}),F=t,j=["proFieldProps","fieldProps"],D="dateMonth",L=s.forwardRef(function(a,l){var f=a.proFieldProps,m=a.fieldProps,E=(0,d.Z)(a,j),v=(0,s.useContext)(M.Z);return(0,P.jsx)(u.Z,(0,i.Z)({ref:l,valueType:D,fieldProps:(0,i.Z)({getPopupContainer:v.getPopupContainer},m),proFieldProps:f,filedConfig:{valueType:D,customLightMode:!0}},E))}),c=L,n=["fieldProps"],U="dateQuarter",S=s.forwardRef(function(a,l){var f=a.fieldProps,m=(0,d.Z)(a,n),E=(0,s.useContext)(M.Z);return(0,P.jsx)(u.Z,(0,i.Z)({ref:l,valueType:U,fieldProps:(0,i.Z)({getPopupContainer:E.getPopupContainer},f),filedConfig:{valueType:U,customLightMode:!0}},m))}),w=S,N=["proFieldProps","fieldProps"],z="dateWeek",H=s.forwardRef(function(a,l){var f=a.proFieldProps,m=a.fieldProps,E=(0,d.Z)(a,N),v=(0,s.useContext)(M.Z);return(0,P.jsx)(u.Z,(0,i.Z)({ref:l,valueType:z,fieldProps:(0,i.Z)({getPopupContainer:v.getPopupContainer},m),proFieldProps:f,filedConfig:{valueType:z,customLightMode:!0}},E))}),J=H,G=["proFieldProps","fieldProps"],$="dateYear",X=s.forwardRef(function(a,l){var f=a.proFieldProps,m=a.fieldProps,E=(0,d.Z)(a,G),v=(0,s.useContext)(M.Z);return(0,P.jsx)(u.Z,(0,i.Z)({ref:l,valueType:$,fieldProps:(0,i.Z)({getPopupContainer:v.getPopupContainer},m),proFieldProps:f,filedConfig:{valueType:$,customLightMode:!0}},E))}),r=X,O=F;O.Week=J,O.Month=c,O.Quarter=w,O.Year=r,O.displayName="ProFormComponent";var Y=O},5436:function(re,R,e){"use strict";var i=e(28991),d=e(81253),P=e(85893),s=e(67294),M=e(53048),u=["fieldProps","proFieldProps","locale","min","max"],g=function(t,F){var j=t.fieldProps,D=t.proFieldProps,L=t.locale,c=t.min,n=t.max,U=(0,d.Z)(t,u);return(0,P.jsx)(M.Z,(0,i.Z)({valueType:{type:"money",locale:L},fieldProps:(0,i.Z)({min:c,max:n},j),ref:F,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:D},U))};R.Z=s.forwardRef(g)},22:function(re,R,e){"use strict";var i=e(39428),d=e(11849),P=e(3182),s=e(2824),M=e(66801),u=e(63863),g=e(67294),_=e(85893);R.Z=function(t){var F=t.columns,j=t.actionRef,D=t.formRef,L=t.cardBordered,c=L===void 0?!0:L,n=t.scroll,U=n===void 0?!1:n,S=t.request,w=t.beforeSearchSubmit,N=t.toolbar,z=N===void 0?void 0:N,H=t.pagesizes,J=H===void 0?10:H,G=t.rowKey,$=G===void 0?"id":G,X=t.toolBarRender,r=X===void 0?[]:X,O=t.dateFormatter,Y=O===void 0?"string":O,a=t.rowSelection,l=a===void 0?!1:a,f=t.expandable,m=f===void 0?void 0:f,E=t.tableAlertOptionRender,v=E===void 0?void 0:E,y=t.onRow,p=t.params,x=p===void 0?"":p,C=t.dataSource,k=C===void 0?void 0:C,A=t.tableStyle,V=A===void 0?void 0:A,ae=t.footer,se=ae===void 0?void 0:ae,W=t.onReset,T=W===void 0?void 0:W,B=t.onSubmit,I=B===void 0?void 0:B,te=t.onFn,K=te===void 0?void 0:te,b=t.getTotalElements,h=b===void 0?void 0:b,q=t.getData,ne=q===void 0?void 0:q,le=t.loding,_e=le===void 0?void 0:le,me=t.search,Ze=me===void 0?void 0:me,Pe=t.searchData,je=Pe===void 0?{}:Pe,Me=t.headerTitle,pe=t.editable,Ce=pe===void 0?void 0:pe,Ee=t.className,he=Ee===void 0?"tables":Ee,ge=t.rowClassName,Re=ge===void 0?void 0:ge,De=!1;S&&(De=S.sortList);var ee={_orderBy:"",_direction:""},Oe=(0,g.useState)(J),xe=(0,s.Z)(Oe,2),Te=xe[0],Fe=xe[1],Se=(0,g.useState)({}),be=(0,s.Z)(Se,2),Be=be[0],ye=be[1];return(0,_.jsx)(M.ZP,{columns:F,className:he,actionRef:j,formRef:D,cardBordered:c,scroll:U,headerTitle:Me,tableStyle:V,dataSource:k,rowClassName:Re,request:function(){var ce=(0,P.Z)((0,i.Z)().mark(function ve(Q,de,Ae){var ue,Z,oe;return(0,i.Z)().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return Object.keys(Q).forEach(function(o){(Q[o]=="null"||Q[o]==null)&&(Q["".concat(o,"-isNull")]=!0,delete Q[o])}),Object.keys(de).length>0?Object.keys(de).forEach(function(o){var fe;ee._orderBy=o,((fe=de[o])===null||fe===void 0?void 0:fe.indexOf("desc"))==0?ee._direction="desc":ee._direction="asc"}):De?Object.keys(S.sortList).forEach(function(o){ee._orderBy=o,ee._direction=S.sortList[o]}):ee={_orderBy:"",_direction:""},ue=Q,Object.keys(ue).forEach(function(o){ue[o]===""&&delete ue[o]}),Z=(0,d.Z)((0,d.Z)((0,d.Z)((0,d.Z)({},Ae),S.params),ue),je),Object.keys(Z).forEach(function(o){(Z[o]==""||Z[o]==[""]||Z[o]=="-isNull")&&Z[o]!==0&&Z[o]!==!1&&(Z["".concat(o)+"-isNull"]=!0,delete Z[o]),Z[o]===null&&delete Z[o],Z[o]=="All"&&delete Z[o]}),ee._orderBy!==""&&Object.assign(Z,ee),ye(Z),ie.next=10,u.Z.get(S.url,(0,d.Z)({},Z));case 10:return oe=ie.sent,K&&K(oe.data.content),ne&&ne(Z),_e&&_e(!1),h&&h(oe.data.totalElements),ie.abrupt("return",{data:oe.data.content,success:oe.success,total:oe.data.totalElements});case 16:case"end":return ie.stop()}},ve)}));return function(ve,Q,de){return ce.apply(this,arguments)}}(),rowKey:$,pagination:{pageSize:Te,showSizeChanger:!0,onChange:function(ve,Q){Fe(Q)}},toolBarRender:function(){return r},rowSelection:l,params:x,expandable:m,dateFormatter:Y,tableAlertOptionRender:v,toolbar:z,onRow:y,beforeSearchSubmit:w,onReset:T,onSubmit:I,search:Ze,editable:Ce,footer:se,columnsState:{persistenceKey:he,persistenceType:"localStorage"}})}},6821:function(re,R,e){"use strict";var i=e(39428),d=e(3182),P=e(43185),s=e(43027),M=e(34792),u=e(48086),g=e(11849),_=e(2824),t=e(80876),F=e(28975),j=e(67294),D=e(61261),L=e(41574),c=e(85893);R.Z=function(n){var U=n.width,S=n.action,w=n.name,N=n.fieldProps,z=N===void 0?{}:N,H=n.label,J=n.rules,G=n.renderData,$=n.fileUrl,X=(0,j.useState)(!1),r=(0,_.Z)(X,2),O=r[0],Y=r[1],a=(0,j.useState)(),l=(0,_.Z)(a,2),f=l[0],m=l[1],E=(0,j.useState)(),v=(0,_.Z)(E,2),y=v[0],p=v[1],x=(0,j.useState)(!1),C=(0,_.Z)(x,2),k=C[0],A=C[1],V=sessionStorage.getItem("tokenName"),ae=sessionStorage.getItem("tokenValue"),se={};return se[V]=ae,(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.Z,{width:U,action:S,name:w,label:H,fieldProps:(0,g.Z)((0,g.Z)({},z),{},{multiple:!0,listType:"picture",headers:(0,g.Z)({},se),defaultFileList:[],beforeUpload:function(T){if(T.size>4096e4)return u.default.error("\u4E0A\u6B21\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC740M"),s.Z.LIST_IGNORE},onPreview:function(){var W=(0,d.Z)((0,i.Z)().mark(function B(I){var te;return(0,i.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:console.log("file",I),I.thumbUrl?(m(I.thumbUrl),Y(!0)):(te=I.name.slice(I.name.indexOf(".")),te==".pdf"?(0,D.Z)(G.id,I.name,$,p,A):(0,D.Z)(G.id,I.name,$,m,Y));case 2:case"end":return b.stop()}},B)}));function T(B){return W.apply(this,arguments)}return T}(),onChange:function(T){var B=T.file.status;console.log("info",T),B==="done"?u.default.success("".concat(T.file.name," \u4E0A\u4F20\u6210\u529F.")):B==="error"&&u.default.error("".concat(T.file.name," \u4E0A\u4F20\u5931\u8D25."))}}),rules:J}),O&&(0,c.jsx)(F.Z,{imgSrc:f,isModalVisibles:O,setisModalVisibles:function(T){return Y(T)}}),(0,c.jsx)(L.Z,{previewVisible:k,setPreviewVisible:function(){return A(!1)},previewImage:y})]})}},49531:function(re,R,e){"use strict";e.r(R),e.d(R,{default:function(){return Y}});var i=e(57663),d=e(71577),P=e(62350),s=e(24565),M=e(34792),u=e(48086),g=e(49111),_=e(19650),t=e(2824),F=e(22),j=e(63863),D=e(28975),L=e(61261),c=e(51042),n=e(67294),U=e(39428),S=e(3182),w=e(11849),N=e(6821),z=e(952),H=e(37476),J=e(5966),G=e(5436),$=e(45510),X=e(90672),r=e(85893),O=function(a){var l=a.renderData,f=a.visible,m=a.setVisible,E=a.callbackRef,v=(0,n.useRef)();return(0,n.useEffect)(function(){if(f){var y;console.log(v),console.log(l);var p=(0,w.Z)({},l);if(p.file&&typeof l.file=="string"){var x=[];p.file.split(",").forEach(function(C,k){x.push({uid:k+1,name:C,response:{data:C}})}),p.file=x}(y=v.current)===null||y===void 0||y.setFieldsValue(p)}},[f]),(0,r.jsxs)(H.Y,{title:"\u670D\u52A1\u534F\u8BAE",visible:f,formRef:v,modalProps:{onCancel:function(){var p;(p=v.current)===null||p===void 0||p.resetFields(),m(!1)}},onFinish:function(){var y=(0,S.Z)((0,U.Z)().mark(function p(x){var C;return(0,U.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:x.file&&(C=[],x.file.forEach(function(V){C.push(V.response.data)}),x.file=C.join(",")),console.log(x),x=(0,w.Z)((0,w.Z)({},l),x),console.log(x),j.Z.post("/sms/business/bizAgreement",x).then(function(V){V.status=="success"?(u.default.success("\u64CD\u4F5C\u6210\u529F"),m(!1),E()):u.default.error(V.msg)});case 5:case"end":return A.stop()}},p)}));return function(p){return y.apply(this,arguments)}}(),children:[(0,r.jsxs)(z.ZP.Group,{children:[(0,r.jsx)(J.Z,{rules:[{required:!0}],width:"xs",name:"personName",label:"\u8001\u5E08"}),(0,r.jsx)(J.Z,{rules:[{required:!0}],width:"sm",name:"project",label:"\u9879\u76EE"}),(0,r.jsx)(G.Z,{rules:[{required:!0}],width:"sm",name:"amount",label:"\u91D1\u989D"})]}),(0,r.jsxs)(z.ZP.Group,{children:[(0,r.jsx)($.Z,{rules:[{required:!0}],width:"sm",name:"startDate",label:"\u670D\u52A1\u5F00\u59CB\u65F6\u95F4"}),(0,r.jsx)($.Z,{rules:[{required:!0}],width:"sm",name:"endDate",label:"\u670D\u52A1\u7ED3\u675F\u65F6\u95F4"})]}),(0,r.jsx)(X.Z,{name:"remark",label:"\u5907\u6CE8"}),(0,r.jsx)(N.Z,{rules:[{required:!0}],label:"\u534F\u8BAE\u6587\u4EF6",name:"file",action:"/sms/business/bizAgreement/upload",renderData:l,fileUrl:"/sms/business/bizAgreement/download"})]})},Y=function(){var a=(0,n.useRef)(),l=function(){var b;return(b=a.current)===null||b===void 0?void 0:b.reload()},f=(0,n.useState)(!1),m=(0,t.Z)(f,2),E=m[0],v=m[1],y=(0,n.useState)({}),p=(0,t.Z)(y,2),x=p[0],C=p[1],k=(0,n.useState)(),A=(0,t.Z)(k,2),V=A[0],ae=A[1],se=(0,n.useState)(!1),W=(0,t.Z)(se,2),T=W[0],B=W[1],I="/sms/business/bizAgreement",te=[{title:"\u8001\u5E08",dataIndex:"personName"},{title:"\u9879\u76EE",dataIndex:"project"},{title:"\u91D1\u989D",dataIndex:"amount",valueType:"money",sorter:!0},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"startDate",valueType:"dateRange",sorter:!0,render:function(b,h){return(0,r.jsx)("span",{children:h.startDate},"startDate-".concat(h.id))}},{title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"endDate",valueType:"dateRange",sorter:!0,render:function(b,h){return(0,r.jsx)("span",{children:h.endDate},"endDate-".concat(h.id))}},{title:"\u5907\u6CE8",dataIndex:"remark",valueType:"textarea"},{title:"\u534F\u8BAE\u6587\u4EF6",dataIndex:"file",search:!1,render:function(b,h){var q;return(0,r.jsx)(_.Z,{children:(q=h.file)===null||q===void 0?void 0:q.split(",").map(function(ne,le){return(0,r.jsxs)("a",{onClick:function(){(0,L.Z)(h.id,ne,"/sms/business/bizAgreement/download",ae,B)},children:["\u534F\u8BAE\u6587\u4EF6",le==0?"":le+1]})})})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateRange",sorter:!0,render:function(b,h){return(0,r.jsx)("span",{children:h.createTime},"createTime-".concat(h.id))}},{title:"\u64CD\u4F5C",search:!1,render:function(b,h){return[(0,r.jsxs)(_.Z,{children:[(0,r.jsx)("a",{onClick:function(){C(h),v(!0)},children:"\u7F16\u8F91"}),(0,r.jsx)(s.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:function(){j.Z.delete(I,{id:h.id}).then(function(ne){ne.status=="success"&&(u.default.success("\u5220\u9664\u6210\u529F"),l())})},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})},h.id)]})]}}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.Z,{columns:te,actionRef:a,request:{url:I},toolBarRender:[(0,r.jsx)(d.Z,{icon:(0,r.jsx)(c.Z,{}),type:"primary",onClick:function(){C({}),v(!0)},children:"\u65B0\u589E\u670D\u52A1\u534F\u8BAE"})]}),(0,r.jsx)(O,{renderData:x,visible:E,setVisible:v,callbackRef:l}),(0,r.jsx)(D.Z,{imgSrc:V,isModalVisibles:T,setisModalVisibles:function(b){return B(b)}})]})}},28975:function(re,R,e){"use strict";var i=e(12968),d=e(20352),P=e(85893);R.Z=function(s){var M=s.isModalVisibles,u=s.imgSrc,g=s.setisModalVisibles;return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{style:{display:"none"},children:(0,P.jsx)(d.Z,{width:200,style:{display:"none"},preview:{visible:M,src:u,onVisibleChange:function(t){g(t)}}})})})}},61261:function(re,R,e){"use strict";var i=e(39428),d=e(3182),P=e(68503),s=function(){var M=(0,d.Z)((0,i.Z)().mark(function u(g,_,t,F,j){var D;return(0,i.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(D=_.slice(_.indexOf(".")),!(D!=".png"&&D!=".jpg"&&D!=".jpeg"&&D!=".pdf")){c.next=6;break}return c.next=4,(0,P.Z)(t,g,_,_);case 4:c.next=8;break;case 6:return c.next=8,(0,P.Z)(t,g,_).then(function(n){F(n),j(!0)});case 8:case"end":return c.stop()}},u)}));return function(g,_,t,F,j){return M.apply(this,arguments)}}();R.Z=s}}]);
