(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1914],{8214:function(K,c,e){"use strict";var L=e(28991),g=e(81253),R=e(85893),f=e(67294),m=e(53048),D=["fieldProps","request","params","proFieldProps"],N=function(v,P){var U=v.fieldProps,x=v.request,V=v.params,y=v.proFieldProps,u=(0,g.Z)(v,D);return(0,R.jsx)(m.Z,(0,L.Z)({valueType:"cascader",fieldProps:U,ref:P,request:x,params:V,filedConfig:{customLightMode:!0},proFieldProps:y},u))};c.Z=f.forwardRef(N)},56755:function(K,c,e){"use strict";e.r(c),e.d(c,{default:function(){return te}});var L=e(49111),g=e(19650),R=e(66456),f=e(15885),m=e(39428),D=e(3182),N=e(62350),S=e(24565),v=e(34792),P=e(48086),U=e(57663),x=e(71577),V=e(11849),y=e(2824),u=e(67294),H=e(8212),J=e(82061),Q=e(51042),X=e(66801),O=e(63863),b=e(37490),w=e(952),k=e(37476),q=e(8214),$=e(5966),t=e(85893),_=function(p){var A=p.modalVisible,Z=p.setModalVisible,I=p.callbackRef,a=p.renderData,B=p.url;console.log(a,"renderData");var d=(0,u.useRef)();(0,u.useEffect)(function(){a.types=="edit"&&setTimeout(function(){var s;d==null||(s=d.current)===null||s===void 0||s.setFieldsValue({cluesValidityPeriod:a.cluesValidityPeriod,allocationValidityPeriod:a.allocationValidityPeriod,project:b.Z.getCascaderValue("dict_reg_job",a.project)})},100)},[]);var M=function(h,n){return n.some(function(T){return T.label.toLowerCase().indexOf(h.toLowerCase())>-1})};return(0,t.jsx)(k.Y,{title:a.types=="edit"?"\u7F16\u8F91\u6709\u6548\u671F":"\u65B0\u5EFA\u6709\u6548\u671F",formRef:d,visible:A,width:400,autoFocusFirstInput:!0,modalProps:{onCancel:function(){return Z()},destroyOnClose:!0},onFinish:function(){var s=(0,D.Z)((0,m.Z)().mark(function h(n){return(0,m.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:n.project&&(n.project=n.project[n.project.length-1]),console.log(n,"values"),a.types=="edit"&&(n.id=a.id),O.Z.post(B,n).then(function(F){return F.status=="success"&&(P.default.success("\u64CD\u4F5C\u6210\u529F"),Z(),I()),!0}).catch(function(F){return!0});case 4:case"end":return C.stop()}},h)}));return function(h){return s.apply(this,arguments)}}(),children:(0,t.jsxs)(w.ZP.Group,{children:[(0,t.jsx)(q.Z,{width:"xl",name:"project",placeholder:"\u54A8\u8BE2\u62A5\u8003\u5C97\u4F4D",label:"\u62A5\u8003\u5C97\u4F4D",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u62A5\u8003\u5C97\u4F4D"}],fieldProps:{options:b.Z.getList("dict_reg_job"),showSearch:{filter:M}}}),(0,t.jsx)($.Z,{width:"xl",label:"\u7EBF\u7D22\u6709\u6548\u671F",name:"cluesValidityPeriod",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7EBF\u7D22\u6709\u6548\u671F"}]}),(0,t.jsx)($.Z,{width:"xl",label:"\u5206\u6210\u6709\u6548\u671F",name:"allocationValidityPeriod",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5206\u6210\u6709\u6548\u671F"}]})]})})},ee=e(54493),te=function(p){var A=(0,u.useState)(null),Z=(0,y.Z)(A,2),I=Z[0],a=Z[1],B=(0,u.useState)(!1),d=(0,y.Z)(B,2),M=d[0],s=d[1],h=(0,u.useState)(""),n=(0,y.Z)(h,2),T=n[0],C=n[1],F=(0,u.useRef)(),W="/sms/business/bizEffectiveConfig",z=function(){F.current.reload()},re=[{title:"\u9879\u76EE\u603B\u79F0",dataIndex:"parentProjects",key:"parentProjects",sorter:!0,valueType:"cascader",fieldProps:{options:b.Z.getList("dict_reg_job"),showSearch:{filter:ee.Z}},render:function(o,r){return(0,t.jsx)("span",{children:b.Z.getCascaderAllName("dict_reg_job",r.project)},"parentProjects")}},{title:"\u7EBF\u7D22\u6709\u6548\u671F(\u5929)",dataIndex:"cluesValidityPeriod",key:"cluesValidityPeriod",render:function(o,r){return(0,t.jsx)("span",{children:""+r.cluesValidityPeriod+"\u5929"})}},{title:"\u5206\u6210\u6709\u6548\u671F(\u5929)",dataIndex:"allocationValidityPeriod",key:"allocationValidityPeriod",render:function(o,r){return(0,t.jsx)("span",{children:""+r.allocationValidityPeriod+"\u5929"})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,render:function(o,r,G,E){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{type:"primary",size:"small",icon:(0,t.jsx)(H.Z,{}),style:{marginRight:"10px",marginBottom:"8px"},onClick:function(){a((0,V.Z)((0,V.Z)({},r),{},{types:"edit"})),s(!0)},children:"\u7F16\u8F91"},"editable"),(0,t.jsx)(S.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:function(){O.Z.delete(W,{id:r.id}).then(function(Y){Y.status=="success"&&(P.default.success("\u5220\u9664\u6210\u529F"),z())})},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(x.Z,{size:"small",type:"primary",danger:!0,icon:(0,t.jsx)(J.Z,{}),children:"\u5220\u9664"},"delete")},r.id)]})}}];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X.ZP,{columns:re,actionRef:F,cardBordered:!0,request:(0,D.Z)((0,m.Z)().mark(function i(){var o,r,G,E,l=arguments;return(0,m.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return o=l.length>0&&l[0]!==void 0?l[0]:{},r=l.length>1?l[1]:void 0,G=l.length>2?l[2]:void 0,j.next=5,O.Z.get(W,o);case 5:return E=j.sent,j.abrupt("return",{data:E.data.content,success:E.success,total:E.data.totalElements});case 7:case"end":return j.stop()}},i)})),rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:10},rowSelection:{selections:[f.Z.SELECTION_ALL,f.Z.SELECTION_INVERT],onChange:function(o,r){C(o.join(","))}},tableAlertOptionRender:function(){return(0,t.jsx)(g.Z,{size:16,children:(0,t.jsx)(S.Z,{title:"\u662F\u5426\u6279\u91CF\u5220\u9664\uFF1F",okText:"\u5220\u9664",onConfirm:function(){O.Z.delete("/sms/business/bizEffectiveConfig",{ids:T}).then(function(r){r.status=="success"&&(P.default.success("\u5220\u9664\u6210\u529F"),z())})},children:(0,t.jsx)("a",{children:"\u6279\u91CF\u5220\u9664"})})})},dateFormatter:"string",toolBarRender:function(){return[(0,t.jsx)(x.Z,{icon:(0,t.jsx)(Q.Z,{}),type:"primary",onClick:function(){a({type:"order",orderNumber:0}),s(!0)},children:"\u65B0\u5EFA\u6709\u6548\u671F"},"button")]}}),M&&(0,t.jsx)(_,{setModalVisible:function(){return s(!1)},modalVisible:M,callbackRef:function(){return z()},renderData:I,url:W})]})}},54493:function(K,c){"use strict";var e=function(g,R){return R.some(function(f){return f.label.toLowerCase().indexOf(g.toLowerCase())>-1})};c.Z=e}}]);
