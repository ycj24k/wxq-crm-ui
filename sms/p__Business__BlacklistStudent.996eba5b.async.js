(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8484],{34124:function(J,f,e){"use strict";e.r(f);var g=e(32059),Q=e(62350),Z=e(24565),X=e(57663),D=e(71577),M=e(11849),Y=e(34792),v=e(48086),d=e(2824),P=e(22),A=e(71906),l=e(37490),o=e(63863),_=e(67294),L=e(7903),y=e(31223),U=e(51042),W=e(63930),s=e(85893);f.default=function(){var K=(0,_.useState)(null),b=(0,d.Z)(K,2),O=b[0],T=b[1],V=(0,_.useState)(!1),j=(0,d.Z)(V,2),k=j[0],E=j[1],F=(0,_.useState)(!1),x=(0,d.Z)(F,2),p=x[0],C=x[1],N=(0,_.useState)(null),I=(0,d.Z)(N,2),i=I[0],z=I[1],G=(0,_.useState)(1),h=(0,d.Z)(G,2),B=h[0],H=h[1],m=(0,_.useRef)(),c=function(){m.current.reload()};(0,_.useEffect)(function(){if(i){var n,a=i,t=[];(i==null?void 0:i.constructor)!=Array&&(a=[i]),(n=a)===null||n===void 0||n.forEach(function(u){t.push(u.id)}),o.Z.post("/sms/business/bizStudent/addBlacklist",{ids:t.join(",")}).then(function(u){u.status=="success"&&(v.default.success("\u64CD\u4F5C\u6210\u529F!"),c())})}},[i]);var R=[{title:"\u5B66\u5458/\u4F01\u4E1A",dataIndex:"name",render:function(a,t){return(0,s.jsx)("a",{onClick:function(){o.Z.get("/sms/business/bizStudent/getBlacklist",{id:t.id}).then(function(r){T((0,M.Z)({},r.data.content[0])),E(!0)})},children:t.name})}},{title:"\u6240\u5C5E\u56E2\u7EC4",dataIndex:"parentName",render:function(a,t){return(0,s.jsx)("a",{onClick:function(){o.Z.get("/sms/business/bizStudent",{id:t.parentId}).then(function(r){T((0,M.Z)({},r.data.content[0])),E(!0)})},children:t!=null&&t.parentName?t.parentName:""})}},{title:"\u54A8\u8BE2\u5C97\u4F4D",dataIndex:"project",key:"project",valueType:"cascader",fieldProps:{options:l.Z.getCascader("dict_reg_job")},render:function(a,t){return(0,s.jsx)("span",{children:l.Z.getCascaderName("dict_reg_job",t.project)})}},{title:"\u5BA2\u6237\u6765\u6E90",dataIndex:"source",valueType:"select",valueEnum:l.Z.getSearch("dict_source"),render:function(a,t){return(0,s.jsx)("span",{children:l.Z.getName("dict_source",t.source)})}},{title:"\u6240\u5C5E\u8001\u5E08",dataIndex:"userName"},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createTime",sorter:!0,dataIndex:"createTime",valueType:"dateRange",render:function(a,t){return(0,s.jsx)("span",{children:t.createTime})}},{title:"\u64CD\u4F5C",key:"optins",hideInTable:B==2,render:function(a,t){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Z.Z,{title:"\u662F\u5426\u79FB\u9664\u8BE5\u5B66\u5458",onConfirm:function(){o.Z.post("/sms/business/bizStudent/removeBlacklist",{ids:t.id}).then(function(r){r.status==="success"&&(v.default.success("\u64CD\u4F5C\u6210\u529F!"),c())})},okText:"\u79FB\u9664",cancelText:"\u53D6\u6D88",children:(0,s.jsx)(D.Z,{type:"primary",size:"small",icon:(0,s.jsx)(y.Z,{}),children:"\u79FB\u9664\u9ED1\u540D\u5355"},"look-blacklist")},t.id)})}}],S=(0,g.Z)({},"updateTime","desc");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.ZP,{onTabChange:function(a){H(a),c()},tabList:[{tab:"\u9ED1\u540D\u5355",key:"1"},{tab:"\u767D\u540D\u5355",key:"2"}],children:B==1?(0,s.jsx)(P.Z,{actionRef:m,columns:R,request:{url:"/sms/business/bizStudent/getBlacklist",sortList:S},toolBarRender:[(0,s.jsx)(D.Z,{icon:(0,s.jsx)(U.Z,{}),type:"primary",onClick:function(){C(!0)},children:"\u6DFB\u52A0\u9ED1\u540D\u5355"},"button-blacklist")]}):(0,s.jsx)(P.Z,{actionRef:m,columns:R,request:{url:"/sms/business/bizStudentUser",params:{isInWhitelist:!0},sortList:S}})}),O&&(0,s.jsx)(L.Z,{setModalVisible:function(){return E(!1)},modalVisible:k,renderData:O,callbackRef:function(){return c()}}),p&&(0,s.jsx)(W.Z,{type:0,modalVisible:p,setModalVisible:function(){return C(!1)},renderData:{type:"BlacklistStudent"},setStudentId:function(a){z(a)}})]})}}}]);
