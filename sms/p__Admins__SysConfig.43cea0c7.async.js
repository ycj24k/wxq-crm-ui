(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3091],{32779:function(se,O,t){"use strict";t.d(O,{Z:function(){return g}});var C=t(28991),E=t(67294),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},D=N,S=t(27029),b=function(y,x){return E.createElement(S.Z,(0,C.Z)((0,C.Z)({},y),{},{ref:x,icon:D}))},B=E.forwardRef(b),g=B},64317:function(se,O,t){"use strict";var C=t(28991),E=t(81253),N=t(85893),D=t(96202),S=t(67294),b=t(66758),B=t(53048),g=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],W=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],y=S.forwardRef(function(l,Z){var u=l.fieldProps,I=l.children,U=l.params,K=l.proFieldProps,z=l.mode,w=l.valueEnum,H=l.request,Y=l.showSearch,k=l.options,$=(0,E.Z)(l,g),A=(0,S.useContext)(b.Z);return(0,N.jsx)(B.Z,(0,C.Z)((0,C.Z)({valueEnum:(0,D.h)(w),request:H,params:U,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,C.Z)({options:k,mode:z,showSearch:Y,getPopupContainer:A.getPopupContainer},u),ref:Z,proFieldProps:K},$),{},{children:I}))}),x=S.forwardRef(function(l,Z){var u=l.fieldProps,I=l.children,U=l.params,K=l.proFieldProps,z=l.mode,w=l.valueEnum,H=l.request,Y=l.options,k=(0,E.Z)(l,W),$=(0,C.Z)({options:Y,mode:z||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},u),A=(0,S.useContext)(b.Z);return(0,N.jsx)(B.Z,(0,C.Z)((0,C.Z)({valueEnum:(0,D.h)(w),request:H,params:U,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,C.Z)({getPopupContainer:A.getPopupContainer},$),ref:Z,proFieldProps:K},k),{},{children:I}))}),_=y,L=x,V=_;V.SearchSelect=L,V.displayName="ProFormComponent",O.Z=V},52688:function(se,O,t){"use strict";var C=t(28991),E=t(81253),N=t(85893),D=t(67294),S=t(53048),b=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],B=D.forwardRef(function(g,W){var y=g.fieldProps,x=g.unCheckedChildren,_=g.checkedChildren,L=g.proFieldProps,V=(0,E.Z)(g,b);return(0,N.jsx)(S.Z,(0,C.Z)({valueType:"switch",fieldProps:(0,C.Z)({unCheckedChildren:x,checkedChildren:_},y),ref:W,valuePropName:"checked",proFieldProps:L,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},V))});O.Z=B},99306:function(se,O,t){"use strict";t.r(O),t.d(O,{default:function(){return Oe}});var C=t(20228),E=t(11382),N=t(43358),D=t(34041),S=t(47673),b=t(4107),B=t(62350),g=t(24565),W=t(57663),y=t(71577),x=t(11849),_=t(77576),L=t(12028),V=t(34792),l=t(48086),Z=t(2824),u=t(67294),I=t(28991),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},K=U,z=t(27029),w=function(p,T){return u.createElement(z.Z,(0,I.Z)((0,I.Z)({},p),{},{ref:T,icon:K}))},H=u.forwardRef(w),Y=H,k=t(8212),$=t(82061),A=t(32779),ye=t(51042),Ze=t(34804),xe=t(71906),R=t(39428),ee=t(3182),Ee=t(37476),ae=t(64317),le=t(5966),Se=t(52688),Pe=t(90672),P=t(63863),G=t(37490),e=t(85893),Fe=function(M){var p=(0,u.useRef)(),T=M.modalVisible,F=M.setModalVisible,re=M.callbackRef,c=M.renderData,te=(0,u.useState)(),Q=(0,Z.Z)(te,2),X=Q[0],q=Q[1];(0,u.useEffect)(function(){setTimeout(function(){var f;if(p==null||(f=p.current)===null||f===void 0||f.resetFields(),c.types=="eidt"){var d;c.configGroup=c==null?void 0:c.configGroup.toString(),c.type=c.type.toString(),p==null||(d=p.current)===null||d===void 0||d.setFieldsValue(c)}else{var s;p==null||(s=p.current)===null||s===void 0||s.setFieldsValue({type:"1"}),q("1")}},100)},[c]);var oe={labelCol:{span:4},wrapperCol:{span:14}},J=function(d){return c.type=="eidt"&&(d.id=c.id),new Promise(function(s,ie){P.Z.post("/sms/system/sysConfig",d).then(function(j){j.status=="success"&&(s(!0),l.default.success("\u63D0\u4EA4\u6210\u529F"),F(),re())}).catch(function(j){s(!0)})})};return(0,e.jsxs)(Ee.Y,(0,x.Z)((0,x.Z)({title:c.type=="add"?"\u65B0\u5EFA\u7CFB\u7EDF\u8BBE\u7F6E":"\u4FEE\u6539\u7CFB\u7EDF\u8BBE\u7F6E",autoFocusFirstInput:!0},oe),{},{layout:"LAYOUT_TYPE_HORIZONTAL",modalProps:{onCancel:function(){return F()}},formRef:p,onFinish:function(){var f=(0,ee.Z)((0,R.Z)().mark(function d(s){return(0,R.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return s.value?s.value=s.value:s.value=!1,c.types=="eidt"&&(s.id=c.id),j.next=4,J(s);case 4:case"end":return j.stop()}},d)}));return function(d){return f.apply(this,arguments)}}(),visible:T,children:[(0,e.jsx)(ae.Z,{label:"\u503C\u7C7B\u578B",name:"configGroup",width:200,required:!0,request:(0,ee.Z)((0,R.Z)().mark(function f(){return(0,R.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",G.Z.getList("configGroup"));case 1:case"end":return s.stop()}},f)}))}),(0,e.jsx)(le.Z,{width:"xl",name:"code",label:"\u4EE3\u7801",rules:[{required:!0}]}),(0,e.jsx)(le.Z,{width:"xl",name:"name",label:"\u540D\u79F0",rules:[{required:!0}]}),(0,e.jsx)(ae.Z,{label:"\u503C\u7C7B\u578B",name:"type",width:200,required:!0,request:(0,ee.Z)((0,R.Z)().mark(function f(){return(0,R.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",G.Z.getList("configType"));case 1:case"end":return s.stop()}},f)})),fieldProps:{onChange:function(d){q(d)}}}),X==="1"&&(0,e.jsx)(le.Z,{width:"xl",name:"value",label:"\u503C"}),X==="2"&&(0,e.jsx)(Se.Z,{name:"value",label:"\u503C",checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"}),X=="3"&&(0,e.jsx)(ae.Z,{request:(0,ee.Z)((0,R.Z)().mark(function f(){return(0,R.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",G.Z.getList("bankType"));case 1:case"end":return s.stop()}},f)})),name:"value",label:"\u503C"}),(0,e.jsx)(Pe.Z,{width:"xl",name:"description",label:"\u63CF\u8FF0"})]}))},je=t(30202),Oe=function(){var M=(0,u.useState)(!1),p=(0,Z.Z)(M,2),T=p[0],F=p[1],re=(0,u.useState)([]),c=(0,Z.Z)(re,2),te=c[0],Q=c[1],X=(0,u.useState)(!1),q=(0,Z.Z)(X,2),oe=q[0],J=q[1],f=(0,u.useState)(!1),d=(0,Z.Z)(f,2),s=d[0],ie=d[1],j=(0,u.useState)([]),ve=(0,Z.Z)(j,2),ne=ve[0],ue=ve[1],De=(0,u.useState)([]),he=(0,Z.Z)(De,2),ce=he[0],me=he[1],be=(0,u.useState)({}),Ce=(0,Z.Z)(be,2),Re=Ce[0],de=Ce[1],Ne=(0,u.useState)([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]),ge=(0,Z.Z)(Ne,2),Be=ge[0],Me=ge[1],fe=function(){pe()},Te=["groupDealEnable","personDealEnable","groupVisitEnable","personVisitEnable","personReceiveEnable","groupReceiveEnable","formalPersonDealEnable","formalPersonReceiveEnable","formalPersonVisitEnable","formalGroupReceiveEnable","formalGroupDealEnable","formalGroupVisitEnable"],pe=function(){F(!0),Q([]),P.Z.get("/sms/system/sysConfig",{_isGetAll:!0}).then(function(o){var a;(a=o.data)===null||a===void 0||a.content.sort(function(r,m){return m.type-r.type});var i=o.data.content,h=[];h=Object.values(o.data.content.reduce(function(r,m){return r[m.configGroup]?r[m.configGroup].push(m):r[m.configGroup]=[m],r},{}));var n=JSON.parse(JSON.stringify(h));console.log("bb",n),Q(n),F(!1)})};(0,u.useEffect)(function(){pe()},[]);var Le=[{title:"\u4EE3\u7801",dataIndex:"code",ellipsis:!0},{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u7C7B\u578B",dataIndex:"type",render:function(o,a){return(0,e.jsx)(e.Fragment,{children:G.Z.getName("sysConfig",a.type)})}},{title:"\u503C",dataIndex:"value",search:!1,render:function(o,a){return(0,e.jsx)(e.Fragment,{children:a.type=="1"?(0,e.jsx)("span",{children:a.value}):(0,e.jsx)(L.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",loading:T,defaultChecked:a.value,onChange:function(h){F(!0);var n=JSON.parse(JSON.stringify(a));n.value=a.value,delete n.isDel,P.Z.post("/sms/system/sysConfig",n).then(function(r){r.status=="success"&&(l.default.success("\u64CD\u4F5C\u6210\u529F"),F(!1))})}})})}},{title:"\u63CF\u8FF0",dataIndex:"description",tip:"\u63CF\u8FF0\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",search:!1},{title:"\u64CD\u4F5C",valueType:"option",key:"option",fixed:"right",render:function(o,a,i,h){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{type:"primary",size:"small",icon:(0,e.jsx)(k.Z,{}),style:{marginRight:"10px",marginBottom:"8px"},onClick:function(){J(!0),de((0,x.Z)({types:"eidt"},a))},children:"\u7F16\u8F91"},"view"),(0,e.jsx)(g.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:function(){P.Z.delete("/sms/system/sysConfig",{id:a.id}).then(function(r){r.status=="success"&&(l.default.success("\u5220\u9664\u6210\u529F"),fe())})},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,e.jsx)(y.Z,{type:"primary",size:"small",danger:!0,icon:(0,e.jsx)($.Z,{}),children:"\u5220\u9664"},"delete")},a.id)]})}}];return(0,e.jsx)(xe.ZP,{children:(0,e.jsxs)(E.Z,{spinning:T,children:[(0,e.jsx)(je.ZP,{title:(0,e.jsx)("h3",{children:"\u7CFB\u7EDF\u8BBE\u7F6E"}),hoverable:!0,style:{minHeight:"900px"},extra:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{type:"primary",icon:(0,e.jsx)(A.Z,{}),onClick:function(){P.Z.post("/sms/system/sysConfig/reload").then(function(o){o.status=="success"&&l.default.success("\u64CD\u4F5C\u6210\u529F")})},children:"\u91CD\u8F7D\u7CFB\u7EDF\u8BBE\u7F6E"}),(0,e.jsx)(y.Z,{type:"primary",style:{marginLeft:"20px"},icon:(0,e.jsx)(A.Z,{}),onClick:function(){pe()},children:"\u5237\u65B0"}),(0,e.jsx)(y.Z,{type:"primary",ghost:!0,icon:s?(0,e.jsx)(Y,{}):(0,e.jsx)(k.Z,{}),style:{margin:"0 20px"},onClick:function(){ie(!s)},children:s?"\u53D6\u6D88":"\u7F16\u8F91"}),(0,e.jsx)(y.Z,{type:"primary",icon:(0,e.jsx)(ye.Z,{}),onClick:function(){de({type:"add"}),J(!0)},children:"\u65B0\u5EFA"})]}),children:(0,e.jsx)("div",{className:"contents",children:te&&te.map(function(v,o){return(0,e.jsxs)("div",{className:"contents"+o,style:{overflow:"hidden",transition:"height 0.5s ",height:"".concat(v.length*75+30,"px")},children:[(0,e.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"10px",fontSize:"16px",height:"30px",lineHeight:"30px",background:"#eee"},onClick:function(){var i=document.getElementsByClassName("contents"+o),h=document.getElementsByClassName("icons"+o),n=JSON.parse(JSON.stringify(Be));n[o]=!n[o],i[0].style.height=="30px"?(i[0].style.height="".concat(v.length*75+30,"px"),h[0].style.transform="rotate(0deg)"):(i[0].style.height="30px",h[0].style.transform="rotate(180deg)"),Me(n)},children:[G.Z.getName("configGroup",v[0].configGroup),(0,e.jsx)("div",{style:{display:"inline-block",transform:"rotate(0deg)",transition:"all 0.5s"},className:"icons"+o,children:(0,e.jsx)(Ze.Z,{})})]}),v.map(function(a,i){return(0,e.jsxs)("div",{style:{display:"flex",marginBottom:"30px",alignItems:"center"},children:[(0,e.jsxs)("div",{className:"lables",style:{width:"300px",color:"black"},children:[(0,e.jsx)("div",{children:a.name}),(0,e.jsxs)("div",{children:["(",a.code,")"]})]}),(0,e.jsxs)("div",{className:"content",style:{width:"170px",marginRight:"30px"},children:[a.type==1&&(0,e.jsx)(b.Z,{onChange:function(n){var r=JSON.parse(JSON.stringify(ne)),m=JSON.parse(JSON.stringify(ce));m[i]=n.target.value,r.indexOf(i)>=0||(r.push(o+"-"+i),ue(r)),me(m)},defaultValue:a.value}),a.type==2&&(0,e.jsx)(L.Z,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",loading:T,defaultChecked:a.value==="true",onChange:function(n){F(!0);var r=JSON.parse(JSON.stringify(a));r.value=n,delete r.isDel,P.Z.post("/sms/system/sysConfig",r).then(function(m){m.status=="success"&&(l.default.success("\u64CD\u4F5C\u6210\u529F"),F(!1))})}}),a.type==3&&(0,e.jsx)(D.Z,{style:{width:"170px"},options:G.Z.getList("bankType"),defaultValue:a.value,onChange:function(n){var r=JSON.parse(JSON.stringify(ne)),m=JSON.parse(JSON.stringify(ce));m[i]=n,r.indexOf(i)>=0||(r.push(o+"-"+i),ue(r)),me(m)}})]}),(0,e.jsxs)("div",{className:"description",style:{color:"#7e7e7e"},children:["(",a.description,")"]}),Te.indexOf(a.code)>=0?(0,e.jsx)(g.Z,{title:"\u7ACB\u5373\u6D41\u8F6C\uFF1F",onConfirm:function(){var n="";switch(a.code){case"groupDealEnable":n="groupDealCirculation";break;case"personDealEnable":n="personDealCirculation";break;case"groupVisitEnable":n="groupVisitCirculation";break;case"personVisitEnable":n="personVisitCirculation";break;case"groupReceiveEnable":n="groupReceiveCirculation";break;case"personReceiveEnable":n="personReceiveCirculation";break;case"formalPersonDealEnable":n="formalPersonDealCirculation";break;case"formalPersonReceiveEnable":n="formalPersonReceiveCirculation";break;case"formalPersonVisitEnable":n="formalPersonVisitCirculation";break;case"formalGroupReceiveEnable":n="formalGroupReceiveCirculation";break;case"formalGroupDealEnable":n="formalGroupDealCirculation";break;case"formalGroupVisitEnable":n="formalGroupVisitCirculation";break}P.Z.post("/sms/system/sysConfig/"+n).then(function(r){r.status=="success"&&l.default.success("\u64CD\u4F5C\u6210\u529F")})},okText:"\u6D41\u8F6C",cancelText:"\u53D6\u6D88",children:(0,e.jsx)(y.Z,{type:"primary",style:{margin:"0 20px"},children:"\u7ACB\u5373\u6D41\u8F6C"})},"sys-config-flow-".concat(i)):"",(0,e.jsxs)("div",{style:{margin:"0 20px"},hidden:ne.indexOf(o+"-"+i)==-1,children:[(0,e.jsx)("a",{onClick:function(){var n=JSON.parse(JSON.stringify(a));n.value=ce[i],delete n.isDel,P.Z.post("/sms/system/sysConfig",n).then(function(r){r.status=="success"&&l.default.success("\u64CD\u4F5C\u6210\u529F")})},children:"\u4FEE\u6539"}),(0,e.jsx)("a",{style:{color:"red",paddingLeft:"20px"},onClick:function(){var n=JSON.parse(JSON.stringify(ne));n.splice(n.indexOf(o+"-"+i),1),ue(n)},children:"\u53D6\u6D88"})]}),(0,e.jsxs)("div",{style:{marginLeft:"30px"},hidden:!s,children:[(0,e.jsx)("a",{onClick:function(){J(!0),de((0,x.Z)({types:"eidt"},a))},children:"\u7F16\u8F91"}),(0,e.jsx)(g.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:function(){P.Z.delete("/sms/system/sysConfig",{id:a.id}).then(function(n){n.status=="success"&&(l.default.success("\u5220\u9664\u6210\u529F"),fe())})},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("a",{style:{color:"red",paddingLeft:"20px"},children:"\u5220\u9664"})},"sys-config-delete-".concat(i))]})]},"sys-config-".concat(i))})]},o)})})}),(0,e.jsx)(Fe,{modalVisible:oe,setModalVisible:function(){return J(!1)},callbackRef:function(){return fe()},renderData:Re})]})})}}}]);
