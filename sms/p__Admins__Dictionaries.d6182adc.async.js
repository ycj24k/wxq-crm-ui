(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[247],{32779:function(de,K,a){"use strict";a.d(K,{Z:function(){return w}});var N=a(28991),j=a(67294),te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},Q=te,ae=a(27029),Y=function(se,X){return j.createElement(ae.Z,(0,N.Z)((0,N.Z)({},se),{},{ref:X,icon:Q}))},ne=j.forwardRef(Y),w=ne},31199:function(de,K,a){"use strict";var N=a(28991),j=a(81253),te=a(85893),Q=a(67294),ae=a(53048),Y=["fieldProps","min","proFieldProps","max"],ne=function(d,se){var X=d.fieldProps,c=d.min,ce=d.proFieldProps,S=d.max,D=(0,j.Z)(d,Y);return(0,te.jsx)(ae.Z,(0,N.Z)({valueType:"digit",fieldProps:(0,N.Z)({min:c,max:S},X),ref:se,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:ce},D))};K.Z=Q.forwardRef(ne)},70261:function(de,K,a){"use strict";a.r(K),a.d(K,{default:function(){return be}});var N=a(57663),j=a(71577),te=a(32157),Q=a(5816),ae=a(62350),Y=a(24565),ne=a(48736),w=a(27049),d=a(11849),se=a(77576),X=a(12028),c=a(39428),ce=a(34792),S=a(48086),D=a(3182),x=a(2824),_e=a(47673),Se=a(4107),m=a(67294),je=a(6700),fe=a(32779),ve=a(51042),De=a(71906),Be=a(66801),R=a(63863),le=a(30202),pe=a(37476),q=a(5966),Pe=a(31199),Ie=a(90672),t=a(85893),Ee=function(h){var f=(0,m.useRef)(),V=h.modalVisible,$=h.setModalVisible,b=h.callbackRef,o=h.renderData;setTimeout(function(){var Z;if(f==null||(Z=f.current)===null||Z===void 0||Z.resetFields(),o.type=="eidt"){var v;f==null||(v=f.current)===null||v===void 0||v.setFieldsValue({parentId:o.name,name:o.name,value:o.value,description:o.description,code:o.code})}else if(o.type=="add"){var F;f==null||(F=f.current)===null||F===void 0||F.setFieldsValue({parentId:-1})}else if(o.type=="addChild"){var B;f==null||(B=f.current)===null||B===void 0||B.setFieldsValue({parentId:o.name})}else if(o.type=="addChildern"){var p;f==null||(p=f.current)===null||p===void 0||p.setFieldsValue({parentId:o.title})}},100);var W={labelCol:{span:4},wrapperCol:{span:14}},_=function(v){return new Promise(function(F,B){o.type=="add"?v.parentId=-1:o.type=="addChild"?v.parentId=o.id:o.type=="addChildern"?v.parentId=o.parentId2:(v.id=o.id,delete v.parentId),R.Z.post("/sms/system/sysDict",v).then(function(p){p.status=="success"&&(F(!0),S.default.success("\u63D0\u4EA4\u6210\u529F"),$(),b())}).catch(function(p){F(!0)})})};return(0,t.jsxs)(pe.Y,(0,d.Z)((0,d.Z)({title:o.type=="add"?"\u65B0\u5EFA\u5B57\u5178":"\u4FEE\u6539\u5B57\u5178",autoFocusFirstInput:!0},W),{},{layout:"LAYOUT_TYPE_HORIZONTAL",modalProps:{onCancel:function(){return $()}},formRef:f,onFinish:function(){var Z=(0,D.Z)((0,c.Z)().mark(function v(F){return(0,c.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,_(F);case 2:case"end":return p.stop()}},v)}));return function(v){return Z.apply(this,arguments)}}(),visible:V,children:[(0,t.jsx)(q.Z,{width:"xl",name:"name",label:"\u5B57\u5178\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u6B63\u786E\u586B\u5199\uFF0C\u4E0D\u80FD\u5305\u542B\u7A7A\u683C",pattern:new RegExp(/^\S*$/)}]}),(0,t.jsx)(q.Z,{width:"xl",name:"code",label:"code"}),o.type=="add"?(0,t.jsx)(q.Z,{width:"xl",name:"value",label:"\u503C"}):(0,t.jsx)(q.Z,{width:"xl",name:"value",label:"\u503C"}),(0,t.jsx)(Pe.Z,{name:"sort",label:"\u6392\u5E8F",width:"xl"}),(0,t.jsx)(q.Z,{width:"lg",name:"parentId",label:"\u7236\u7C7B",disabled:!0}),(0,t.jsx)(Ie.Z,{width:"md",name:"description",label:"\u63CF\u8FF0"})]}))},U=a(37490),et=a(20228),Re=a(11382),Ae=a(80876),he=a(25607),Te=function(h){var f=h.modalVisible,V=h.setModalVisible,$=h.url,b=h.type,o=h.callbackRef,W=h.propsData,_=h.uploadtype,Z=h.callbackFn,v=Z===void 0?void 0:Z,F=(0,m.useState)(!1),B=(0,x.Z)(F,2),p=B[0],ie=B[1];console.log("pp",h);var re=function(L){var M=L[0],P=[],I=[];L.forEach(function(E,G){if(G>2&&E.length>0){var g={};E.forEach(function(C,H){if(H<M.length){var y=M[H];(C+"3").replace(/(^\s*)|(\s*$)/g,"")!="3"&&(y=="type"&&b=="student"?g[y]=U.Z.getValue("studentType",C):y=="project"?g[y]=U.Z.getCascaderValues("dict_reg_job",C):y=="classType"?g[y]=U.Z.getValue("dict_class_type",C):y=="classYear"?g[y]=U.Z.getValue("dict_class_year",C):y=="examType"?g[y]=U.Z.getValue("dict_exam_type",C):g[y]=C)}}),W.id?P.push((0,d.Z)((0,d.Z)({},g),{},{parentId:W.id})):P.push((0,d.Z)({},g)),console.log("array",P)}}),R.Z.postAll($,{array:P}).then(function(E){ie(!1),E.status=="success"&&(S.default.success("\u5BFC\u5165\u6210\u529F"),v&&v(E.data),V())})},z={accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",name:"file",headers:{authorization:"authorization-text"},showUploadList:!1,fieldProps:{beforeUpload:function(L,M){var P=!0,I=M[0],E=new FileReader;return E.onload=function(G){var g=G.target.result;P||(g=new Uint8Array(g));var C=he.ij(g,{type:P?"binary":"array"}),H=C.Sheets[C.SheetNames[0]],y=he.P6.sheet_to_json(H,{header:1});re(y)},P?E.readAsBinaryString(I):E.readAsArrayBuffer(I),!1}}};return(0,t.jsx)(pe.Y,{title:"\u6279\u91CF\u5BFC\u5165",autoFocusFirstInput:!0,modalProps:{onCancel:function(){V()}},onFinish:function(){var O=(0,D.Z)((0,c.Z)().mark(function L(M){return(0,c.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:V(),o();case 2:case"end":return I.stop()}},L)}));return function(L){return O.apply(this,arguments)}}(),visible:f,children:(0,t.jsxs)(Re.Z,{spinning:p,children:[(0,t.jsx)("a",{download:"\u6279\u91CF\u5BFC\u5165\u5B50\u7C7B\u6A21\u677F",href:"./template/\u6279\u91CF\u5BFC\u5165\u5B50\u7C7B\u6A21\u677F.xlsx",children:"\u4E0B\u8F7D\u5BFC\u5165\u6A21\u677F"},"download-dictionary-template"),(0,t.jsx)(Ae.Z,(0,d.Z)({},z))]})})},Ve=Se.Z.Search,be=function(){var h=(0,m.useRef)(),f=(0,m.useState)(!1),V=(0,x.Z)(f,2),$=V[0],b=V[1],o=(0,m.useState)({}),W=(0,x.Z)(o,2),_=W[0],Z=W[1],v=(0,m.useState)(!1),F=(0,x.Z)(v,2),B=F[0],p=F[1],ie=(0,m.useState)("-1"),re=(0,x.Z)(ie,2),z=re[0],O=re[1],L=(0,m.useState)(!1),M=(0,x.Z)(L,2),P=M[0],I=M[1],E=(0,m.useState)(!1),G=(0,x.Z)(E,2),g=G[0],C=G[1],H=(0,m.useState)(!1),y=(0,x.Z)(H,2),Oe=y[0],me=y[1],ke=(0,m.useState)(),Ze=(0,x.Z)(ke,2),Le=Ze[0],ue=Ze[1],Me=(0,m.useState)(),ye=(0,x.Z)(Me,2),we=ye[0],Ue=ye[1],We=(0,m.useState)(""),ge=(0,x.Z)(We,2),Ke=ge[0],Ne=ge[1],Ye=(0,m.useState)([]),Ce=(0,x.Z)(Ye,2),A=Ce[0],tt=Ce[1],$e=(0,m.useState)([]),xe=(0,x.Z)($e,2),ze=xe[0],Ge=xe[1],T=function(){setTimeout(function(){h.current.reloadAndRest(),Fe()},100)},He=function(){var u=(0,D.Z)((0,c.Z)().mark(function n(e){var s;return(0,c.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,R.Z.delete("/sms/system/sysDict",{id:e});case 2:s=i.sent,s.status=="success"?(S.default.success("\u5220\u9664\u6210\u529F"),T()):S.default.error(s.msg);case 4:case"end":return i.stop()}},n)}));return function(e){return u.apply(this,arguments)}}(),Je=[{title:"\u5B57\u5178\u540D\u79F0",dataIndex:"name",render:function(n,e){return(0,t.jsx)("a",{onClick:function(){A.push(e.id),O(A[A.length-1]),T()},children:e.name})}},{title:"\u4EE3\u7801",dataIndex:"code",copyable:!0},{title:"\u503C",dataIndex:"value",width:300,ellipsis:!0,tip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u7236\u7EA7",dataIndex:"parentId",search:!1,render:function(n,e){return(0,t.jsx)(t.Fragment,{children:e.parentId&&(0,t.jsx)("span",{children:U.Z.getIdName(e.parentId)})})}},{title:"\u6392\u5E8F",dataIndex:"sort",search:!1},{title:"\u63CF\u8FF0",dataIndex:"description",search:!1},{title:"\u72B6\u6001",dataIndex:"enable",valueEnum:{true:"\u542F\u7528",false:"\u7981\u7528"},render:function(n,e){return(0,t.jsx)(X.Z,{checkedChildren:"\u542F\u7528",unCheckedChildren:"\u7981\u7528",defaultChecked:e.enable,loading:Oe,onChange:(0,D.Z)((0,c.Z)().mark(function s(){var l;return(0,c.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return me(!0),r.next=3,R.Z.post("/sms/system/sysDict",{id:e.id,enable:!e.enable});case 3:l=r.sent,l.status!="success"&&S.default.error(l.msg),me(!1),T();case 7:case"end":return r.stop()}},s)}))},e.id)}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:300,fixed:"right",render:function(n,e,s,l){return(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{onClick:function(r){r.stopPropagation(),Z((0,d.Z)({type:"eidt"},e)),b(!0)},children:"\u7F16\u8F91"}),(0,t.jsx)(w.Z,{type:"vertical"}),(0,t.jsx)("a",{onClick:function(r){r.stopPropagation(),Z(e),C(!0)},children:"\u6279\u91CF\u6DFB\u52A0\u5B50\u7C7B"}),(0,t.jsx)(w.Z,{type:"vertical"}),(0,t.jsx)("a",{onClick:function(r){r.stopPropagation(),Z((0,d.Z)({type:"addChild"},e)),b(!0)},children:"\u6DFB\u52A0\u5B50\u7C7B"}),(0,t.jsx)(w.Z,{type:"vertical"}),(0,t.jsx)(Y.Z,{title:"\u662F\u5426\u751F\u4EA7value\uFF1F",onConfirm:function(r){e.value||R.Z.post("/sms/system/sysDict/randomGenerateValue",{id:e.id}).then(function(ee){ee.status=="success"&&(S.default.success("\u751F\u6210\u6210\u529F"),T())})},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,t.jsx)("a",{href:"#",onClick:function(r){r.stopPropagation(),!e.value},style:{color:e.value?"#ccc":""},children:"\u751F\u6210value"})}),(0,t.jsx)(w.Z,{type:"vertical"}),(0,t.jsx)(Y.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:function(r){He(e.id)},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,t.jsx)("a",{href:"#",onClick:function(r){r.stopPropagation()},children:"\u5220\u9664"})})]})}}];(0,m.useEffect)(function(){Fe()},[]);var Fe=function(){var u=(0,D.Z)((0,c.Z)().mark(function n(){var e,s;return(0,c.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,R.Z.get("/sms/system/sysDict",{parentId:"-1",_isGetAll:!0});case 2:e=i.sent,s=[],e.data.content.forEach(function(r){s.push({title:r.name,key:r.id})}),ue(s);case 6:case"end":return i.stop()}},n)}));return function(){return u.apply(this,arguments)}}();function oe(u,n,e){return u.map(function(s){return s.key===n?(0,d.Z)((0,d.Z)({},s),{},{children:e}):s.children?(0,d.Z)((0,d.Z)({},s),{},{children:oe(s.children,n,e)}):s})}var Qe=function(n){var e=n.key,s=n.children;return new Promise(function(l){if(s){l();return}if(!e){l();return}var i=e.toString().split("-"),r=i[i.length-1];R.Z.get("/sms/system/sysDict",{parentId:r}).then(function(ee){if(ee.data.content.length>0){var k=[];ee.data.content.forEach(function(J){k.push({title:J.name,key:"".concat(e,"-").concat(J.id)})}),ue(function(J){return oe(J,e,k)}),l()}else ue(function(J){return oe(J,e,[{title:"\u7A7A",key:"".concat(e,"-0"),isLeaf:!0}])}),l()})})},Xe=function(n){var e=n.target.value;Ne(e)},qe=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=[];return n.forEach(function(s){var l=s.title.indexOf(Ke);l>-1&&e.push(s)}),e};return(0,t.jsxs)(De.ZP,{children:[(0,t.jsxs)(le.ZP,{split:"vertical",children:[(0,t.jsxs)(le.ZP,{title:"\u5B57\u5178",colSpan:"25%",children:[(0,t.jsx)(Ve,{style:{marginBottom:30},placeholder:"Search",onChange:function(n){return Xe(n)}}),(0,t.jsx)(Q.Z,{loadData:Qe,treeData:qe(Le),height:600,onSelect:function(n,e){if(!!n[0]){var s=n[0].toString().split("-"),l=s[s.length-1];O(l),I(!1),Ue(e.node.title),T()}}})]}),(0,t.jsx)(le.ZP,{headerBordered:!0,children:(0,t.jsx)(Be.ZP,{columns:Je,actionRef:h,cardBordered:!0,rowSelection:{onChange:function(n,e){Ge(n)}},tableAlertOptionRender:function(){return(0,t.jsx)("a",{style:{color:"red"},onClick:function(){R.Z.delete("/sms/system/sysDict/deleteArray",{ids:ze.join(",")}).then(function(e){e.status=="success"&&(S.default.success("\u64CD\u4F5C\u6210\u529F!"),T())})},children:"\u6279\u91CF\u5220\u9664"})},request:(0,D.Z)((0,c.Z)().mark(function u(){var n,e,s,l,i,r=arguments;return(0,c.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return n=r.length>0&&r[0]!==void 0?r[0]:{},e=r.length>1?r[1]:void 0,s=r.length>2?r[2]:void 0,l={},P?(l=n,z!="-1"&&(l.parentId=z)):(delete n.code,delete n.name,l=(0,d.Z)({parentId:z},n)),k.next=7,R.Z.get("/sms/system/sysDict",l);case 7:return i=k.sent,k.abrupt("return",{data:i.data.content,success:i.success,total:i.data.totalElements});case 9:case"end":return k.stop()}},u)})),onSubmit:function(){I(!0)},onReset:function(){I(!1),O("-1"),T()},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:10},dateFormatter:"string",headerTitle:"\u6570\u636E\u5B57\u5178",toolBarRender:function(){return[(0,t.jsx)(j.Z,{type:"primary",style:{display:A.length>0?"":"none"},icon:(0,t.jsx)(je.Z,{}),onClick:(0,D.Z)((0,c.Z)().mark(function n(){return(0,c.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:A.splice(A.length-1),console.log("dataArr",A),O(A.length==0?"-1":A[A.length-1]),T();case 4:case"end":return s.stop()}},n)})),children:"\u8FD4\u56DE\u4E0A\u5C42"},"button"),(0,t.jsx)(j.Z,{type:"primary",icon:(0,t.jsx)(fe.Z,{}),onClick:(0,D.Z)((0,c.Z)().mark(function n(){var e;return(0,c.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return p(!0),l.next=3,R.Z.post("/sms/system/sysDict/reload");case 3:e=l.sent,e.status=="success"?(S.default.success("\u64CD\u4F5C\u6210\u529F"),p(!1)):S.default.error(e.msg);case 5:case"end":return l.stop()}},n)})),loading:B,children:"\u91CD\u8F7D\u5B57\u5178"},"button"),(0,t.jsx)(j.Z,{type:"primary",icon:(0,t.jsx)(fe.Z,{}),onClick:(0,D.Z)((0,c.Z)().mark(function n(){return(0,c.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:p(!0),setTimeout(function(){U.Z.get(),p(!1),S.default.success("\u64CD\u4F5C\u6210\u529F")},1e3);case 2:case"end":return s.stop()}},n)})),loading:B,children:"\u5237\u65B0\u672C\u5730\u5B57\u5178"},"button"),(0,t.jsx)(j.Z,{icon:(0,t.jsx)(ve.Z,{}),type:"primary",onClick:function(){Z({type:"addChildern",parentId2:z,title:we}),b(!0)},children:"\u65B0\u5EFA\u5B50\u7C7B"},"button"),(0,t.jsx)(j.Z,{icon:(0,t.jsx)(ve.Z,{}),type:"primary",onClick:function(){Z({type:"add"}),b(!0)},children:"\u65B0\u5EFA\u5B57\u5178"},"button"),(0,t.jsx)(j.Z,{type:"primary",onClick:function(){C(!0)},children:"\u6279\u91CF\u4FEE\u6539"},"button")]}})})]}),(0,t.jsx)(Ee,{modalVisible:$,setModalVisible:function(){return b(!1)},callbackRef:function(){return T()},renderData:_}),g&&(0,t.jsx)(Te,{setModalVisible:function(){return C(!1)},modalVisible:g,url:"/sms/system/sysDict/saveArray",type:"student",propsData:_,callbackFn:function(){return T()}})]})}},17007:function(){}}]);
