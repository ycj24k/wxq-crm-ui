(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9174],{63430:function(X,S,t){"use strict";var x=t(67294),F=t(76565),B=t(29640),M=t(79360),j=t(24770),b=t(27681),c=function(a,y){var m={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&y.indexOf(i)<0&&(m[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,i=Object.getOwnPropertySymbols(a);h<i.length;h++)y.indexOf(i[h])<0&&Object.prototype.propertyIsEnumerable.call(a,i[h])&&(m[i[h]]=a[i[h]]);return m},Q=(0,x.forwardRef)(function(a,y){var m=a.chartRef,i=a.style,h=i===void 0?{height:"inherit"}:i,D=a.className,A=a.loading,V=a.loadingTemplate,H=a.errorTemplate,s=c(a,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),K=(0,B.Z)(F.by,s),I=K.chart,J=K.container;return(0,x.useEffect)(function(){(0,M.J)(m,I.current)},[I.current]),(0,x.useImperativeHandle)(y,function(){return{getChart:function(){return I.current}}}),x.createElement(j.Z,{errorTemplate:H},A&&x.createElement(b.Z,{loadingTemplate:V,theme:a.theme}),x.createElement("div",{className:D,style:h,ref:J}))});S.Z=Q},8214:function(X,S,t){"use strict";var x=t(28991),F=t(81253),B=t(85893),M=t(67294),j=t(53048),b=["fieldProps","request","params","proFieldProps"],c=function(a,y){var m=a.fieldProps,i=a.request,h=a.params,D=a.proFieldProps,A=(0,F.Z)(a,b);return(0,B.jsx)(j.Z,(0,x.Z)({valueType:"cascader",fieldProps:m,ref:y,request:i,params:h,filedConfig:{customLightMode:!0},proFieldProps:D},A))};S.Z=M.forwardRef(c)},43611:function(X,S,t){"use strict";t.r(S),t.d(S,{default:function(){return le}});var x=t(57663),F=t(71577),B=t(39428),M=t(3182),j=t(11849),b=t(32059),c=t(2824),Q=t(14965),a=t(88137),y=t(71906),m=t(30202),i=t(66801),h=t(63430),D=t(37490),A=t(8214),V=t(30381),H=t.n(V),s=t(67294),K=t(76565),I=t(29640),J=t(79360),ee=t(24770),te=t(27681),ae=function(l,f){var p={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&f.indexOf(o)<0&&(p[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,o=Object.getOwnPropertySymbols(l);v<o.length;v++)f.indexOf(o[v])<0&&Object.prototype.propertyIsEnumerable.call(l,o[v])&&(p[o[v]]=l[o[v]]);return p},ne=(0,s.forwardRef)(function(l,f){var p=l.chartRef,o=l.style,v=o===void 0?{height:"inherit"}:o,N=l.className,L=l.loading,W=l.loadingTemplate,Y=l.errorTemplate,E=ae(l,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),g=(0,I.Z)(K.x1,E),C=g.chart,z=g.container;return(0,s.useEffect)(function(){(0,J.J)(p,C.current)},[C.current]),(0,s.useImperativeHandle)(f,function(){return{getChart:function(){return C.current}}}),s.createElement(ee.Z,{errorTemplate:Y},L&&s.createElement(te.Z,{loadingTemplate:W,theme:l.theme}),s.createElement("div",{className:N,style:v,ref:z}))}),re=ne,e=t(85893),se=function(l){var f=l.studentData,p=(0,s.useState)([]),o=(0,c.Z)(p,2),v=o[0],N=o[1];(0,s.useEffect)(function(){N(f)},[f]);var L={data:v,xField:"date",yField:"quantity",seriesField:"x",point:{size:5},smooth:!1,label:{position:"top",style:{fill:"#FFFFFF"}},color:["#1890FF"],tooltip:{customContent:function(Y,E){return(0,e.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"4px"},children:[(0,e.jsx)("div",{style:{marginBottom:"8px",fontWeight:"bold"},children:Y}),E==null?void 0:E.map(function(g,C){var z=g.name,G=g.value,T=g.color;return(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[(0,e.jsx)("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:T,marginRight:"8px"}}),(0,e.jsx)("span",{style:{marginRight:"12px"},children:"\u65B0\u589E\u4EBA\u6570:"}),(0,e.jsx)("span",{style:{color:"#333"},children:G})]},"transformation-line-".concat(C))})]})},domStyles:{"g2-tooltip":{background:"#fff",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",padding:"0",border:"none"}}}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(re,(0,j.Z)({},L))})},U=t(63863),le=function(l){var f=H()(),p=a.Z.RangePicker,o="YYYY/MM/DD",v=(0,s.useState)("\u6F5C\u5728"),N=(0,c.Z)(v,2),L=N[0],W=N[1],Y=(0,s.useState)(f.format("YYYY-MM-DD")),E=(0,c.Z)(Y,2),g=E[0],C=E[1],z=(0,s.useState)(f.format("YYYY-MM-DD")),G=(0,c.Z)(z,2),T=G[0],ie=G[1],oe=(0,s.useState)([]),k=(0,c.Z)(oe,2),de=k[0],ue=k[1],ce=(0,s.useState)([]),w=(0,c.Z)(ce,2),me=w[0],he=w[1],fe=(0,s.useState)(0),_=(0,c.Z)(fe,2),ve=_[0],ge=_[1],xe=(0,s.useState)(),q=(0,c.Z)(xe,2),$=q[0],pe=q[1];(0,s.useEffect)(function(){$&&Ee($)},[$]),(0,s.useEffect)(function(){ye(),Pe()},[g,T]);var je=function(r,n){C(n[0]),ie(n[1])},ye=function(){U.Z.get("/sms/business/bizReturnVisit/getVisitRanking",{startTime:g,endTime:T,limit:20}).then(function(r){ue(r.data)})},Ee=function(r){!g||!T||U.Z.get("/sms/business/bizCharge/getProjectNewOrder",{startTime:g,endTime:T,projects:Array.isArray(r)?r.join(","):r}).then(function(n){var P=Object.keys(n.data).map(function(u){return(0,b.Z)({},u,n.data[u])});console.log(P,"pieData====>");var Z=[];P.forEach(function(u){Z.push({type:D.Z.getCascaderAllName("dict_reg_job",Object.keys(u)),value:u[Object.keys(u)[0]]}),console.log(Z,"data")})}).catch(function(n){console.error("\u8BF7\u6C42\u5931\u8D25\uFF1A",n)})},Pe=function(){U.Z.get("/sms/business/bizStudent/getAddedQuantityOfDay",{startTime:g,endTime:T,limit:20}).then(function(r){var n;he(r.data);var P=(n=r.data)===null||n===void 0?void 0:n.reduce(function(Z,u){return Z+(Number(u.quantity)||0)},0);ge(P)})},De=function(){W("\u6F5C\u5728")},Ce=function(){W("\u6B63\u5F0F")},Te=[{title:"\u8BA2\u5355\u7F16\u53F7",dataIndex:"num"},{title:"\u8BA2\u5355\u91D1\u989D",dataIndex:"amount",render:function(r,n){return(0,e.jsxs)("span",{children:[n.amount?n.amount:"0.00","\u5143"]})}},{title:"\u62A5\u8003\u9879\u76EE",dataIndex:"project",width:150,key:"project",sorter:!0,valueType:"cascader",fieldProps:{options:D.Z.getCascader("dict_reg_job")}},{title:"\u6210\u4EA4\u65F6\u95F4",dataIndex:"chargeTime"},{title:"\u6210\u4EA4\u8F6C\u5316\u5468\u671F",dataIndex:"chargeDuration",render:function(r,n){return(0,e.jsxs)("span",{children:[n.chargeDuration?n.chargeDuration:"0","\u5929"]})}},{title:"\u9500\u552E\u4EBA",dataIndex:"userName"}],Ze=[{title:"\u6392\u540D",valueType:"index",render:function(r,n,P){return(0,e.jsxs)("span",{children:["NO.",P+1]})}},{title:"\u59D3\u540D",dataIndex:"userName"},{title:"\u8DDF\u8FDB\u6B21\u6570",dataIndex:"visitNum",render:function(r,n){return(0,e.jsxs)("span",{children:[n.visitNum,"\u6B21"]})}}],Oe=[{type:"\u4E8B\u4F8B\u4E00",value:40}],Se={appendPadding:10,data:Oe,angleField:"value",colorField:"type",radius:.9,label:{type:"inner",style:{fontSize:14},autoRotate:!1,content:function(r){var n=r.percent;return"".concat((n*100).toFixed(0),"%")}},interactions:[{type:"element-active"}]};return(0,e.jsx)(y.ZP,{children:(0,e.jsxs)(m.ZP,{direction:"column",ghost:!0,gutter:{xs:8,sm:8,md:8,lg:8,xl:8,xxl:8},children:[(0,e.jsx)(m.ZP,{bordered:!0,children:(0,e.jsxs)("div",{className:"top_content",children:[(0,e.jsx)("div",{className:"top_text",children:"\u8D44\u6E90\u8F6C\u5316\u770B\u677F"}),(0,e.jsx)("div",{className:"choose_date",children:(0,e.jsx)(p,{onChange:je,defaultValue:[f,f],format:o})})]})}),(0,e.jsx)(m.ZP,{layout:"center",bordered:!0,children:(0,e.jsxs)("div",{className:"content",children:[(0,e.jsxs)("div",{className:"content_left",children:[(0,e.jsx)("div",{className:"middle_text",children:"\u5C97\u4F4D\u9500\u552E\u989D\u7EDF\u8BA1"}),(0,e.jsx)("div",{className:"choose",style:{marginTop:"20px"},children:(0,e.jsx)(A.Z,{width:"sm",name:"project",placeholder:"\u54A8\u8BE2\u62A5\u8003\u5C97\u4F4D",label:"\u62A5\u8003\u5C97\u4F4D",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u62A5\u8003\u5C97\u4F4D"}],fieldProps:{options:D.Z.getCascader("dict_reg_job"),changeOnSelect:!0,expandTrigger:"hover",onChange:function(r){pe(r)}}})}),(0,e.jsx)("div",{children:(0,e.jsx)(h.Z,(0,j.Z)({},Se))})]}),(0,e.jsxs)("div",{className:"content_middle",children:[(0,e.jsx)("div",{className:"middle_text",children:"\u8BA2\u5355\u6210\u4EA4\u6570\u636E"}),(0,e.jsx)("div",{children:(0,e.jsx)(i.ZP,{search:!1,columns:Te,pagination:{pageSize:10},request:(0,M.Z)((0,B.Z)().mark(function d(){var r,n,P,Z,u,O=arguments;return(0,B.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return r=O.length>0&&O[0]!==void 0?O[0]:{pageSize:10},n=O.length>1?O[1]:void 0,P=O.length>2?O[2]:void 0,Z={_orderBy:"chargeTime",_direction:"desc"},R.next=6,U.Z.get("/sms/business/bizCharge/getChargeInfo",(0,j.Z)((0,j.Z)({},Z),r));case 6:return u=R.sent,R.abrupt("return",{data:u.data.content,success:u.success,total:u.data.totalElements});case 8:case"end":return R.stop()}},d)}))})})]}),(0,e.jsxs)("div",{className:"content_right",children:[(0,e.jsx)("div",{className:"middle_text",children:"\u8001\u5E08\u8DDF\u8FDB\u7387"}),(0,e.jsx)("div",{children:(0,e.jsx)(i.ZP,{search:!1,pagination:!1,dataSource:de,columns:Ze})})]})]})}),(0,e.jsx)(m.ZP,{children:(0,e.jsxs)("div",{className:"line_content",children:[(0,e.jsxs)("div",{className:"header_content",children:[(0,e.jsxs)("div",{className:"left_content",children:["\u65B0\u589E",L,"\u5B66\u5458\u603B\u6570\uFF08\u603B\u4EBA\u6570\uFF1A",ve,"\u4EBA\uFF09"]}),(0,e.jsxs)("div",{className:"right_content",children:[(0,e.jsx)(F.Z,{value:"large",type:"primary",style:{marginRight:"10px"},onClick:function(){return De()},children:"\u65B0\u589E\u6F5C\u5728\u5B66\u5458\u6570"}),(0,e.jsx)(F.Z,{value:"large",type:"primary",onClick:function(){return Ce()},children:"\u65B0\u589E\u6B63\u5F0F\u5B66\u5458\u6570"})]})]}),(0,e.jsx)("div",{className:"line_s",children:(0,e.jsx)(se,{studentData:me})})]})})]})})}}}]);
