(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3798],{69749:function(Ze,P,t){"use strict";t.r(P);var Re=t(57663),c=t(71577),Be=t(66456),T=t(15885),q=t(32059),Ue=t(49111),ee=t(19650),Ae=t(62350),te=t(24565),Le=t(34792),d=t(48086),f=t(11849),l=t(2824),u=t(67294),se=t(40110),x=t(51042),S=t(90631),ne=t(82061),m=t(63863),i=t(37490),ae=t(15258),re=t(71906),ue=t(7903),ie=t(22),O=t(54493),le=t(21010),de=t(66371),e=t(85893);P.default=function(E){var v,D,p=E.hidden,g=E.isPerson,C=E.isGroup,oe=E.showMyself,_e=(0,le.tT)("@@initialState"),b=_e.initialState,ce=(0,u.useState)(null),Z=(0,l.Z)(ce,2),R=Z[0],y=Z[1],fe=(0,u.useState)(!1),B=(0,l.Z)(fe,2),U=B[0],I=B[1],me=(0,u.useState)("/sms/business/bizStudent/addSystemRepository"),A=(0,l.Z)(me,2),Ee=A[0],L=A[1],pe=(0,u.useState)(!1),F=(0,l.Z)(pe,2),K=F[0],W=F[1],he=(0,u.useState)("1"),k=(0,l.Z)(he,2),r=k[0],xe=k[1],ve=(0,u.useState)([]),N=(0,l.Z)(ve,2),_=N[0],De=N[1],V=(v=i.Z.getDepartmentList(b==null||(D=b.currentUser)===null||D===void 0?void 0:D.userid))===null||v===void 0?void 0:v.id,Ce=(0,u.useState)({departmentId:V}),z=(0,l.Z)(Ce,2),be=z[0],h=z[1],ye=(0,u.useState)(!0),G=(0,l.Z)(ye,2),Ie=G[0],Fe=G[1],Me=(0,u.useState)(-1),$=(0,l.Z)(Me,2),H=$[0],Ke=$[1],je=(0,u.useState)(!1),J=(0,l.Z)(je,2),Q=J[0],X=J[1],Pe=Ie?"/sms/business/bizStudentUser":"/sms/business/bizStudentUser/potentialStudent",Y=(0,u.useRef)(),o=function(){Y.current.reload()};(0,u.useEffect)(function(){(r=="7"||r=="0")&&h({})},[r]);var Te=[{title:"\u51FA\u955C\u4EBA",dataIndex:"name",hideInTable:!g&&!C},{width:120,title:"\u5339\u914D\u7EBF\u7D22\u5206\u7EC4",dataIndex:"groupName",hideInTable:!g&&!C},{title:"\u7EBF\u7D22\u63D0\u4F9B\u4EBA",dataIndex:"provider",hideInTable:!C},{title:"\u59D3\u540D",dataIndex:"name",width:100,sorter:!0,fixed:"left",render:function(a,n){return(0,e.jsx)("div",{children:(0,e.jsxs)("a",{onClick:function(){y((0,f.Z)({},n)),W(!0)},children:[n.name,(0,e.jsx)(se.Z,{})]})})}},{title:"\u6027\u522B",dataIndex:"sex",valueType:"select",valueEnum:{false:"\u7537",true:"\u5973"},render:function(a,n){return(0,e.jsx)("span",{children:n.sex==null?"\u672A\u77E5":n.sex?"\u5973":"\u7537"})},sorter:!0},{title:"\u8EAB\u4EFD\u8BC1",dataIndex:"idCard",hideInTable:!0,sorter:!0},{title:"\u624B\u673A\u53F7",dataIndex:"mobile",key:"mobile",hideInTable:!0},{title:"\u5FAE\u4FE1\u53F7",dataIndex:"weChat",key:"weChat",hideInTable:!0},{title:"\u5B66\u5458\u7C7B\u578B",dataIndex:"type",valueType:"select",width:130,sorter:!0,order:9,filters:!0,filterMultiple:!1,valueEnum:i.Z.getSearch("studentType"),render:function(a,n){return(0,e.jsx)("span",{children:i.Z.getName("studentType",n.type)})}},{title:"\u9879\u76EE\u603B\u79F0",dataIndex:"parentProjects",key:"parentProjects",sorter:!0,valueType:"cascader",fieldProps:{options:i.Z.getList("dict_reg_job"),showSearch:{filter:O.Z}},width:150,render:function(a,n){return(0,e.jsx)("span",{children:i.Z.getCascaderAllName("dict_reg_job",n.project)},"parentProjects")}},{title:"\u54A8\u8BE2\u5C97\u4F4D",dataIndex:"project",sorter:!0,key:"project",valueType:"cascader",fieldProps:{showSearch:{filter:O.Z},options:i.Z.getCascader("dict_reg_job")},render:function(a,n){return(0,e.jsx)("span",{children:i.Z.getCascaderName("dict_reg_job",n.project)})}},{title:"\u54A8\u8BE2\u65F6\u95F4",key:"createTime",sorter:!0,dataIndex:"createTime",valueType:"dateRange",render:function(a,n){return(0,e.jsx)("span",{children:n.createTime})}},{title:"\u5BA2\u6237\u6765\u6E90",dataIndex:"studentSource",valueType:"select",sorter:!0,valueEnum:i.Z.getSearch("dict_source"),render:function(a,n){return(0,e.jsx)("span",{children:i.Z.getName("dict_source",n.studentSource)})}},{title:"\u9886\u53D6\u6B21\u6570",sorter:!0,dataIndex:"receiveNum",key:"receiveNum"},{title:"\u5F53\u524D\u6240\u5728\u90E8\u95E8",width:120,sorter:!0,dataIndex:"departmentId",search:!1,render:function(a,n){return(0,e.jsx)("span",{children:i.Z.getDepartmentName(n.departmentId).join("-")})}},{title:"\u5907\u6CE8",dataIndex:"description",ellipsis:!0,tip:"\u5907\u6CE8\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u6D41\u8F6C\u65F6\u95F4",sorter:!0,key:"circulationTime",dataIndex:"circulationTime",valueType:"dateRange",render:function(a,n){return(0,e.jsx)("span",{children:n.circulationTime})}},{title:"\u4FE1\u606F\u63D0\u4F9B\u4EBA",dataIndex:"providerName",key:"providerName",hideInTable:!0},{title:"\u5F53\u524D\u5B66\u5458\u72B6\u6001",dataIndex:"studentStatus",valueType:"select",filters:!0,width:120,valueEnum:i.Z.getSearch("visitStatus"),render:function(a,n){return(0,e.jsx)("span",{children:i.Z.getName("visitStatus",n.studentStatus)})}},{title:"\u64CD\u4F5C",valueType:"option",width:200,key:"options",fixed:"right",render:function(a,n,ge,We){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ee.Z,{children:[(0,e.jsx)("a",{type:"primary",onClick:function(){m.Z.post("/sms/business/bizStudentUser/receive",(0,f.Z)({ids:n.id},r!=="99"&&{source:r})).then(function(j){j.status=="success"&&(d.default.success("\u9886\u53D6\u6210\u529F"),o())})},children:"\u9886\u53D6"},"edit"),(0,e.jsx)("a",{type:"primary",onClick:function(){d.default.success("\u63A5\u53E3\u672A\u5F00\u53D1\uFF0C\u8BF7\u8054\u7CFB\u540E\u53F0")},children:"\u5206\u914D"},"edit"),(0,e.jsx)(te.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",style:{marginRight:"15px",marginBottom:"8px"},onConfirm:function(){m.Z.delete("/sms/business/bizStudentUser",{id:n.id}).then(function(j){j.status=="success"&&(d.default.success("\u5220\u9664\u6210\u529F"),o())})},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"},"deletes")},"deletePop")]})})}}],Se=(0,q.Z)({},"receiveNum,circulationTime","asc,desc"),M=[];oe?M=[{key:"nm",label:(0,e.jsx)("span",{children:"\u65B0\u5A92\u4F53\u7EBF\u7D22"})},{key:"zong",label:(0,e.jsx)("span",{children:"\u603B\u516C\u53F8\u8D44\u6E90\u5E93"})},{key:"all",label:(0,e.jsx)("span",{children:"\u6240\u6709\u8D44\u6E90"})}]:M=[{key:"fen",label:(0,e.jsx)("span",{children:"\u5206\u516C\u53F8\u8D44\u6E90\u5E93"})},{key:"zong",label:(0,e.jsx)("span",{children:"\u603B\u516C\u53F8\u8D44\u6E90\u5E93"})},{key:"all",label:(0,e.jsx)("span",{children:"\u6240\u6709\u8D44\u6E90"})}];var Oe={menu:{type:"tab",items:M,onChange:function(a){console.log(a,"key----------->"),a=="fen"?h({departmentId:V}):a=="zong"?h({departmentId:"15"}):h({}),o()}}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(re.ZP,{onTabChange:function(a){xe(a),o()},tabList:[{tab:"\u6F5C\u5728\u5B66\u5458\u516C\u6D77",key:"99"},{tab:"\u6B63\u5F0F\u5B66\u5458\u516C\u6D77",key:"4"},{tab:"\u65B0\u5A92\u4F53\u8D44\u6E90",key:"0"},{tab:"\u65E0\u6548\u6570\u636E\u5E93",key:"7"}],children:[(0,e.jsx)(ie.Z,{columns:Te,actionRef:Y,toolbar:r=="7"||r=="0"?void 0:Oe,request:{url:"/sms/business/bizStudentUser/circulationLibrary",params:(0,f.Z)((0,f.Z)({},r!=="99"&&{source:r}),{},{"userId-isNull":!0},be),sortList:Se},search:p?!1:{defaultCollapsed:!0,defaultColsNumber:10},rowSelection:{selections:[T.Z.SELECTION_ALL,T.Z.SELECTION_INVERT],onChange:function(a,n){De(a)}},toolBarRender:[(0,e.jsx)("a",{hidden:r=="1"||p,download:"\u65B0\u5B66\u5458\u5BFC\u5165\u6A21\u677F",href:"./template/\u65B0\u5B66\u5458\u5BFC\u5165\u6A21\u677F.xlsx",children:"\u4E0B\u8F7D\u5BFC\u5165\u6A21\u677F"}),(0,e.jsx)(c.Z,{icon:(0,e.jsx)(x.Z,{}),type:"primary",onClick:function(){y(H?{typee:"add",parentId:H,newMedia:!1,teacher:!0}:{typee:"add",newMedia:!1,teacher:!0}),X(!0)},children:"\u65B0\u5EFA"},"add-resource"),(0,e.jsx)(c.Z,{hidden:r=="2"||p,icon:(0,e.jsx)(S.Z,{}),type:"primary",onClick:function(){L("/sms/business/bizStudent/batch/importForOtherOfSpecial"),I(!0)},children:"\u5BFC\u5165\u7279\u6B8A\u8D44\u6E90"},"button"),(0,e.jsx)(c.Z,{hidden:r=="1"||p,icon:(0,e.jsx)(S.Z,{}),type:"primary",onClick:function(){L("/sms/business/bizStudent/addSystemRepository"),I(!0)},children:"\u6279\u91CF\u5BFC\u5165"},"button"),(0,e.jsx)(c.Z,{icon:(0,e.jsx)(x.Z,{}),type:"primary",onClick:function(){if(_.length==0){d.default.error("\u8BF7\u9009\u62E9\u9700\u8981\u5206\u914D\u7684\u5B66\u5458!");return}d.default.success("\u63A5\u53E3\u672A\u5F00\u53D1\uFF0C\u8BF7\u8054\u7CFB\u540E\u53F0")},children:"\u6279\u91CF\u5206\u914D"},"button"),(0,e.jsx)(c.Z,{icon:(0,e.jsx)(x.Z,{}),type:"primary",onClick:function(){if(_.length==0){d.default.error("\u8BF7\u9009\u62E9\u9700\u8981\u9886\u53D6\u7684\u5B66\u5458!");return}console.log(_),m.Z.post("/sms/business/bizStudentUser/receive",(0,f.Z)({ids:_.join(",")},r!=="99"&&{source:r})).then(function(a){a.status=="success"&&(d.default.success("\u64CD\u4F5C\u6210\u529F"),o())})},children:"\u6279\u91CF\u9886\u53D6"},"button"),(0,e.jsx)(c.Z,{icon:(0,e.jsx)(ne.Z,{}),type:"primary",danger:!0,onClick:function(){if(_.length==0){d.default.error("\u8BF7\u9009\u62E9\u9700\u8981\u5220\u9664\u7684\u5B66\u5458!");return}console.log(_),m.Z.delete("/sms/business/bizStudentUser/deleteArray",{ids:_.join(",")}).then(function(a){a.status=="success"&&(d.default.success("\u5220\u9664\u6210\u529F"),o())})},children:"\u6279\u91CF\u5220\u9664"},"button")]}),Q&&(0,e.jsx)(de.Z,{setModalVisible:function(){return X(!1)},modalVisible:Q,callbackRef:function(){return o()},renderData:R,url:Pe,type:"\u5B66\u5458",sourceType:1}),U&&(0,e.jsx)(ae.Z,{setModalVisible:function(){return I(!1)},modalVisible:U,url:Ee,type:"student",upType:"post2",uploadtype:"student",propsData:{resourceType:r},callbackRef:function(){return o()}}),K&&(0,e.jsx)(ue.Z,{setModalVisible:function(){return W(!1)},modalVisible:K,renderData:R,callbackRef:function(){return o()},mobileHide:!0})]})})}}}]);
