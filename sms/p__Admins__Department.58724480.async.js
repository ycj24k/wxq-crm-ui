(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7002,2331],{77483:function(Pe,w,u){"use strict";u.r(w),u.d(w,{default:function(){return ie}});var Ve=u(57663),R=u(71577),ke=u(62350),X=u(24565),we=u(48736),P=u(27049),Z=u(11849),Le=u(34792),A=u(48086),p=u(39428),y=u(3182),E=u(2824),o=u(67294),q=u(6700),L=u(51042),_=u(71906),ee=u(66801),T=u(63863),G=u(37490),N=u(30202),M=u(952),te=u(37476),s=u(5966),ue=u(90672),ae=u(52688),e=u(85893),ne=function(g){var i=(0,o.useRef)(),S=g.modalVisible,B=g.setModalVisible,j=g.callbackRef,h=g.renderData;setTimeout(function(){var m;if(i==null||(m=i.current)===null||m===void 0||m.resetFields(),h.type=="eidt"){var c;i==null||(c=i.current)===null||c===void 0||c.setFieldsValue((0,Z.Z)({},h))}else if(h.type=="add"){var v;i==null||(v=i.current)===null||v===void 0||v.setFieldsValue({parentId:-1})}else if(h.type=="addChild"){var F;i==null||(F=i.current)===null||F===void 0||F.setFieldsValue({parentId:h.name})}},100);var I={labelCol:{span:4},wrapperCol:{span:14}},V=function(c){return new Promise(function(v,F){h.type=="add"?c.parentId=-1:h.type=="addChild"?c.parentId=h.id:(c.id=h.id,delete c.parentId),T.Z.post("/sms/system/sysDepartment",c).then(function(f){f.status=="success"&&(v(!0),A.default.success("\u63D0\u4EA4\u6210\u529F"),B(),j())}).catch(function(f){v(!0)})})};return(0,e.jsxs)(te.Y,(0,Z.Z)((0,Z.Z)({title:h.type=="add"?"\u65B0\u5EFA\u90E8\u95E8":"\u4FEE\u6539\u90E8\u95E8\u4FE1\u606F",autoFocusFirstInput:!0},I),{},{layout:"LAYOUT_TYPE_HORIZONTAL",modalProps:{onCancel:function(){return B()}},formRef:i,onFinish:function(){var m=(0,y.Z)((0,p.Z)().mark(function c(v){return(0,p.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,V(v);case 2:case"end":return f.stop()}},c)}));return function(c){return m.apply(this,arguments)}}(),visible:S,labelCol:{span:5,offset:1},children:[(0,e.jsx)(s.Z,{width:"xl",name:"name",label:"\u90E8\u95E8\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u6B63\u786E\u586B\u5199\uFF0C\u4E0D\u80FD\u5305\u542B\u7A7A\u683C",pattern:new RegExp(/^\S*$/)}]}),(0,e.jsx)(s.Z,{width:"lg",name:"parentId",label:"\u7236\u7C7B",disabled:!0}),(0,e.jsx)(ue.Z,{width:"md",name:"description",label:"\u63CF\u8FF0"}),(0,e.jsx)(M.ZP.Group,{label:"\u559C\u62A5\u914D\u7F6E\uFF1A"}),(0,e.jsx)(s.Z,{width:"lg",name:"chargeTarget",label:"\u6BCF\u65E5\u4E1A\u7EE9\u76EE\u6807"}),(0,e.jsx)(s.Z,{width:"lg",name:"bottomTarget",label:"\u672C\u6708\u4FDD\u5E95\u76EE\u6807"}),(0,e.jsx)(s.Z,{width:"lg",name:"secondaryTarget",label:"\u672C\u6708\u6B21\u7EA7\u76EE\u6807"}),(0,e.jsx)(s.Z,{width:"lg",name:"sprintTarget",label:"\u672C\u6708\u51B2\u523A\u76EE\u6807"}),(0,e.jsx)(s.Z,{width:"lg",name:"challengeTarget",label:"\u672C\u6708\u6311\u6218\u76EE\u6807"}),(0,e.jsx)(ae.Z,{name:"isSend",label:"\u662F\u5426\u53D1\u9001\u5230\u559C\u62A5",fieldProps:{defaultChecked:!1}}),(0,e.jsx)(M.ZP.Group,{label:"\u914D\u7F6E\u90E8\u95E8\u6D41\u8F6C\u89C4\u5219\uFF1A"}),(0,e.jsx)(s.Z,{width:"lg",name:"personVisitTimeout",label:"\u4E2A\u4EBA\u56DE\u8BBF\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"personDealTimeout",label:"\u4E2A\u4EBA\u6210\u4EA4\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"groupVisitTimeout",label:"\u56E2\u7EC4\u56DE\u8BBF\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"groupDealTimeout",label:"\u56E2\u7EC4\u6210\u4EA4\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"personReceiveTimeout",label:"\u4E2A\u4EBA\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"groupReceiveTimeout",label:"\u56E2\u7EC4\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"formalPersonVisitTimeout",label:"\u6B63\u5F0F\u4E2A\u4EBA\u56DE\u8BBF\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"formalPersonDealTimeout",label:"\u6B63\u5F0F\u4E2A\u4EBA\u6210\u4EA4\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"formalPersonReceiveTimeout",label:"\u6B63\u5F0F\u4E2A\u4EBA\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"formalGroupVisitTimeout",label:"\u6B63\u5F0F\u56E2\u7EC4\u56DE\u8BBF\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"formalGroupDealTimeout",label:"\u6B63\u5F0F\u56E2\u7EC4\u6210\u4EA4\u8D85\u65F6\u5929\u6570"}),(0,e.jsx)(s.Z,{width:"lg",name:"formalGroupReceiveTimeout",label:"\u6B63\u5F0F\u56E2\u7EC4\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570"}),(0,e.jsxs)("div",{style:{width:"500px",color:"#7c7878",marginLeft:"190px"},children:["\u56E2\u7EC4\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570\u548C\u4E2A\u4EBA\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570",(0,e.jsx)("br",{}),"\u503C\u4E3A-1\u65F6\uFF0C\u6B64\u90E8\u95E8\u7684\u7684\u8D44\u6E90\u4E0D\u4F1A\u6D41\u8F6C\u5230\u4E0A\u7EA7\u90E8\u95E8",(0,e.jsx)("br",{}),"\u503C\u4E3A0\u65F6\uFF0C\u6B64\u90E8\u95E8\u8001\u5E08\u7684\u8D44\u6E90\u548C\u6B64\u90E8\u95E8\u4E0B\u7EA7\u90E8\u95E8\u7684\u8D44\u6E90\u6D41\u8F6C\u65F6\u4F1A\u8DF3\u8FC7\u6B64\u90E8\u95E8",(0,e.jsx)("br",{}),"\u503C\u5927\u4E8E\u96F6\u65F6\u6309\u7167\u6B64\u503C\u5929\u6570\u6B63\u5E38\u6D41\u8F6C",(0,e.jsx)("br",{})]})]}))},se=u(78697),re=u(22034),le=u(14037),ie=function(){var g=(0,o.useRef)(),i=(0,o.useState)(!1),S=(0,E.Z)(i,2),B=S[0],j=S[1],h=(0,o.useState)({}),I=(0,E.Z)(h,2),V=I[0],m=I[1],c=(0,o.useState)(),v=(0,E.Z)(c,2),F=v[0],f=v[1],de=(0,o.useState)(),O=(0,E.Z)(de,2),oe=O[0],ce=O[1],me=(0,o.useState)(!1),U=(0,E.Z)(me,2),fe=U[0],k=U[1],pe=(0,o.useState)([]),K=(0,E.Z)(pe,2),b=K[0],Ge=K[1],he=(0,o.useState)("tab1"),Y=(0,E.Z)(he,2),Ee=Y[0],ve=Y[1],Fe=(0,o.useState)("1"),$=(0,E.Z)(Fe,2),Ze=$[0],xe=$[1],Ce=(0,o.useState)([]),H=(0,E.Z)(Ce,2),ge=H[0],De=H[1],je=(0,o.useState)(),J=(0,E.Z)(je,2),be=J[0],ye=J[1],Ae=(0,o.useState)(!1),z=(0,E.Z)(Ae,2),W=z[0],Q=z[1];(0,o.useEffect)(function(){Te()},[]);var Te=function(){var n=(0,y.Z)((0,p.Z)().mark(function a(){var t;return(0,p.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(t=JSON.parse(localStorage.getItem("Department")),t){d.next=6;break}return d.next=4,T.Z.get("/sms/share/getDepartmentAndUser");case 4:t=d.sent.data,localStorage.setItem("Department",JSON.stringify(t));case 6:case"end":return d.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),D=function(){setTimeout(function(){var a;g==null||(a=g.current)===null||a===void 0||a.reload()},100)},Se=function(){var n=(0,y.Z)((0,p.Z)().mark(function a(t){var r;return(0,p.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,T.Z.delete("/sms/system/sysDepartment",{id:t});case 2:r=l.sent,r.status=="success"?(A.default.success("\u5220\u9664\u6210\u529F"),D()):A.default.error(r.msg);case 4:case"end":return l.stop()}},a)}));return function(t){return n.apply(this,arguments)}}(),Be=[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"name",render:function(a,t){return(0,e.jsx)("a",{onClick:function(){b.push({id:t.id,name:t.name}),f({id:t.id,name:t.name}),D()},children:t.name})}},{title:"\u6388\u6743\u9879\u76EE",dataIndex:"projects",search:!1,render:function(a,t){return(0,e.jsx)("span",{children:t.projects?t.projects.split(",").map(function(r){return(0,e.jsxs)("span",{children:[G.Z.getCascaderName("dict_reg_job",r),","]})}):""})}},{title:"\u63CF\u8FF0",dataIndex:"description",search:!1},{title:"\u64CD\u4F5C",valueType:"option",key:"option",fixed:"right",render:function(a,t,r,d){return(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{onClick:function(){m((0,Z.Z)({type:"eidt"},t)),j(!0)},children:"\u7F16\u8F91"}),(0,e.jsx)(P.Z,{type:"vertical"}),(0,e.jsx)("a",{onClick:(0,y.Z)((0,p.Z)().mark(function l(){var x;return(0,p.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:x=G.Z.getTree("dict_reg_job"),ye({content:x,type:"projectDepartment"}),ce(t.id),De(t.projects),Q(!0);case 5:case"end":return C.stop()}},l)})),children:"\u5173\u8054\u9879\u76EE"}),(0,e.jsx)(P.Z,{type:"vertical"}),(0,e.jsx)("a",{onClick:function(){m((0,Z.Z)({type:"addChild"},t)),j(!0)},children:"\u6DFB\u52A0\u4E0B\u5C5E\u90E8\u95E8"}),(0,e.jsx)(P.Z,{type:"vertical"}),(0,e.jsx)(X.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:function(){Se(t.id)},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("a",{href:"#",children:"\u5220\u9664"})})]})}}],Ie=[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"name",render:function(a,t){return(0,e.jsx)("a",{onClick:function(){b.push({id:t.id,name:t.name}),f({id:t.id,name:t.name}),D()},children:t.name})}},{title:"\u4E2A\u4EBA\u56DE\u8BBF\u8D85\u65F6\u5929\u6570",dataIndex:"personVisitTimeout",search:!1},{title:"\u4E2A\u4EBA\u6210\u4EA4\u8D85\u65F6\u5929\u6570",dataIndex:"personDealTimeout",search:!1},{title:"\u4E2A\u4EBA\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570",dataIndex:"personReceiveTimeout",search:!1},{title:"\u56E2\u7EC4\u56DE\u8BBF\u8D85\u65F6\u5929\u6570",dataIndex:"groupVisitTimeout",search:!1},{title:"\u56E2\u7EC4\u6210\u4EA4\u8D85\u65F6\u5929\u6570",dataIndex:"groupDealTimeout",search:!1},{title:"\u56E2\u7EC4\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570",dataIndex:"groupReceiveTimeout",search:!1},{title:"\u6B63\u5F0F\u4E2A\u4EBA\u56DE\u8BBF\u8D85\u65F6\u5929\u6570",dataIndex:"formalPersonVisitTimeout",search:!1},{title:"\u6B63\u5F0F\u4E2A\u4EBA\u6210\u4EA4\u8D85\u65F6\u5929\u6570",dataIndex:"formalPersonDealTimeout",search:!1},{title:"\u6B63\u5F0F\u4E2A\u4EBA\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570",dataIndex:"formalPersonReceiveTimeout",search:!1},{title:"\u6B63\u5F0F\u56E2\u7EC4\u56DE\u8BBF\u8D85\u65F6\u5929\u6570",dataIndex:"formalGroupVisitTimeout",search:!1},{title:"\u6B63\u5F0F\u56E2\u7EC4\u6210\u4EA4\u8D85\u65F6\u5929\u6570",dataIndex:"formalGroupDealTimeout",search:!1},{title:"\u6B63\u5F0F\u56E2\u7EC4\u672A\u9886\u53D6\u8D85\u65F6\u5929\u6570",dataIndex:"formalGroupReceiveTimeout",search:!1},{title:"\u64CD\u4F5C",valueType:"option",key:"option",fixed:"right",render:function(a,t,r,d){return(0,e.jsx)("span",{children:(0,e.jsx)("a",{onClick:function(){m((0,Z.Z)({type:"eidt"},t)),j(!0)},children:"\u7F16\u8F91"})})}}];return(0,e.jsxs)(_.ZP,{onTabChange:function(a){xe(a),D()},tabList:[{tab:"\u90E8\u95E8\u7BA1\u7406",key:"1"},{tab:"\u5C0F\u7EC4\u7BA1\u7406",key:"2"}],children:[Ze==1?(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(N.ZP,{split:"vertical",style:{minHeight:800},children:[(0,e.jsx)(se.Z,{setParentIdTree:function(a){f(a)},setParentIdFalg:function(){k(!1)},callbackRef:function(){D()}}),(0,e.jsx)(N.ZP,{headerBordered:!0,children:(0,e.jsx)(ee.ZP,{columns:Ee=="tab1"?Be:Ie,actionRef:g,cardBordered:!0,request:(0,y.Z)((0,p.Z)().mark(function n(){var a,t,r,d,l,x=arguments;return(0,p.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return a=x.length>0&&x[0]!==void 0?x[0]:{},t=x.length>1?x[1]:void 0,r=x.length>2?x[2]:void 0,d={},fe?d=a:F?d=(0,Z.Z)({parentId:F.id},a):d=(0,Z.Z)((0,Z.Z)({},a),{},{parentId:"-1"}),C.next=7,T.Z.get("/sms/system/sysDepartment",d);case 7:return l=C.sent,C.abrupt("return",{data:l.data.content,success:l.success,total:l.data.totalElements});case 9:case"end":return C.stop()}},n)})),onSubmit:function(){k(!0)},onReset:function(){k(!1),f(!1),D()},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:10},toolbar:{menu:{type:"tab",items:[{key:"tab1",label:(0,e.jsx)("span",{children:"\u90E8\u95E8\u7BA1\u7406"})},{key:"tab2",label:(0,e.jsx)("span",{children:"\u6D41\u8F6C\u914D\u7F6E"})}],onChange:function(a){ve(a)}}},dateFormatter:"string",toolBarRender:function(){return[(0,e.jsx)(R.Z,{type:"primary",style:{display:b.length>0?"":"none"},icon:(0,e.jsx)(q.Z,{}),onClick:(0,y.Z)((0,p.Z)().mark(function a(){return(0,p.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:b.splice(b.length-1),console.log("dataArr",b),f(b[b.length-1]),D();case 4:case"end":return r.stop()}},a)})),children:"\u8FD4\u56DE\u4E0A\u5C42"},"button"),(0,e.jsx)(R.Z,{style:{display:F?"block":"none"},icon:(0,e.jsx)(L.Z,{}),type:"primary",onClick:function(){if(!F){A.default.error("\u8BF7\u5148\u9009\u7740\u90E8\u95E8\u5728\u6DFB\u52A0\u4E0B\u5C5E\u90E8\u95E8");return}m((0,Z.Z)({type:"addChild"},F)),j(!0)},children:"\u6DFB\u52A0\u4E0B\u5C5E\u90E8\u95E8"},"button"),(0,e.jsx)(R.Z,{icon:(0,e.jsx)(L.Z,{}),type:"primary",onClick:function(){m({type:"add"}),j(!0)},children:"\u65B0\u5EFA\u9876\u7EA7\u90E8\u95E8"},"button")]}})})]})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(re.Z,{})}),(0,e.jsx)(ne,{modalVisible:B,setModalVisible:function(){return j(!1)},callbackRef:function(){return D()},renderData:V}),W&&(0,e.jsx)(le.Z,{CardVisible:W,CardContent:be,callbackRef:function(){return D()},setCardVisible:function(){return Q(!1)},departNameList:ge,parentIdTree:oe})]})}}}]);
