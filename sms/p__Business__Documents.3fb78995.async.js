(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[35],{22:function(ne,j,e){"use strict";var x=e(39428),v=e(11849),p=e(3182),E=e(2824),K=e(66801),P=e(63863),r=e(67294),l=e(85893);j.Z=function(t){var w=t.columns,M=t.actionRef,d=t.formRef,Z=t.cardBordered,i=Z===void 0?!0:Z,_=t.scroll,k=_===void 0?!1:_,S=t.request,q=t.beforeSearchSubmit,$=t.toolbar,a=$===void 0?void 0:$,Y=t.pagesizes,ee=Y===void 0?10:Y,G=t.rowKey,O=G===void 0?"id":G,c=t.toolBarRender,y=c===void 0?[]:c,D=t.dateFormatter,B=D===void 0?"string":D,T=t.rowSelection,V=T===void 0?!1:T,m=t.expandable,n=m===void 0?void 0:m,f=t.tableAlertOptionRender,b=f===void 0?void 0:f,h=t.onRow,A=t.params,C=A===void 0?"":A,R=t.dataSource,o=R===void 0?void 0:R,W=t.tableStyle,F=W===void 0?void 0:W,te=t.footer,H=te===void 0?void 0:te,z=t.onReset,g=z===void 0?void 0:z,I=t.onSubmit,L=I===void 0?void 0:I,se=t.onFn,re=se===void 0?void 0:se,J=t.getTotalElements,de=J===void 0?void 0:J,_e=t.getData,ce=_e===void 0?void 0:_e,me=t.loding,fe=me===void 0?void 0:me,ve=t.search,Oe=ve===void 0?void 0:ve,Ee=t.searchData,Re=Ee===void 0?{}:Ee,je=t.headerTitle,be=t.editable,xe=be===void 0?void 0:be,he=t.className,De=he===void 0?"tables":he,ge=t.rowClassName,Ze=ge===void 0?void 0:ge,pe=!1;S&&(pe=S.sortList);var N={_orderBy:"",_direction:""},Se=(0,r.useState)(ee),Pe=(0,E.Z)(Se,2),Te=Pe[0],Ce=Pe[1],ye=(0,r.useState)({}),Me=(0,E.Z)(ye,2),Fe=Me[0],Be=Me[1];return(0,l.jsx)(K.ZP,{columns:w,className:De,actionRef:M,formRef:d,cardBordered:i,scroll:k,headerTitle:je,tableStyle:F,dataSource:o,rowClassName:Ze,request:function(){var le=(0,p.Z)((0,x.Z)().mark(function oe(U,ie,Ae){var ae,u,Q;return(0,x.Z)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return Object.keys(U).forEach(function(s){(U[s]=="null"||U[s]==null)&&(U["".concat(s,"-isNull")]=!0,delete U[s])}),Object.keys(ie).length>0?Object.keys(ie).forEach(function(s){var ue;N._orderBy=s,((ue=ie[s])===null||ue===void 0?void 0:ue.indexOf("desc"))==0?N._direction="desc":N._direction="asc"}):pe?Object.keys(S.sortList).forEach(function(s){N._orderBy=s,N._direction=S.sortList[s]}):N={_orderBy:"",_direction:""},ae=U,Object.keys(ae).forEach(function(s){ae[s]===""&&delete ae[s]}),u=(0,v.Z)((0,v.Z)((0,v.Z)((0,v.Z)({},Ae),S.params),ae),Re),Object.keys(u).forEach(function(s){(u[s]==""||u[s]==[""]||u[s]=="-isNull")&&u[s]!==0&&u[s]!==!1&&(u["".concat(s)+"-isNull"]=!0,delete u[s]),u[s]===null&&delete u[s],u[s]=="All"&&delete u[s]}),N._orderBy!==""&&Object.assign(u,N),Be(u),X.next=10,P.Z.get(S.url,(0,v.Z)({},u));case 10:return Q=X.sent,re&&re(Q.data.content),ce&&ce(u),fe&&fe(!1),de&&de(Q.data.totalElements),X.abrupt("return",{data:Q.data.content,success:Q.success,total:Q.data.totalElements});case 16:case"end":return X.stop()}},oe)}));return function(oe,U,ie){return le.apply(this,arguments)}}(),rowKey:O,pagination:{pageSize:Te,showSizeChanger:!0,onChange:function(oe,U){Ce(U)}},toolBarRender:function(){return y},rowSelection:V,params:C,expandable:n,dateFormatter:B,tableAlertOptionRender:b,toolbar:a,onRow:h,beforeSearchSubmit:q,onReset:g,onSubmit:L,search:Oe,editable:xe,footer:H,columnsState:{persistenceKey:De,persistenceType:"localStorage"}})}},6821:function(ne,j,e){"use strict";var x=e(39428),v=e(3182),p=e(43185),E=e(43027),K=e(34792),P=e(48086),r=e(11849),l=e(2824),t=e(80876),w=e(28975),M=e(67294),d=e(61261),Z=e(41574),i=e(85893);j.Z=function(_){var k=_.width,S=_.action,q=_.name,$=_.fieldProps,a=$===void 0?{}:$,Y=_.label,ee=_.rules,G=_.renderData,O=_.fileUrl,c=(0,M.useState)(!1),y=(0,l.Z)(c,2),D=y[0],B=y[1],T=(0,M.useState)(),V=(0,l.Z)(T,2),m=V[0],n=V[1],f=(0,M.useState)(),b=(0,l.Z)(f,2),h=b[0],A=b[1],C=(0,M.useState)(!1),R=(0,l.Z)(C,2),o=R[0],W=R[1],F=sessionStorage.getItem("tokenName"),te=sessionStorage.getItem("tokenValue"),H={};return H[F]=te,(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.Z,{width:k,action:S,name:q,label:Y,fieldProps:(0,r.Z)((0,r.Z)({},a),{},{multiple:!0,listType:"picture",headers:(0,r.Z)({},H),defaultFileList:[],beforeUpload:function(g){if(g.size>4096e4)return P.default.error("\u4E0A\u6B21\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC740M"),E.Z.LIST_IGNORE},onPreview:function(){var z=(0,v.Z)((0,x.Z)().mark(function I(L){var se;return(0,x.Z)().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:console.log("file",L),L.thumbUrl?(n(L.thumbUrl),B(!0)):(se=L.name.slice(L.name.indexOf(".")),se==".pdf"?(0,d.Z)(G.id,L.name,O,A,W):(0,d.Z)(G.id,L.name,O,n,B));case 2:case"end":return J.stop()}},I)}));function g(I){return z.apply(this,arguments)}return g}(),onChange:function(g){var I=g.file.status;console.log("info",g),I==="done"?P.default.success("".concat(g.file.name," \u4E0A\u4F20\u6210\u529F.")):I==="error"&&P.default.error("".concat(g.file.name," \u4E0A\u4F20\u5931\u8D25."))}}),rules:ee}),D&&(0,i.jsx)(w.Z,{imgSrc:m,isModalVisibles:D,setisModalVisibles:function(g){return B(g)}}),(0,i.jsx)(Z.Z,{previewVisible:o,setPreviewVisible:function(){return W(!1)},previewImage:h})]})}},36544:function(ne,j,e){"use strict";e.r(j),e.d(j,{default:function(){return G}});var x=e(62350),v=e(24565),p=e(34792),E=e(48086),K=e(11849),P=e(57663),r=e(71577),l=e(2824),t=e(22),w=e(51042),M=e(71906),d=e(67294),Z=e(39428),i=e(3182),_=e(37476),k=e(5966),S=e(90672),q=e(6821),$=e(63863),a=e(85893),Y=function(O){var c=O.renderData,y=O.ModalsVisible,D=O.setModalsVisible,B=O.callbackRef,T=(0,d.useRef)();(0,d.useEffect)(function(){if(c.eidtType=="eidt"){var m,n=[];c.files&&(c.files.split(",").forEach(function(f,b){n.push({uid:b+1,name:f,response:{data:f}})}),c.files=n),(m=T.current)===null||m===void 0||m.setFieldsValue(c)}},[]);var V=function(n){if(n.files){var f=[];n.files.forEach(function(b){f.push(b.response.data)}),n.files=f.join(",")}return c.eidtType=="eidt"&&(n.id=c.id),n.type=0,new Promise(function(){var b=(0,i.Z)((0,Z.Z)().mark(function h(A){return(0,Z.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:$.Z.post("/sms/business/bizFile",n).then(function(o){o.status=="success"&&(E.default.success("\u64CD\u4F5C\u6210\u529F"),D(),B(),A(o))}).catch(function(o){A(!0)});case 1:case"end":return R.stop()}},h)}));return function(h){return b.apply(this,arguments)}}())};return(0,a.jsxs)(_.Y,{title:"\u6587\u4EF6\u4E0A\u4F20",visible:y,formRef:T,width:1200,modalProps:{onCancel:function(){return D(!1)}},onFinish:function(){var m=(0,i.Z)((0,Z.Z)().mark(function n(f){return(0,Z.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,V(f);case 2:case"end":return h.stop()}},n)}));return function(n){return m.apply(this,arguments)}}(),children:[(0,a.jsx)(k.Z,{label:"\u6587\u4EF6\u540D\u79F0",name:"name",rules:[{required:!0}]}),(0,a.jsx)(S.Z,{label:"\u5907\u6CE8\u8BF4\u660E",name:"description"}),(0,a.jsx)(q.Z,{width:1100,label:"\u4E0A\u4F20\u9644\u4EF6",name:"files",action:"/sms/business/bizFile/upload",fileUrl:"/sms/business/bizFile/download",rules:[{required:!0}]})]})},ee=e(68503),G=function(){var O=(0,d.useState)(!1),c=(0,l.Z)(O,2),y=c[0],D=c[1],B=(0,d.useState)(null),T=(0,l.Z)(B,2),V=T[0],m=T[1],n=function(){f.current.reload()},f=(0,d.useRef)(),b=[{title:"\u6587\u4EF6\u540D\u79F0",dataIndex:"name",sorter:!0},{title:"\u8BF4\u660E",dataIndex:"description",sorter:!0},{title:"\u4E0A\u4F20\u65F6\u95F4",dataIndex:"updateTime",sorter:!0,valueType:"dateRange",render:function(R,o){return(0,a.jsx)("span",{children:o.updateTime})}},{title:"\u64CD\u4F5C",render:function(R,o){return[(0,a.jsx)(r.Z,{type:"primary",style:{marginRight:"10px"},size:"small",onClick:function(){o.files.split(",").forEach(function(F,te){var H=o.name+F.slice(F.indexOf("."));(0,ee.Z)("/sms/business/bizFile/download",o.id,F,H)})},children:"\u4E0B\u8F7D"}),(0,a.jsx)(r.Z,{type:"primary",style:{marginRight:"10px"},size:"small",onClick:function(){m((0,K.Z)({eidtType:"eidt"},o)),D(!0)},children:"\u7F16\u8F91"}),(0,a.jsx)(v.Z,{title:"\u662F\u5426\u5220\u9664\uFF1F",onConfirm:function(){$.Z.delete("/sms/business/bizFile/download",{id:o.id}).then(function(F){F.status=="success"&&(E.default.success("\u5220\u9664\u6210\u529F!"),n())})},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,a.jsx)(r.Z,{type:"primary",size:"small",style:{marginTop:"10px"},hidden:o.confirm===!1,danger:!0,children:"\u5220\u9664"},"delete")},o.id)]}}],h=[(0,a.jsx)(r.Z,{type:"primary",icon:(0,a.jsx)(w.Z,{}),onClick:function(){m({eidtType:"add",type:"2"}),D(!0)},children:"\u65B0\u589E\u4E0B\u8F7D\u6587\u4EF6"})],A={updateTime:"desc"};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.ZP,{children:(0,a.jsx)(t.Z,{actionRef:f,columns:b,request:{url:"/sms/business/bizFile",sortList:A,params:{type:0}},toolBarRender:h})}),y&&(0,a.jsx)(Y,{renderData:V,ModalsVisible:y,setModalsVisible:function(){return D(!1)},callbackRef:function(){return n()}})]})}},28975:function(ne,j,e){"use strict";var x=e(12968),v=e(20352),p=e(85893);j.Z=function(E){var K=E.isModalVisibles,P=E.imgSrc,r=E.setisModalVisibles;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{style:{display:"none"},children:(0,p.jsx)(v.Z,{width:200,style:{display:"none"},preview:{visible:K,src:P,onVisibleChange:function(t){r(t)}}})})})}},61261:function(ne,j,e){"use strict";var x=e(39428),v=e(3182),p=e(68503),E=function(){var K=(0,v.Z)((0,x.Z)().mark(function P(r,l,t,w,M){var d;return(0,x.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(d=l.slice(l.indexOf(".")),!(d!=".png"&&d!=".jpg"&&d!=".jpeg"&&d!=".pdf")){i.next=6;break}return i.next=4,(0,p.Z)(t,r,l,l);case 4:i.next=8;break;case 6:return i.next=8,(0,p.Z)(t,r,l).then(function(_){w(_),M(!0)});case 8:case"end":return i.stop()}},P)}));return function(r,l,t,w,M){return K.apply(this,arguments)}}();j.Z=E}}]);
