(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8633],{19619:function(R,Z,n){"use strict";n.d(Z,{Z:function(){return D}});var g=n(28991),y=n(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},c=h,F=n(27029),O=function(m,o){return y.createElement(F.Z,(0,g.Z)((0,g.Z)({},m),{},{ref:o,icon:c}))},L=y.forwardRef(O),D=L},85642:function(R,Z,n){"use strict";var g=n(32059),y=n(62350),h=n(24565),c=n(11849),F=n(77576),O=n(12028),L=n(34792),D=n(48086),re=n(57663),m=n(71577),o=n(39428),A=n(3182),ue=n(86582),Ie=n(71153),x=n(60331),Oe=n(22385),le=n(94199),C=n(2824),f=n(67294),de=n(22),P=n(63863),_=n(37490),S=n(54493),B=n(66573),oe=n(71906),_e=n(1870),K=n(40110),U=n(19619),W=n(8212),w=n(79189),ce=n(82061),me=n(42025),fe=n(79438),he=n(73230),t=n(85893);Z.Z=(0,f.forwardRef)(function(u,pe){var Ee=u.setRenderData,xe=u.setModalsVisible,l=u.params,z=u.BadgesNumbers,N=u.ChangeKey,ve=(0,f.useState)(null),V=(0,C.Z)(ve,2),b=V[0],T=V[1],ge=(0,f.useState)(!1),k=(0,C.Z)(ge,2),H=k[0],I=k[1],De=(0,f.useState)(!1),$=(0,C.Z)(De,2),G=$[0],Y=$[1],Ce=(0,f.useState)(!1),J=(0,C.Z)(Ce,2),Q=J[0],X=J[1],Ze=(0,f.useState)(!1),q=(0,C.Z)(Ze,2),ye=q[0],ee=q[1],Ae=(0,f.useState)(!0),te=(0,C.Z)(Ae,2),Be=te[0],Te=te[1],ne=u.params.type,je=ne===void 0?"2":ne,ae=(0,f.useRef)(),se="/sms/business/bizCharge",be="/sms/business/bizStudentUser",v=je=="2"?"\u7F34\u8D39":"\u9000\u8D39",p=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;ae.current.reloadAndRest(),z&&z()};(0,f.useImperativeHandle)(pe,function(){return{callbackRef:function(){p()}}}),(0,f.useEffect)(function(){console.log("1",_.Z.getUserId())},[]);var Me=function(i){var e=_.Z.getDepartmentName(i);return e.length>1&&(e=e.slice(0,e.length-1)),e},Pe=[{title:v+"\u7F16\u53F7",dataIndex:"num",width:130,fixed:"left",sorter:!0},{title:(0,t.jsxs)(t.Fragment,{children:["\u5BA1\u6838\u8FDB\u5EA6",(0,t.jsx)(le.Z,{placement:"top",title:"\u9000\u8D39\u5BA1\u6838\u6D41\u7A0B\uFF1A \u2460\u6559\u52A1\u8D1F\u8D23\u4EBA\u5BA1\u6838 \u2192 \u2461\u6559\u52A1\u4E3B\u7BA1\u5BA1\u6838 \u2192\u2462\u8D22\u52A1\u4E3B\u7BA1\u5BA1\u6838 \u2192\u2463\u603B\u7ECF\u529E\u5BA1\u6838",children:(0,t.jsx)(_e.Z,{style:{marginLeft:4}})})]}),sorter:!0,dataIndex:"auditType",hideInTable:l.type==2,filters:!0,filterMultiple:!1,valueType:"select",width:180,align:"center",valueEnum:{"":{text:"\u6559\u52A1\u4E3B\u7BA1"},"1":{text:"\u6559\u52A1\u8D1F\u8D23\u4EBA"},"2":{text:"\u8D22\u52A1"},"3":{text:"\u603B\u7ECF\u529E"},"4":{text:"\u9000\u8D39\u5B8C\u6210"}},render:function(i,e){return(0,t.jsx)("span",{children:e.confirm===!1?(0,t.jsxs)(x.Z,{color:"#FF0000",children:[_.Z.getCascaderName("auditType",e.auditType),"\u672A\u901A\u8FC7"]}):(0,t.jsx)(x.Z,{color:e.auditNum==4?"#87d068":"#f50",children:e.auditNum==4?"\u9000\u8D39\u5B8C\u6210":_.Z.getCascaderName("auditType",e!=null&&e.auditNum?e.auditNum+1:1)})})}},{title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"confirm",width:100,sorter:!0,filters:!0,filterMultiple:!1,hideInTable:l.type==3,valueType:"select",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},valueEnum:{"":{text:(0,t.jsx)(x.Z,{color:"#f50",children:"\u672A\u5BA1\u6838"}),status:"Processing"},false:{text:(0,t.jsx)(x.Z,{color:"#FF0000",children:"\u672A\u901A\u8FC7"}),status:"Error"},true:{text:(0,t.jsx)(x.Z,{color:"#87d068",children:"\u5DF2\u5BA1\u6838"}),status:"Success"}},render:function(i,e){return(0,t.jsx)(x.Z,{color:e.confirm===!0?"#87d068":e.confirm===!1?"#FF0000":"#f50",children:e.confirm===!0?"\u5BA1\u6838\u901A\u8FC7":e.confirm===!1?"\u672A\u901A\u8FC7":"\u672A\u5BA1\u6838"})}},{title:"\u5B66\u5458",dataIndex:"oldStudentName",width:80,fixed:"left",sorter:!0,render:function(i,e){return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.oldStudentName}),!e.enable&&(0,t.jsx)(x.Z,{color:"red",children:"\u5DF2\u5E9F\u9664"})]})}},{title:"\u5BA1\u6838\u65E5\u671F",key:"auditTime",sorter:!0,width:120,dataIndex:"auditTime",valueType:"dateRange",render:function(i,e){return(0,t.jsx)("span",{children:e.auditTime})}},{title:v+"\u65E5\u671F",key:"chargeTime",sorter:!0,width:120,dataIndex:"chargeTime",valueType:"dateRange",render:function(i,e){return(0,t.jsx)("span",{children:e.chargeTime})}},{title:"\u5230\u8D26\u65E5\u671F",key:"paymentTime",sorter:!0,width:120,dataIndex:"paymentTime",valueType:"dateRange",render:function(i,e){return(0,t.jsx)("span",{children:e.paymentTime})}},{title:"\u9879\u76EE\u603B\u79F0",dataIndex:"parentProjects",key:"parentProjects",sorter:!0,valueType:"cascader",fieldProps:{options:_.Z.getList("dict_reg_job"),showSearch:{filter:S.Z}},width:150,render:function(i,e){return(0,t.jsx)("span",{children:_.Z.getCascaderAllName("dict_reg_job",e.oldProject)},"parentProjects")}},{title:v+"\u9879\u76EE",dataIndex:"oldProject",width:150,key:"oldProject",sorter:!0,valueType:"cascader",fieldProps:{options:_.Z.getCascader("dict_reg_job"),showSearch:{filter:S.Z}},render:function(i,e){return(0,t.jsx)("span",{children:e.oldProject&&(0,ue.Z)(new Set(e.oldProject.split(","))).map(function(r,s){return(0,t.jsxs)("span",{children:[_.Z.getCascaderName("dict_reg_job",r)," ",(0,t.jsx)("br",{})]},"old-project-".concat(r,"-").concat(s))})})}},{title:v+"\u91D1\u989D",dataIndex:"amount",sorter:!0,width:80,search:!1},{title:"\u6D88\u8D39\u91D1\u989D",dataIndex:"oldConsumptionAmount",sorter:!0,width:80,search:!1,hideInTable:l.type==2},{title:"\u4F18\u60E0\u91D1\u989D",sorter:!0,width:80,dataIndex:"discount",search:!1,hideInTable:l.type==3},{title:v+"\u65B9\u5F0F",dataIndex:"method",width:80,valueType:"select",valueEnum:_.Z.getSearch("dict_stu_refund_type"),render:function(i,e){return(0,t.jsx)("span",{children:_.Z.getCascaderName("dict_stu_refund_type",e.method)})}},{title:"\u9000\u6B3E\u7C7B\u578B",dataIndex:"refundType",width:80,valueType:"select",hideInTable:l.type==2,valueEnum:_.Z.getSearch("dict_refundType"),render:function(i,e){return(0,t.jsx)("span",{children:_.Z.getCascaderName("dict_refundType",e.refundType)})}},{title:"\u5907\u6CE8",dataIndex:"description",ellipsis:!0,width:150,tip:"\u5907\u6CE8\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u8D22\u52A1\u6458\u8981",width:150,dataIndex:"description2",search:!1,ellipsis:!0,tip:"\u5907\u6CE8\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:v+"\u4EBA",dataIndex:"userName",width:80},{title:v+"\u4EBA\u90E8\u95E8",dataIndex:"departmentId",width:80,render:function(i,e){return(0,t.jsx)("span",{children:Me(e.departmentId).join("-")})}},{title:"\u7ECF\u529E\u4EBA",dataIndex:"agentName",width:80,hideInTable:l.type==2},{title:"\u53D1\u7968\u4FE1\u606F",width:80,sorter:!0,hideInTable:l.type==3,dataIndex:"hasInvoice",render:function(i,e){return(0,t.jsx)(t.Fragment,{children:e.hasInvoice?(0,t.jsx)(m.Z,{type:"primary",size:"small",icon:(0,t.jsx)(K.Z,{}),onClick:function(){var r=(0,A.Z)((0,o.Z)().mark(function s(d){return(0,o.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:T(e),Y(!0);case 2:case"end":return E.stop()}},s)}));return function(s){return r.apply(this,arguments)}}(),children:"\u67E5\u770B"},"hasInvoicelook"):""})}},{title:"\u5BA1\u6838\u5EFA\u8BAE",dataIndex:"remark",width:150,search:!1,ellipsis:!0,sorter:!0,tip:"\u5EFA\u8BAE\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u662F\u5426\u8BA1\u7B97\u4E1A\u7EE9",dataIndex:"isCalculation",valueType:"select",width:100,search:!1,order:8,valueEnum:{All:{text:"\u5168\u90E8",status:"All"},false:{text:"\u4E0D\u8BA1\u7B97",status:"Error"},true:{text:"\u8BA1\u7B97",status:"Success"}},render:function(i,e,r,s){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(O.Z,{checkedChildren:"\u8BA1\u7B97",unCheckedChildren:"\u4E0D\u8BA1\u7B97",defaultChecked:e.isCalculation,loading:ye,onChange:(0,A.Z)((0,o.Z)().mark(function d(){var j;return(0,o.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return ee(!0),M.next=3,P.Z.post("/sms/business/bizCharge/reports/setIsCalculation",{ids:e.id,isCalculation:!e.isCalculation});case 3:j=M.sent,j.status!="success"&&D.default.error(j.msg),ee(!1),p();case 7:case"end":return M.stop()}},d)}))},e.id)})}},{title:"\u662F\u5426\u5E9F\u9664",dataIndex:"enable",filters:!0,hideInTable:!0,sorter:!0,filterMultiple:!1,valueType:"select",valueEnum:{false:{text:"\u5DF2\u5E9F\u9664",status:"Error"},true:{text:"\u672A\u5E9F\u9664",status:"Success"}}},{title:"\u5BA1\u6838\u5458",dataIndex:"auditor",search:!1,sorter:!0},{title:"\u64CD\u4F5C",valueType:"option",key:"option",fixed:"right",width:120,render:function(i,e){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Z,{type:"primary",size:"small",icon:(0,t.jsx)(K.Z,{}),style:{marginRight:"10px",marginBottom:"8px"},onClick:function(){var r=(0,A.Z)((0,o.Z)().mark(function s(d){return(0,o.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:d.stopPropagation(),T(e),X(!0);case 3:case"end":return E.stop()}},s)}));return function(s){return r.apply(this,arguments)}}(),children:"\u67E5\u770B"},"look-old-charge"),(0,t.jsx)(h.Z,{title:"\u8D22\u52A1\u8BA2\u5355\u5BA1\u6838",okText:"\u901A\u8FC7",cancelText:"\u672A\u901A\u8FC7",onConfirm:function(s){s==null||s.stopPropagation(),P.Z.post("/sms/business/bizAudit/audit/0",{confirm:!0,entityId:e.id}).then(function(d){d.status=="success"&&(D.default.success("\u64CD\u4F5C\u6210\u529F!"),p())})},onCancel:function(){T((0,c.Z)((0,c.Z)({},e),{},{confirm:!1,type:0})),I(!0)},children:(0,t.jsx)(m.Z,{type:"primary",hidden:l.list||l.type==3,size:"small",icon:(0,t.jsx)(U.Z,{}),style:{marginRight:"10px",marginBottom:"8px"},children:"\u5BA1\u6838"},"look-old-charge-2")}),(0,t.jsx)(h.Z,{title:"\u9000\u8D39\u5BA1\u6838",okText:"\u901A\u8FC7",cancelText:"\u672A\u901A\u8FC7",onConfirm:function(s){s==null||s.stopPropagation(),T((0,c.Z)((0,c.Z)({},e),{},{confirm:!0})),I(!0)},onCancel:function(){T((0,c.Z)((0,c.Z)({},e),{},{confirm:!1})),I(!0)},children:(0,t.jsx)(m.Z,{type:"primary",hidden:e.isSubmit===!1||e.auditType==0||l.type=="2"||l.audit,size:"small",icon:(0,t.jsx)(U.Z,{}),style:{marginRight:"10px",marginBottom:"8px"},children:"\u5BA1\u6838"},"look-old-charge-3")}),(0,t.jsx)(m.Z,{type:"primary",size:"small",icon:(0,t.jsx)(W.Z,{}),onClick:function(){Ee((0,c.Z)({eidtType:"eidt"},e)),xe(!0)},children:"\u7F16\u8F91"}),(0,t.jsx)(m.Z,{type:"primary",size:"small",style:{marginTop:"10px"},icon:(0,t.jsx)(w.Z,{}),hidden:!(l.type==2&&e.auditNum==0),onClick:(0,A.Z)((0,o.Z)().mark(function r(){return(0,o.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:(0,B.Z)("/sms/business/bizCharge/export",e.id,void 0,".png");case 1:case"end":return d.stop()}},r)})),children:"\u5BFC\u51FA\u6536\u636E\u7167\u7247"},"dapchu-old-charge-1"),(0,t.jsx)(m.Z,{type:"primary",size:"small",style:{marginTop:"10px"},icon:(0,t.jsx)(w.Z,{}),onClick:(0,A.Z)((0,o.Z)().mark(function r(){return(0,o.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:l.type=="2"?(0,B.Z)("/sms/business/bizCharge/export/3",e.id):(0,B.Z)("/sms/business/bizCharge/export/2",e.id);case 1:case"end":return d.stop()}},r)})),children:"\u5BFC\u51FA\u6536\u636EWord"},"dapchu-old-charge-2"),(0,t.jsx)(h.Z,{title:"\u662F\u5426\u5E9F\u9664\uFF1F",onConfirm:function(){P.Z.post("/sms/business/bizCharge/disable/"+e.id).then(function(s){s.status=="success"&&(D.default.success("\u5E9F\u9664\u6210\u529F"),p())})},okText:"\u5E9F\u9664",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(m.Z,{type:"primary",size:"small",style:{marginTop:"10px"},danger:!0,icon:(0,t.jsx)(ce.Z,{}),children:"\u5E9F\u9664"},"delete")},e.id),(0,t.jsx)(m.Z,{type:"primary",size:"small",hidden:e.isSubmit!==!1,icon:(0,t.jsx)(W.Z,{}),style:{marginTop:"10px"},onClick:function(){P.Z.post(se,{id:e.id,isSubmit:!0}).then(function(s){s.status=="success"&&(D.default.success("\u63D0\u4EA4\u6210\u529F"),p())})},children:"\u91CD\u65B0\u63D0\u4EA4"},"editable-old-charge")]})}}],ie=(0,g.Z)({},"num,updateTime","desc,desc");return(N==4||N=="list")&&(ie=(0,g.Z)({},"confirm,auditType","asc,asc")),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(oe.ZP,{children:(0,t.jsx)(de.Z,{actionRef:ae,columns:Pe,request:{url:se,params:l,sortList:ie},scroll:{x:1500},className:"OldCharge",loding:function(i){return Te(i)},rowSelection:{},search:{labelWidth:120,defaultCollapsed:!1},toolBarRender:u==null?void 0:u.toolBarRender,toolbar:u==null?void 0:u.toolbar,tableAlertOptionRender:u==null?void 0:u.tableAlertOptionRender})}),H&&(0,t.jsx)(me.Z,{setModalVisible:function(){return I(!1)},modalVisible:H,callbackRef:function(){return p()},renderData:b}),G&&(0,t.jsx)(fe.Z,{setModalVisible:function(){return Y(!1)},modalVisible:G,callbackRef:function(){return p()},renderData:b}),Q&&(0,t.jsx)(he.Z,{setModalVisible:function(){return X(!1)},modalVisible:Q,callbackRef:function(){return p()},renderData:b})]})})},93839:function(R,Z){"use strict";var n=function(y){var h=new Date(y),c="".concat(h.getFullYear(),"-").concat((h.getMonth()+1+"").padStart(2,"0"),"-").concat((h.getDate()+"").padStart(2,"0")," 00:00:00");return c};Z.Z=n}}]);
