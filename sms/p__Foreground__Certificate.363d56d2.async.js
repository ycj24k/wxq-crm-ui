(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1533],{8214:function(Re,K,e){"use strict";var w=e(28991),D=e(81253),x=e(85893),W=e(67294),V=e(53048),M=["fieldProps","request","params","proFieldProps"],P=function(a,$){var y=a.fieldProps,d=a.request,f=a.params,C=a.proFieldProps,R=(0,D.Z)(a,M);return(0,x.jsx)(V.Z,(0,w.Z)({valueType:"cascader",fieldProps:y,ref:$,request:d,params:f,filedConfig:{customLightMode:!0},proFieldProps:C},R))};K.Z=W.forwardRef(P)},31199:function(Re,K,e){"use strict";var w=e(28991),D=e(81253),x=e(85893),W=e(67294),V=e(53048),M=["fieldProps","min","proFieldProps","max"],P=function(a,$){var y=a.fieldProps,d=a.min,f=a.proFieldProps,C=a.max,R=(0,D.Z)(a,M);return(0,x.jsx)(V.Z,(0,w.Z)({valueType:"digit",fieldProps:(0,w.Z)({min:d,max:C},y),ref:$,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:f},R))};K.Z=W.forwardRef(P)},22:function(Re,K,e){"use strict";var w=e(39428),D=e(11849),x=e(3182),W=e(2824),V=e(66801),M=e(63863),P=e(67294),X=e(85893);K.Z=function(a){var $=a.columns,y=a.actionRef,d=a.formRef,f=a.cardBordered,C=f===void 0?!0:f,R=a.scroll,A=R===void 0?!1:R,Y=a.request,m=a.beforeSearchSubmit,_=a.toolbar,F=_===void 0?void 0:_,s=a.pagesizes,ie=s===void 0?10:s,T=a.rowKey,n=T===void 0?"id":T,k=a.toolBarRender,q=k===void 0?[]:k,ae=a.dateFormatter,z=ae===void 0?"string":ae,ue=a.rowSelection,ce=ue===void 0?!1:ue,Ce=a.expandable,Fe=Ce===void 0?void 0:Ce,be=a.tableAlertOptionRender,ge=be===void 0?void 0:be,Ze=a.onRow,fe=a.params,Se=fe===void 0?"":fe,me=a.dataSource,S=me===void 0?void 0:me,l=a.tableStyle,t=l===void 0?void 0:l,le=a.footer,j=le===void 0?void 0:le,I=a.onReset,Oe=I===void 0?void 0:I,Ae=a.onSubmit,Ke=Ae===void 0?void 0:Ae,G=a.onFn,re=G===void 0?void 0:G,ee=a.getTotalElements,De=ee===void 0?void 0:ee,H=a.getData,v=H===void 0?void 0:H,U=a.loding,_e=U===void 0?void 0:U,ve=a.search,p=ve===void 0?void 0:ve,oe=a.searchData,Pe=oe===void 0?{}:oe,je=a.headerTitle,pe=a.editable,Be=pe===void 0?void 0:pe,B=a.className,b=B===void 0?"tables":B,c=a.rowClassName,L=c===void 0?void 0:c,O=!1;Y&&(O=Y.sortList);var g={_orderBy:"",_direction:""},J=(0,P.useState)(ie),te=(0,W.Z)(J,2),we=te[0],Te=te[1],Ie=(0,P.useState)({}),Ue=(0,W.Z)(Ie,2),Ve=Ue[0],Le=Ue[1];return(0,X.jsx)(V.ZP,{columns:$,className:b,actionRef:y,formRef:d,cardBordered:C,scroll:A,headerTitle:je,tableStyle:t,dataSource:S,rowClassName:L,request:function(){var xe=(0,x.Z)((0,w.Z)().mark(function Me(Q,he,Ne){var de,E,se;return(0,w.Z)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return Object.keys(Q).forEach(function(o){(Q[o]=="null"||Q[o]==null)&&(Q["".concat(o,"-isNull")]=!0,delete Q[o])}),Object.keys(he).length>0?Object.keys(he).forEach(function(o){var ye;g._orderBy=o,((ye=he[o])===null||ye===void 0?void 0:ye.indexOf("desc"))==0?g._direction="desc":g._direction="asc"}):O?Object.keys(Y.sortList).forEach(function(o){g._orderBy=o,g._direction=Y.sortList[o]}):g={_orderBy:"",_direction:""},de=Q,Object.keys(de).forEach(function(o){de[o]===""&&delete de[o]}),E=(0,D.Z)((0,D.Z)((0,D.Z)((0,D.Z)({},Ne),Y.params),de),Pe),Object.keys(E).forEach(function(o){(E[o]==""||E[o]==[""]||E[o]=="-isNull")&&E[o]!==0&&E[o]!==!1&&(E["".concat(o)+"-isNull"]=!0,delete E[o]),E[o]===null&&delete E[o],E[o]=="All"&&delete E[o]}),g._orderBy!==""&&Object.assign(E,g),Le(E),ne.next=10,M.Z.get(Y.url,(0,D.Z)({},E));case 10:return se=ne.sent,re&&re(se.data.content),v&&v(E),_e&&_e(!1),De&&De(se.data.totalElements),ne.abrupt("return",{data:se.data.content,success:se.success,total:se.data.totalElements});case 16:case"end":return ne.stop()}},Me)}));return function(Me,Q,he){return xe.apply(this,arguments)}}(),rowKey:n,pagination:{pageSize:we,showSizeChanger:!0,onChange:function(Me,Q){Te(Q)}},toolBarRender:function(){return q},rowSelection:ce,params:Se,expandable:Fe,dateFormatter:z,tableAlertOptionRender:ge,toolbar:F,onRow:Ze,beforeSearchSubmit:m,onReset:Oe,onSubmit:Ke,search:p,editable:Be,footer:j,columnsState:{persistenceKey:b,persistenceType:"localStorage"}})}},98523:function(Re,K,e){"use strict";e.r(K),e.d(K,{default:function(){return Ke}});var w=e(71194),D=e(50146),x=e(57663),W=e(71577),V=e(54029),M=e(79166),P=e(32059),X=e(49111),a=e(19650),$=e(62350),y=e(24565),d=e(39428),f=e(11849),C=e(3182),R=e(71153),A=e(60331),Y=e(34792),m=e(48086),_=e(2824),F=e(71906),s=e(67294),ie=e(22),T=e(37490),n=e(63863),k=e(28991),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},ae=q,z=e(27029),ue=function(re,ee){return s.createElement(z.Z,(0,k.Z)((0,k.Z)({},re),{},{ref:ee,icon:ae}))},ce=s.forwardRef(ue),Ce=ce,Fe=e(73218),be=e(15873),ge=e(51042),Ze=e(45510),fe=e(37476),Se=e(5966),me=e(64317),S=e(90672),l=e(21010),t=e(85893),le=function(G){var re,ee,De=(0,l.tT)("@@initialState"),H=De.initialState,v=(0,s.useRef)(),U=G.modalVisible,_e=G.setModalVisible,ve=G.callbackRef,p=G.renderData,oe=(0,s.useState)({id:H==null||(re=H.currentUser)===null||re===void 0?void 0:re.userid,userName:H==null||(ee=H.currentUser)===null||ee===void 0?void 0:ee.name}),Pe=(0,_.Z)(oe,2),je=Pe[0],pe=Pe[1];(0,s.useEffect)(function(){if(p.type=="eidt")setTimeout((0,C.Z)((0,d.Z)().mark(function b(){var c,L;return(0,d.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:Object.keys(p).forEach(function(J){typeof p[J]=="number"&&(p[J]=p[J]+"")}),p.file&&(L=[],p.file.split(",").forEach(function(J,te){L.push({uid:te+1,name:J,response:{data:J}})}),p.file=L),pe({id:p.createBy,userName:p.userName}),v==null||(c=v.current)===null||c===void 0||c.setFieldsValue((0,f.Z)((0,f.Z)({},p),{},{createBy:p.userName}));case 4:case"end":return g.stop()}},b)})),100);else{var B;v==null||(B=v.current)===null||B===void 0||B.setFieldsValue({createBy:je.userName})}},[]);var Be=function(b){if(delete b.createBy,b.file){var c=[];b.file.forEach(function(O){c.push(O.response.data)}),b.file=c.join(",")}var L=p.type=="eidt"?"/sms/business/bizCertificateApply":"/sms/business/bizCertificateApply/submit";return new Promise(function(O){n.Z.post(L,b).then(function(g){g.status=="success"&&(m.default.success("\u64CD\u4F5C\u6210\u529F"),_e(),ve(),O(!0))}).catch(function(g){O(!0)})})};return(0,t.jsx)(fe.Y,{title:"\u8BC1\u4E66\u7533\u8BF7",formRef:v,width:600,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,maskClosable:!1,onCancel:function(){_e()}},onFinish:function(){var B=(0,C.Z)((0,d.Z)().mark(function b(c){return(0,d.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return p.id&&(c.id=p.id),O.next=3,Be(c);case 3:case"end":return O.stop()}},b)}));return function(b){return B.apply(this,arguments)}}(),visible:U,children:(0,t.jsxs)("div",{children:[(0,t.jsx)(Se.Z,{readonly:!0,name:"createBy",label:"\u7533\u8BF7\u4EBA"}),(0,t.jsx)(me.Z,{label:"\u8BC1\u4E66\u79CD\u7C7B",name:"kind",width:"md",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BC1\u4E66\u79CD\u7C7B"}],request:(0,C.Z)((0,d.Z)().mark(function B(){return(0,d.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",T.Z.getList("certificateKind"));case 1:case"end":return c.stop()}},B)}))}),(0,t.jsx)(S.Z,{name:"remark",label:"\u7533\u8BF7\u5907\u6CE8",placeholder:"\u8BF7\u8F93\u5165\u7533\u8BF7\u5907\u6CE8...",width:580,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7533\u8BF7\u5907\u6CE8..."}]}),(0,t.jsx)(me.Z,{label:"\u8D39\u7528\u7C7B\u578B",name:"chargeType",width:"md",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8D39\u7528\u7C7B\u578B"}],request:(0,C.Z)((0,d.Z)().mark(function B(){return(0,d.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",T.Z.getList("ExpenseType"));case 1:case"end":return c.stop()}},B)}))}),(0,t.jsx)(Ze.Z,{name:"startTime",fieldProps:{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss"},width:"sm",label:"\u57F9\u8BAD\u5F00\u59CB\u65F6\u95F4"}),(0,t.jsx)(Ze.Z,{name:"endTime",fieldProps:{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss"},width:"sm",label:"\u57F9\u8BAD\u7ED3\u675F\u65F6\u95F4"})]})})},j=e(84117),I=e(92786),Oe=e(89015),Ae=e(10875),Ke=function(){var G=(0,s.useRef)(),re=(0,s.useRef)(),ee=(0,s.useRef)(),De=(0,s.useState)({}),H=(0,_.Z)(De,2),v=H[0],U=H[1],_e=(0,s.useState)(!1),ve=(0,_.Z)(_e,2),p=ve[0],oe=ve[1],Pe=(0,s.useState)(!1),je=(0,_.Z)(Pe,2),pe=je[0],Be=je[1],B=(0,s.useState)(!1),b=(0,_.Z)(B,2),c=b[0],L=b[1],O=(0,s.useState)({}),g=(0,_.Z)(O,2),J=g[0],te=g[1],we=(0,s.useState)([0,0]),Te=(0,_.Z)(we,2),Ie=Te[0],Ue=Te[1],Ve=(0,s.useState)(!1),Le=(0,_.Z)(Ve,2),xe=Le[0],Me=Le[1],Q=(0,s.useState)(!1),he=(0,_.Z)(Q,2),Ne=he[0],de=he[1],E=(0,s.useState)(!1),se=(0,_.Z)(E,2),We=se[0],ne=se[1],o=(0,s.useState)(!1),ye=(0,_.Z)(o,2),Ge=ye[0],$e=ye[1],Ee=function(){G.current.reload(),Ye()},Ye=function(){n.Z.get("/sms/business/bizCertificateApply/statistics",{array:JSON.stringify([{"auditConfirm-isNull":!0},{auditConfirm:!0,hasCertificate:!1}])}).then(function(u){Ue(u.data)})};(0,s.useEffect)(function(){Ye()},[]);var ze=function(u,r,Z){n.Z.post("/sms/business/bizAudit",{auditType:10,entityId:Z,confirm:u,remark:r}).then(function(h){h.status=="success"&&(m.default.success("\u64CD\u4F5C\u6210\u529F"),L(!1),Ee())})},Je=function(u){var r="";return u.serviceName&&(r=(0,t.jsx)(A.Z,{color:"#FF0000",children:"\u672A\u7B7E\u7F72"}),u.otherSign&&(r=(0,t.jsx)(A.Z,{color:"#87d068",children:"\u5DF2\u7B7E\u7F72"}))),r},Qe=function(u){n.Z.post("/sms/business/bizCertificateApply/filing",{id:u.id}).then(function(r){r.status=="success"&&(m.default.success("\u64CD\u4F5C\u6210\u529F"),L(!1),Ee())})},Xe=function(u,r){var Z=!1,h=u.auditRemark;return new Promise(function(ke){ze(Z,h,v.id)})},qe=function(){var i=(0,C.Z)((0,d.Z)().mark(function u(r){var Z,h;return(0,d.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,n.Z.get("/sms/share/isVerify");case 2:return Z=N.sent.data,N.next=5,n.Z.get("/sms/share/isVerifyAutoSign");case 5:h=N.sent.data,Z&&h?(U((0,f.Z)((0,f.Z)({},r),{},{type:"staff"})),ne(!0)):(U([Z,h]),de(!0));case 7:case"end":return N.stop()}},u)}));return function(r){return i.apply(this,arguments)}}(),et=[{title:"\u7533\u8BF7\u4EBA",dataIndex:"userName",key:"userName",width:80,render:function(u,r){return(0,t.jsx)("a",{onClick:(0,C.Z)((0,d.Z)().mark(function Z(){var h;return(0,d.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,n.Z.get("/sms/system/sysUser",{id:r.createBy});case 2:h=N.sent.data.content[0],U((0,f.Z)({},h)),Me(!0);case 5:case"end":return N.stop()}},Z)})),children:r.userName})}},{title:"\u7533\u8BF7\u4EBA\u90E8\u95E8",dataIndex:"departmentName",key:"departmentName",render:function(u,r){return(0,t.jsx)("span",{children:T.Z.getDepartmentName(r.departmentId).join("-")})}},{title:"\u8BC1\u4E66\u79CD\u7C7B",dataIndex:"kind",key:"kind",valueType:"select",filters:!0,filterMultiple:!1,valueEnum:T.Z.getSearch("certificateKind"),render:function(u,r){return(0,t.jsx)("span",{children:T.Z.getName("certificateKind",r.kind)})}},{title:"\u8D39\u7528\u7C7B\u578B",dataIndex:"chargeType",key:"chargeType",valueType:"select",filters:!0,filterMultiple:!1,valueEnum:T.Z.getSearch("ExpenseType"),render:function(u,r){return(0,t.jsx)("span",{children:T.Z.getName("ExpenseType",r.chargeType)})}},{title:"\u7533\u8BF7\u65F6\u95F4",key:"showTime",dataIndex:"createTime",valueType:"dateTime",search:!1},{title:"\u7533\u8BF7\u5907\u6CE8",dataIndex:"remark",key:"remark",search:!1,ellipsis:!0,tip:"\u5907\u6CE8\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u57F9\u8BAD\u5F00\u59CB\u65F6\u95F4",key:"startTime",dataIndex:"startTime",valueType:"dateTime",search:!1},{title:"\u57F9\u8BAD\u7ED3\u675F\u65F6\u95F4",key:"endTime",dataIndex:"endTime",valueType:"dateTime",search:!1},{title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"auditConfirm",key:"auditConfirm",render:function(u,r){return(0,t.jsx)("span",{children:r.auditConfirm===null?(0,t.jsx)(A.Z,{icon:(0,t.jsx)(Ce,{spin:!0}),color:"#f50",children:"\u5BA1\u6838\u4E2D"}):r.auditConfirm===!1?(0,t.jsx)(A.Z,{color:"#FF0000",icon:(0,t.jsx)(Fe.Z,{}),children:"\u5BA1\u6838\u672A\u901A\u8FC7"}):(0,t.jsx)(A.Z,{color:"#87d068",icon:(0,t.jsx)(be.Z,{}),children:"\u5DF2\u901A\u8FC7"})})}},{title:"\u5BA1\u6838\u5EFA\u8BAE",dataIndex:"auditRemark",key:"auditRemark",search:!1,hideInTable:J.auditConfirm!==!1,ellipsis:!0,tip:"\u5907\u6CE8\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u5408\u540C",dataIndex:"num",key:"num",render:function(u,r){return(0,t.jsx)("a",{onClick:function(){U({viewUrl:r.viewUrl}),$e(!0)},children:"\u67E5\u770B"})}},{title:"\u7B7E\u7F72\u72B6\u6001",dataIndex:"otherSign",key:"otherSign",render:function(u,r){return(0,t.jsx)("span",{children:Je(r)})}},{title:"\u5F52\u6863\u7F16\u53F7",dataIndex:"filingNum"},{title:"\u64CD\u4F5C",search:!1,width:180,render:function(u,r){return[(0,t.jsxs)(a.Z,{children:[(0,t.jsx)("a",{onClick:function(){U((0,f.Z)((0,f.Z)({},r),{},{type:"eidt"})),oe(!0)},children:"\u7F16\u8F91"}),(0,t.jsx)(y.Z,{title:"\u5BA1\u6838",okText:"\u901A\u8FC7",cancelText:"\u672A\u901A\u8FC7",onConfirm:function(h){h==null||h.stopPropagation(),U((0,f.Z)((0,f.Z)({},r),{},{type:"Auditing"})),ze(!0,"",r.id)},onCancel:function(){U((0,f.Z)((0,f.Z)({},r),{},{type:"Auditing"})),L(!0)},children:(0,t.jsx)("a",{hidden:r.auditConfirm!==null,children:" \u884C\u653F\u5BA1\u6838"})},"look-certificate"),(0,t.jsx)("a",{onClick:function(){U({userName:r.userName,kind:r.kind,type:"eidt",applyId:r.id,typeName:"cert"}),Be(!0)},children:"\u4E0A\u4F20\u8BC1\u4E66"}),(0,t.jsx)("a",{onClick:function(){return qe(r)},hidden:r.filingNum,children:"\u7B7E\u8BA2\u534F\u8BAE"}),(0,t.jsx)(y.Z,{title:"\u5408\u540C\u5F52\u6863",okText:"\u5F52\u6863",cancelText:"\u53D6\u6D88",onConfirm:function(h){Qe(r)},onCancel:function(){},children:(0,t.jsx)("a",{hidden:r.filingNum,children:"\u5408\u540C\u5F52\u6863"})},"filing")]})]}}],tt=(0,P.Z)({},"createTime","desc"),He=void 0;return He={menu:{type:"tab",items:[{key:"all",label:(0,t.jsx)("span",{children:"\u5168\u90E8"})},{key:"-isNull",label:(0,t.jsx)(M.Z,{count:Ie[0],size:"small",offset:[5,3],children:(0,t.jsx)("span",{children:"\u672A\u5BA1\u6838"})})},{key:"true",label:(0,t.jsx)(M.Z,{count:Ie[1],size:"small",offset:[5,3],children:(0,t.jsx)("span",{children:"\u5BA1\u6838\u901A\u8FC7\u5F85\u4E0B\u8BC1"})})},{key:"false",label:(0,t.jsx)("span",{children:"\u672A\u901A\u8FC7"})},{key:"enableFalse",label:(0,t.jsx)("span",{children:"\u5DF2\u4E0A\u4F20\u8BC1\u4E66"})}],onChange:function(u){u=="all"?te({}):u=="-isNull"?te({"auditConfirm-isNull":!0}):u=="true"?te({auditConfirm:!0,hasCertificate:!1}):u=="false"?te({auditConfirm:!1}):u=="enableFalse"&&te({hasCertificate:!0}),Ee()}}},(0,t.jsxs)(F.ZP,{children:[(0,t.jsx)(ie.Z,{className:"Certificate",columns:et,actionRef:G,toolbar:He,request:{url:"/sms/business/bizCertificateApply",sortList:tt,params:J},toolBarRender:[(0,t.jsx)(W.Z,{icon:(0,t.jsx)(ge.Z,{}),type:"primary",onClick:function(){U({type:"add"}),oe(!0)},children:"\u65B0\u589E\u7533\u8BF7"},"add-certificate")],search:{defaultCollapsed:!1,labelWidth:120}}),p&&(0,t.jsx)(le,{setModalVisible:function(){return oe(!1)},modalVisible:p,callbackRef:function(){return Ee()},renderData:v}),pe&&(0,t.jsx)(j.Z,{setModalVisible:function(){return Be(!1)},modalVisible:pe,callbackRef:function(){return Ee()},renderData:v}),(0,t.jsx)(fe.Y,{title:"\u5BA1\u6838\u51B3\u8BAE",formRef:ee,visible:c,modalProps:{destroyOnClose:!0,maskClosable:!1,onCancel:function(){L(!1)}},onFinish:function(){var i=(0,C.Z)((0,d.Z)().mark(function u(r){return(0,d.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return v.id&&(r.id=v.id),h.next=3,Xe(r,"Auditing");case 3:case"end":return h.stop()}},u)}));return function(u){return i.apply(this,arguments)}}(),children:(0,t.jsx)(S.Z,{label:"\u5BA1\u6838\u5EFA\u8BAE",name:"auditRemark"})}),(0,t.jsx)(D.Z,{title:"\u67E5\u770B\u5408\u540C",open:Ge,onCancel:function(){return $e(!1)},width:1e3,children:(0,t.jsx)("iframe",{src:v.viewUrl,style:{width:"100%",height:"600px"}})}),xe&&(0,t.jsx)(I.Z,{setModalVisible:function(){return Me(!1)},modalVisible:xe,callbackRef:function(){return Ee()},renderData:v}),Ne&&(0,t.jsx)(Oe.Z,{modalVisible:Ne,setModalVisible:function(){return de(!1)},renderData:v}),We&&(0,t.jsx)(Ae.Z,{setModalVisible:function(){return ne(!1)},modalVisible:We,renderData:v,callbackRef:function(){return Ee()}})]})}},84117:function(Re,K,e){"use strict";var w=e(34792),D=e(48086),x=e(39428),W=e(11849),V=e(3182),M=e(2824),P=e(67294),X=e(45510),a=e(37476),$=e(952),y=e(5966),d=e(64317),f=e(90672),C=e(63863),R=e(37490),A=e(6821),Y=e(21874),m=e(85893);K.Z=function(_){var F=(0,P.useRef)(),s=_.modalVisible,ie=_.setModalVisible,T=_.callbackRef,n=_.renderData,k=(0,P.useState)(),q=(0,M.Z)(k,2),ae=q[0],z=q[1],ue=(0,P.useState)(),ce=(0,M.Z)(ue,2),Ce=ce[0],Fe=ce[1],be=(0,P.useState)(!1),ge=(0,M.Z)(be,2),Ze=ge[0],fe=ge[1],Se=(0,P.useRef)(null);(0,P.useEffect)(function(){n.type=="eidt"&&setTimeout((0,V.Z)((0,x.Z)().mark(function S(){var l,t;return(0,x.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:Object.keys(n).forEach(function(I){typeof n[I]=="number"&&(n[I]=n[I]+"")}),n.file&&(t=[],n.file.split(",").forEach(function(I,Oe){t.push({uid:Oe+1,name:I,response:{data:I}})}),n.file=t),F==null||(l=F.current)===null||l===void 0||l.setFieldsValue((0,W.Z)({},n));case 3:case"end":return j.stop()}},S)})),100)},[]);var me=function(l){if(Ze&&D.default.error("\u8BF7\u586B\u5199\u6B63\u786E\u7684\u59D3\u540D/\u90E8\u95E8"),n.type=="add"&&(l.userName=ae.name,l.userId=ae.id,l.departmentId=Ce),delete l.createBy,l.file){var t=[];l.file.forEach(function(j){t.push(j.response.data)}),l.file=t.join(",")}var le="/sms/business/bizCertificate";return new Promise(function(j){C.Z.post(le,l).then(function(I){I.status=="success"&&(D.default.success("\u64CD\u4F5C\u6210\u529F"),ie(),T(),j(!0))}).catch(function(I){j(!0)})})};return(0,m.jsxs)(a.Y,{title:"\u8BC1\u4E66\u7533\u8BF7",formRef:F,width:1200,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,maskClosable:!1,onCancel:function(){ie()}},onFinish:function(){var S=(0,V.Z)((0,x.Z)().mark(function l(t){return(0,x.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return n.id&&(t.id=n.id),n.applyId&&(t.applyId=n.applyId),j.next=4,me(t);case 4:case"end":return j.stop()}},l)}));return function(l){return S.apply(this,arguments)}}(),visible:s,children:[n.type=="add"?(0,m.jsxs)($.ZP.Group,{children:[(0,m.jsx)(Y.Z,{ref:Se,userLabel:"\u62DB\u751F\u8001\u5E08",userNames:"userName",userPlaceholder:"\u8BF7\u8F93\u5165\u62DB\u751F\u8001\u5E08\u7684\u540D\u5B57",setUserNameId:function(l){return z(l)},setDepartId:function(l){return Fe(l)},setFalgUser:function(l){return fe(l)}}),(0,m.jsx)(y.Z,{width:"sm",name:"mobile",label:"\u8054\u7CFB\u7535\u8BDD",placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",rules:[{pattern:new RegExp(R.Z.getRegex("mobile")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"}]}),(0,m.jsx)(y.Z,{width:"md",name:"idCard",label:"\u8EAB\u4EFD\u8BC1\u53F7",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1",rules:[{pattern:new RegExp(R.Z.getRegex("idCard")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u8EAB\u4EFD\u8BC1\u53F7"}]})]}):(0,m.jsx)(y.Z,{readonly:!0,name:"userName",label:"\u6301\u6709\u4EBA\u59D3\u540D"}),(0,m.jsx)(d.Z,{label:"\u8BC1\u4E66\u79CD\u7C7B",name:"kind",width:"md",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BC1\u4E66\u79CD\u7C7B"}],request:(0,V.Z)((0,x.Z)().mark(function S(){return(0,x.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",R.Z.getList("certificateKind"));case 1:case"end":return t.stop()}},S)}))}),(0,m.jsx)(A.Z,{label:"\u4E0A\u4F20\u8BC1\u4E66",name:"file",action:"/sms/business/bizCertificate/upload",renderData:n,fileUrl:"/sms/business/bizCertificate/download"}),(0,m.jsxs)($.ZP.Group,{children:[(0,m.jsx)(f.Z,{name:"remark",label:"\u8BC1\u4E66\u5907\u6CE8",placeholder:"\u8BF7\u8F93\u5165\u8BC1\u4E66\u5907\u6CE8...",width:1e3}),(0,m.jsx)(X.Z,{name:"uploadTime",fieldProps:{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss"},width:"sm",label:"\u4E0A\u4EA4\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u4EA4\u65F6\u95F4"}]}),(0,m.jsx)(X.Z,{name:"returnTime",fieldProps:{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss"},width:"sm",label:"\u6700\u8FD1\u5F52\u8FD8\u65F6\u95F4"}),(0,m.jsx)(X.Z,{name:"takeTime",fieldProps:{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss"},width:"sm",label:"\u6700\u8FD1\u5916\u5E26\u65F6\u95F4"})]})]})}},35562:function(Re,K,e){"use strict";var w=e(39428),D=e(11849),x=e(3182),W=sessionStorage.getItem("tokenName"),V=sessionStorage.getItem("tokenValue"),M={};M[W]=V;var P=function(){var X=(0,x.Z)((0,w.Z)().mark(function a($,y,d){var f,C,R,A,Y,m=arguments;return(0,w.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return f=m.length>3&&m[3]!==void 0?m[3]:"look",C=d.split(","),R=[],A={pdfUrl:[],imgUrl:[]},C.forEach(function(s){R.push(new Promise(function(ie){fetch($+"?id="+y+"&fileName="+s,{method:"GET",headers:(0,D.Z)((0,D.Z)({},M),{},{"Content-Type":"application/x-www-form-urlencoded"})}).then(function(T){T.blob().then(function(n){if(f=="look"){var k;s.indexOf("pdf")>=0?k=new Blob([n],{type:"application/pdf;charset=utf-8"}):k=new Blob([n]);var q=new FileReader;q.readAsDataURL(k),q.onload=function(ce){ie(q.result)}}else{var ae=window.URL.createObjectURL(n),z=document.createElement("a");document.body.appendChild(z);var ue="\u9644\u4EF6";z.href=ae,z.download=ue,z.target="_blank",z.click(),z.remove()}})})}))}),F.next=7,Promise.all(R);case 7:return Y=F.sent,Y.forEach(function(s){s.indexOf("application/pdf")>=0?A.pdfUrl.push(s):A.imgUrl.push(s)}),F.abrupt("return",A);case 10:case"end":return F.stop()}},a)}));return function($,y,d){return X.apply(this,arguments)}}();K.Z=P}}]);
