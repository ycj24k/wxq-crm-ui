(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7851],{7339:function($,P){"use strict";P.Z={PayHeader:{\u5E8F\u53F7:"chargeNum",\u6536\u636E\u7C7B\u578B:"type",\u6536\u636E\u7F16\u53F7:"num",\u6536\u8D39\u4EBA:"userName",\u4FE1\u606F\u63D0\u4F9B\u4EBA:"providerName",\u5B66\u5458\u59D3\u540D:"name",\u7F34\u8D39\u9879\u76EE:"project",\u5907\u6CE8:"description",\u6536\u8D39\u65B9\u5F0F:"method","\u5165\u8D26\u91D1\u989D\uFF08\u6536\u8D39\u91D1\u989D-\u4EE3\u6536\u6B3E\u9879\uFF09":"accessedAmount",\u6536\u8D39\u65E5\u671F:"auditTimeNext",\u6240\u5C5E\u90E8\u95E8:"departmentId",\u8BA2\u5355\u6765\u6E90:"source",\u6536\u8D39\u91D1\u989D:"amount",\u4EE3\u6536\u6B3E\u9879:"collectedAmount",\u4E1A\u7EE9\u91D1\u989D:"performanceAmount",\u63D0\u6210\u57FA\u6570:"commissionBase",\u62A5\u8003\u9879\u76EE:"projects",\u8003\u8BD5\u7C7B\u578B:"examType",\u73ED\u578B:"classType",\u6536\u8D39\u6807\u51C6:"receivable",\u4F18\u60E0\u91D1\u989D:"discount",\u62A5\u540D\u6B21\u6570:"count",\u62A5\u540D\u4EBA\u6570:"quantity",\u5B66\u5458\u7C7B\u578B:"studentType",\u5BA1\u6838\u65E5\u671F:"auditTime",\u5B9E\u9645\u5230\u8D26\u65F6\u95F4:"paymentTime",\u8BA2\u5355\u7F16\u53F7:"orderNum",\u62A5\u8003\u9662\u6821:"school",\u4E13\u4E1A:"major",\u5C42\u6B21:"majors",\u56E2\u7EC4\u540D\u79F0:"studentNames",\u4FE1\u606F\u6240\u6709\u4EBA:"ownerName",\u4FE1\u606F\u6240\u6709\u4EBA\u5206\u6210:"percent",\u4FE1\u606F\u6240\u6709\u4EBA\u5206\u6210\u91D1\u989D:"percentAmount",\u8EAB\u4EFD\u8BC1:"idCard",\u62A5\u8003\u5C97\u4F4D\u7F16\u53F7:"projectNum",\u7D2F\u8BA1\u4F18\u60E0\u91D1\u989D:"discount",\u4F18\u60E0\u539F\u56E0:"discountRemark",\u662F\u5426\u9700\u8981\u5F00\u7968:"hasInvoice",\u53D1\u7968\u540D\u79F0:"title",\u5546\u54C1\u79CD\u7C7B:"productType",\u7A0E\u53F7:"taxCode",\u5355\u4EF7:"price",\u5F00\u7968\u91D1\u989D:"invoiceAmount",\u6CE8\u610F\u4E8B\u9879:"cautions",\u7535\u5B50\u90AE\u7BB1:"email",\u53D1\u7968\u79CD\u7C7B:"invoiceType",\u8425\u4E1A\u6267\u7167\u5730\u5740:"address",\u7535\u8BDD:"mobile",\u5F00\u6237\u884C:"invoiceBank",\u5F00\u6237\u5E10\u53F7:"invoiceAccount",\u53D1\u7968\u5907\u6CE8:"remark",\u8981\u6C42\u5F00\u7968\u516C\u53F8:"chargeAccount",\u53D1\u7968\u7F16\u53F7:"invoiceNum",\u53D1\u7968\u53F7\u7801:"no",\u5F00\u7968\u65F6\u95F4:"time",\u7B2C\u4E09\u65B9\u8BA2\u5355\u53F7:"num2",\u4E0A\u7EA7\u7EC4\u957F\u540D\u79F0:"",\u6240\u5C5E\u516C\u53F8:"updepartmentId"},jiaoPayHeader:{\u5E8F\u53F7:"chargeNum",\u6536\u636E\u7C7B\u578B:"type",\u6536\u636E\u7F16\u53F7:"num",\u6536\u8D39\u4EBA:"userName",\u4FE1\u606F\u63D0\u4F9B\u4EBA:"providerName",\u5B66\u5458\u59D3\u540D:"name",\u7F34\u8D39\u9879\u76EE:"project",\u5907\u6CE8:"description",\u6536\u8D39\u65B9\u5F0F:"method","\u5165\u8D26\u91D1\u989D\uFF08\u6536\u8D39\u91D1\u989D-\u4EE3\u6536\u6B3E\u9879\uFF09":"accessedAmount",\u6536\u8D39\u65E5\u671F:"chargeTime",\u6240\u5C5E\u90E8\u95E8:"departmentId",\u8BA2\u5355\u6765\u6E90:"source",\u6536\u8D39\u91D1\u989D:"amount",\u4EE3\u6536\u6B3E\u9879:"collectedAmount",\u4E1A\u7EE9\u91D1\u989D:"performanceAmount",\u63D0\u6210\u57FA\u6570:"commissionBase",\u62A5\u8003\u9879\u76EE:"projects",\u8003\u8BD5\u7C7B\u578B:"examType",\u73ED\u578B:"classType",\u6536\u8D39\u6807\u51C6:"receivable",\u4F18\u60E0\u91D1\u989D:"discount",\u62A5\u540D\u6B21\u6570:"count",\u62A5\u540D\u4EBA\u6570:"quantity",\u5B66\u5458\u7C7B\u578B:"studentType",\u5BA1\u6838\u65E5\u671F:"auditTime",\u5B9E\u9645\u5230\u8D26\u65F6\u95F4:"paymentTime",\u8BA2\u5355\u7F16\u53F7:"orderNum",\u62A5\u8003\u9662\u6821:"school",\u4E13\u4E1A:"major",\u5C42\u6B21:"majors",\u56E2\u7EC4\u540D\u79F0:"studentNames",\u4FE1\u606F\u6240\u6709\u4EBA:"ownerName",\u4FE1\u606F\u6240\u6709\u4EBA\u5206\u6210:"percent",\u4FE1\u606F\u6240\u6709\u4EBA\u5206\u6210\u91D1\u989D:"percentAmount",\u8EAB\u4EFD\u8BC1:"idCard",\u62A5\u8003\u5C97\u4F4D\u7F16\u53F7:"projectNum",\u7D2F\u8BA1\u4F18\u60E0\u91D1\u989D:"discount",\u4F18\u60E0\u539F\u56E0:"discountRemark",\u662F\u5426\u9700\u8981\u5F00\u7968:"hasInvoice",\u53D1\u7968\u540D\u79F0:"title",\u5546\u54C1\u79CD\u7C7B:"productType",\u7A0E\u53F7:"taxCode",\u5355\u4EF7:"price",\u5F00\u7968\u91D1\u989D:"invoiceAmount",\u6CE8\u610F\u4E8B\u9879:"cautions",\u7535\u5B50\u90AE\u7BB1:"email",\u53D1\u7968\u79CD\u7C7B:"invoiceType",\u8425\u4E1A\u6267\u7167\u5730\u5740:"address",\u7535\u8BDD:"mobile",\u5F00\u6237\u884C:"invoiceBank",\u5F00\u6237\u5E10\u53F7:"invoiceAccount",\u53D1\u7968\u5907\u6CE8:"remark",\u8981\u6C42\u5F00\u7968\u516C\u53F8:"chargeAccount",\u53D1\u7968\u7F16\u53F7:"invoiceNum",\u53D1\u7968\u53F7\u7801:"no",\u5F00\u7968\u65F6\u95F4:"time",\u7B2C\u4E09\u65B9\u8BA2\u5355\u53F7:"num2",\u4E0A\u7EA7\u7EC4\u957F\u540D\u79F0:"",\u6240\u5C5E\u516C\u53F8:"updepartmentId"},RefundHeader:{\u5E8F\u53F7:"nums",\u5355\u636E\u7F16\u53F7:"num",\u6536\u8D39\u4EBA:"userName",\u5BA2\u6237\u540D\u79F0:"name",\u9879\u76EE\u603B\u79F0:"project",\u5907\u6CE8:"description2",\u9000\u6B3E\u65B9\u5F0F:"method",\u9000\u6B3E\u91D1\u989D:"amount",\u9000\u6B3E\u603B\u91D1\u989D:"amount",\u9000\u8D39\u65E5\u671F:"chargeTime",\u6536\u8D39\u4EBA\u90E8\u95E8:"departmentId",\u9000\u8D39\u7ECF\u529E\u4EBA:"agentName",\u5F00\u6237\u540D:"accountName",\u5361\u53F7:"account",\u5F00\u6237\u652F\u884C:"bank",\u6D88\u8D39\u91D1\u989D:"oldConsumptionAmount",\u6D88\u8D39\u603B\u91D1\u989D:"school",\u9000\u8D39\u539F\u56E0:"description",\u9000\u8D39\u7C7B\u578B:"refundType",\u56E2\u7EC4\u540D\u79F0:"studentNames",\u8BA2\u5355\u6765\u6E90:"source",\u4E1A\u7EE9\u91D1\u989D:"performanceAmount",\u662F\u5426\u5DF2\u5F00\u7968:"hasInvoice"},OldRefundHeader:{\u5E8F\u53F7:"nums",\u5355\u636E\u7F16\u53F7:"num",\u6536\u8D39\u4EBA:"userName",\u5BA2\u6237\u540D\u79F0:"oldStudentName",\u9879\u76EE\u603B\u79F0:"project",\u5907\u6CE8:"description2",\u9000\u6B3E\u65B9\u5F0F:"method",\u9000\u6B3E\u91D1\u989D:"amount",\u9000\u6B3E\u603B\u91D1\u989D:"amount",\u9000\u8D39\u65E5\u671F:"chargeTime",\u6536\u8D39\u4EBA\u90E8\u95E8:"departmentId",\u9000\u8D39\u7ECF\u529E\u4EBA:"agentName",\u5F00\u6237\u540D:"accountName",\u5361\u53F7:"account",\u5F00\u6237\u652F\u884C:"bank",\u6D88\u8D39\u91D1\u989D:"oldConsumptionAmount",\u6D88\u8D39\u603B\u91D1\u989D:"school",\u9000\u8D39\u539F\u56E0:"description",\u9000\u8D39\u7C7B\u578B:"refundType",\u4E1A\u7EE9\u91D1\u989D:"performanceAmount",\u662F\u5426\u5DF2\u5F00\u7968:"hasInvoice"}}},14037:function($,P,o){"use strict";var pe=o(71194),z=o(50146),he=o(34792),_=o(48086),ve=o(32157),N=o(5816),ye=o(88983),j=o(55742),J=o(86582),T=o(2824),Ee=o(47673),Q=o(4107),X=o(54618),Y=o(89366),h=o(63863),E=o(67294),u=o(85893),K=Q.Z.Search;P.Z=function(l){var w=l.CardVisible,m=l.setCardVisible,q=l.setDepartment,r=l.CardContent,g=l.departments,C=l.parentIdTree,M=l.checkable,ee=M===void 0?!1:M,v=l.callbackRef,ne=l.setchargePerson,k=l.setUserID,te=l.getUserList,B=l.departNameList,U=B===void 0?!1:B,se,D=[],i=[],p=[],ae=(0,E.useState)([]),b=(0,T.Z)(ae,2),re=b[0],x=b[1],ue=(0,E.useState)(""),R=(0,T.Z)(ue,2),I=R[0],oe=R[1],ce=(0,E.useState)(!0),L=(0,T.Z)(ce,2),S=L[0],Z=L[1],de=(0,E.useState)(!1),W=(0,T.Z)(de,2),O=W[0],ie=W[1],le=function a(t){var e=[];return t.forEach(function(n,c){if(n.enable||O||n.departmentName){var d=[];n.children&&(d=a(n.children));var f="",y,s;n.departmentName?(f=n.departmentName,y=(0,u.jsx)(X.Z,{}),s=!1):(f=n.name,y=(0,u.jsx)(Y.Z,{}),s=!1),d.length>0?e.push({title:f,key:c,userId:n.userId,children:d,icon:y,disabled:s,id:n.id}):e.push({title:f,key:c,userId:n.userId,icon:y,disabled:s,id:n.id})}}),e},A=[];r.content.forEach(function(a){a.departmentName?a.departmentName.indexOf("\u79BB\u804C")==-1&&A.push(a):A.push(a)}),r&&(p=le(A));var fe=function a(t,e){t.forEach(function(n,c){n.key=e+"-"+c,n.children&&a(n.children,n.key)})},V=function a(t,e){t.forEach(function(n,c){["role","user","achievement","Groups","projectDepartment","sysuser"].includes(r.type)?n.userId==e&&(i.push(n.key),D.push(n)):n.id==e&&i.push(n.key),n.children&&a(n.children,e)})};p.length>0&&(fe(p,0),g&&g.forEach(function(a){V(p,a.id)}),U&&U.split(",").forEach(function(a){V(p,a)}));var me=function a(t,e){for(var n=[],c=0;c<e.length;c++){var d=e[c];d.children&&(d.children.some(function(f){return f.title.indexOf(t)!=-1})?n.push(d.key):a(t,d.children)&&n.push.apply(n,(0,J.Z)(a(t,d.children))))}return n},F=function(t){x(t),Z(!1)},H=function(t){var e=t.target.value;x(me(e,p)),oe(e),Z(!0)},_e=function(t){var e=t.target.value;ie(e)},G=function a(t){return t.map(function(e){var n=e.title.indexOf(I),c=e.title.substring(0,n),d=e.title.slice(n+I.length),f=n>-1?(0,u.jsxs)("span",{children:[c,(0,u.jsx)("span",{className:"site-tree-search-value",children:I}),d]}):(0,u.jsx)("span",{children:e.title});return e.children?{title:f,key:e.key,disabled:e.disabled,icon:e.icon,children:a(e.children),userId:e.userId}:{title:f,key:e.key,icon:e.icon,userId:e.userId,titles:e.title,disabled:e.disabled}})};return(0,E.useEffect)(function(){if(!I){let t=function(e){e.forEach(function(n){n.children&&(a.push(n.key),t(n.children))})};var a=[];t(p),x(a)}},[I]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(j.ZP.Group,{onChange:_e,value:O,defaultValue:O,children:[(0,u.jsx)(j.ZP,{value:!1,children:"\u4E0D\u67E5\u770B\u79BB\u804C"}),(0,u.jsx)(j.ZP,{value:!0,children:"\u67E5\u770B\u79BB\u804C"})]}),(r==null?void 0:r.type)=="performance"?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(K,{style:{marginBottom:8},placeholder:"Search",onChange:function(t){return H(t)}}),(0,u.jsx)(N.Z,{showIcon:!0,checkable:ee,defaultExpandAll:!0,onExpand:function(t){return F(t)},autoExpandParent:S,defaultCheckedKeys:i,onCheck:function(t,e){var n=e.checkedNodes,c=[];n.forEach(function(d){d.userId&&c.push(d.userId)}),k(c)},onSelect:function(t,e){e.node.userId&&k(e.node.userId)},treeData:G(p)})]}):(0,u.jsx)(z.Z,{title:"\u9009\u62E9\u4EBA\u5458",visible:w,destroyOnClose:!0,onCancel:function(){i=[],m(!1)},onOk:function(){var t,e=[],n=[];if((t=D)===null||t===void 0||t.forEach(function(s){s.userId&&(e.push(s),n.push(s.userId))}),r.type=="projectDepartment"){h.Z.post("/sms/system/sysDepartment",{id:C,projects:n.join(",")}).then(function(s){s.status=="success"&&(_.default.success("\u6388\u6743\u6210\u529F"),i=[],v(),setTimeout(function(){m(!1)},500))});return}if(r.type=="project"&&h.Z.post2("/sms/business/bizUserJob/updateFromTree",{id:C},{array:n}).then(function(s){s.status=="success"&&(_.default.success("\u6388\u6743\u6210\u529F"),i=[],v(),setTimeout(function(){m(!1)},500))}),r.type=="user"&&h.Z.post2("/sms/system/sysUserUser/updateFromTree",{id:C},{array:n}).then(function(s){s.status=="success"&&(_.default.success("\u6388\u6743\u6210\u529F"),i=[],v(),setTimeout(function(){m(!1)},500))}),r.type=="order")if(e.length>1){_.default.error("\u53EA\u80FD\u9009\u62E9\u4E00\u4F4D");return}else e.length==0?_.default.error("\u8BF7\u9009\u62E9\u6536\u8D39\u4EBA\uFF0C\u6536\u8D39\u4EBA\u4E0D\u80FD\u4E3A\u90E8\u95E8"):(q({name:e[0].titles,id:e[0].userId}),i=[],m(!1));if(r.type=="role"&&h.Z.post2("/sms/system/sysUserRole/updateFromTree",{id:C},{array:n}).then(function(s){s.status=="success"&&(_.default.success("\u6388\u6743\u6210\u529F"),i=[],v(),setTimeout(function(){m(!1)},500))}),r.type=="achievement"){var c=n.map(function(s){return{id:s,newOrderType:r.typeNum}}),d=g.map(function(s){return s.id});d.forEach(function(s){n.includes(s)||c.push({id:s,newOrderType:0})}),h.Z.postAll("/sms/system/sysUser/saveArray",{array:c}).then(function(s){s.status=="success"&&(_.default.success("\u6388\u6743\u6210\u529F"),i=[],te(),setTimeout(function(){m(!1)},500))})}if(r.type=="Groups"){var f=n.map(function(s){return{id:s,groupId:r.groups}}),y=g.map(function(s){return s.id});y.forEach(function(s){n.includes(s)||f.push({id:s,groupId:-1})}),h.Z.postAll("/sms/system/sysUser/saveArray",{array:f}).then(function(s){s.status=="success"&&(_.default.success("\u6388\u6743\u6210\u529F"),i=[],v(),setTimeout(function(){m(!1)},500))})}r.type=="sysuser"&&h.Z.postAll("/sms/system/sysUserLevel/correlationUser/".concat(C),n).then(function(s){s.status=="success"&&(_.default.success("\u6388\u6743\u6210\u529F"),i=[],v(),setTimeout(function(){m(!1)},500))})},children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(K,{style:{marginBottom:8},placeholder:"Search",onChange:function(t){return H(t)}}),(0,u.jsx)(N.Z,{showIcon:!0,checkable:(r==null?void 0:r.type)!="pay",defaultExpandAll:!0,onExpand:function(t){return F(t)},expandedKeys:re,autoExpandParent:S,defaultCheckedKeys:i,onCheck:function(t,e){D=e.checkedNodes},onSelect:function(t,e){se={name:e.node.title,id:e.node.userId},r.type=="pay"&&e.node.userId&&(ne({name:e.node.titles,id:e.node.userId}),m(!1))},treeData:G(p)})]})})]})}}}]);
