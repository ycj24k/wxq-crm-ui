(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9306],{54618:function(N,g,r){"use strict";r.d(g,{Z:function(){return D}});var d=r(28991),P=r(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},v=Z,y=r(27029),f=function(l,m){return P.createElement(y.Z,(0,d.Z)((0,d.Z)({},l),{},{ref:m,icon:v}))},h=P.forwardRef(f),D=h},34540:function(N,g,r){"use strict";var d=r(28991),P=r(81253),Z=r(85893),v=r(51617),y=r(67294),f=r(66758),h=r(53048),D=["fieldProps","proFieldProps"],E="dateRange",l=y.forwardRef(function(m,O){var T=m.fieldProps,C=m.proFieldProps,R=(0,P.Z)(m,D),A=(0,y.useContext)(f.Z);return(0,Z.jsx)(h.Z,(0,d.Z)({ref:O,fieldProps:(0,d.Z)({getPopupContainer:A.getPopupContainer},T),valueType:E,proFieldProps:C,filedConfig:{valueType:E,lightFilterLabelFormatter:function(I){return(0,v.Z)(I,(T==null?void 0:T.format)||"YYYY-MM-DD")}}},R))});g.Z=l},4378:function(N,g,r){"use strict";r.r(g),r.d(g,{default:function(){return ne}});var d=r(39428),P=r(34792),Z=r(48086),v=r(3182),y=r(91220),f=r(2824),h=r(30202),D=r(71906),E=r(14037),l=r(67294),m=r(63863),O=r(952),T=r(34540),C=r(21010),R=r(30381),A=r.n(R),M=r(22),I=r(37490),$=r(79046),ee={\u8BA2\u5355\u7F16\u53F7:"num","\u5B66\u5458/\u4F01\u4E1A\u540D\u79F0":"studentName",\u8BA2\u5355\u5B9E\u9645\u5E94\u6536\u91D1\u989D:"actualReceivable",\u7D2F\u8BA1\u5B9E\u6536:"charge",\u7D2F\u8BA1\u4F18\u60E0:"discount",\u5BA2\u6237\u6765\u6E90:"source",\u8BA2\u5355\u9879\u76EE:"project",\u62A5\u8003\u4EBA\u6570:"quantity",\u4E0B\u5355\u65F6\u95F4:"createTime",\u6536\u8D39\u4EBA:"userName",\u6536\u8D39\u4EBA\u90E8\u95E8:"userNamedepartment",\u4FE1\u606F\u63D0\u4F9B\u4EBA:"provider",\u4FE1\u606F\u63D0\u4F9B\u4EBA\u90E8\u95E8:"providerDepartment"},te=r(7339),a=r(85893),ne=function(){var B,w,U,H,re=(0,l.useState)(!1),b=(0,f.Z)(re,2),L=b[0],ae=b[1],Y=(0,C.tT)("@@initialState"),ie=Y.initialState,Te=Y.setInitialState,ue=ie.currentUser,je=(B=C.m8.location.query)!==null&&B!==void 0&&B.userId?(w=C.m8.location.query)===null||w===void 0?void 0:w.userId:ue.userid,se=(U=C.m8.location.query)!==null&&U!==void 0&&U.moonTime?JSON.parse((H=C.m8.location.query)===null||H===void 0?void 0:H.moonTime):[A()().format("YYYY-MM-DD"),A()(new Date).add(1,"days").format("YYYY-MM-DD")],oe=(0,l.useState)([]),V=(0,f.Z)(oe,2),p=V[0],de=V[1],le=(0,l.useState)([]),z=(0,f.Z)(le,2),Pe=z[0],De=z[1],ce=(0,l.useState)(se),W=(0,f.Z)(ce,2),c=W[0],me=W[1],fe=(0,l.useState)([]),k=(0,f.Z)(fe,2),F=k[0],ve=k[1],he=(0,l.useState)([]),K=(0,f.Z)(he,2),S=K[0],pe=K[1],G=(0,l.useRef)();(0,l.useEffect)(function(){var t;(t=G.current)===null||t===void 0||t.setFieldsValue({createTime:c})},[p]);var X=function t(e,n){var i=(0,y.Z)(e),s;try{for(i.s();!(s=i.n()).done;){var u=s.value;if(u.departmentName==n)return console.log("item.departmentName",u.departmentName,n),u;if(u.children){var o=t(u.children,n);if(o)return o}}}catch(j){i.e(j)}finally{i.f()}};(0,l.useEffect)(function(){m.Z.get("/sms/share/getOperationDepartmentAndUser").then(function(t){var e=t.data,n=X(e,"\u4E2D\u53F0"),i=X([n],"\u65B0\u5A92\u4F53\u8FD0\u8425\u90E8");ae({content:[i],type:"performance"})})},[]);var xe=function(){var t=(0,v.Z)((0,d.Z)().mark(function e(n,i,s){var u,o;return(0,d.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(p.length!=0){x.next=3;break}return Z.default.error("\u8BF7\u5148\u52FE\u9009\u62DB\u751F\u8001\u5E08"),x.abrupt("return");case 3:return x.next=5,m.Z.get("/sms/business/bizStudent/statistics/provider",{startTime:n,endTime:i,_isGetAll:!0,enable:!0,idList:p.join(",")});case 5:return u=x.sent.data,x.next=8,m.Z.get("/sms/business/bizStudent/statistics/user",{startTime:n,endTime:i,_isGetAll:!0,enable:!0,type:0,idList:p.join(",")});case 8:o=x.sent.data,ve(u),pe(o);case 11:case"end":return x.stop()}},e)}));return function(n,i,s){return t.apply(this,arguments)}}(),J=[{title:"\u8FD0\u8425\u8001\u5E08",key:"name",dataIndex:"id",width:160,render:function(e,n){return(0,a.jsx)("span",{children:I.Z.getDepartmentUserName(n.id)})}},{title:"\u5F00\u59CB\u65F6\u95F4",key:"start",dataIndex:"start",width:160,render:function(e,n){return(0,a.jsx)("span",{children:c[0]})}},{title:"\u7ED3\u675F\u65F6\u95F4",key:"end",dataIndex:"end",width:160,render:function(e,n){return(0,a.jsx)("span",{children:c[1]})}},{title:"\u7EBF\u7D22\u91CF",key:"count",width:160,dataIndex:"count"},{title:"\u6210\u4EA4\u91CF",key:"dealCount",width:160,dataIndex:"dealCount"},{title:"\u6210\u4EA4\u91D1\u989D",key:"amount",width:160,dataIndex:"amount",render:function(e,n){return(0,a.jsx)("span",{children:n.amount.toFixed(2)})}},{title:"\u6210\u4EA4\u7387",key:"Transactionrate",dataIndex:"Transactionrate",render:function(e,n){return(0,a.jsxs)("span",{children:[n.count?(n.dealCount/n.count*100).toFixed(2):0,"%"]})}}],Q=[{title:"\u6240\u5C5E\u90E8\u95E8",key:"bumen",dataIndex:"bumen",width:160,render:function(e,n){return(0,a.jsx)("span",{children:I.Z.getDepartmentNames(n.id)[0]})}},{title:"\u54A8\u8BE2\u8001\u5E08",key:"name",dataIndex:"id",width:160,render:function(e,n){return(0,a.jsx)("span",{children:I.Z.getDepartmentUserName(n.id)})}},{title:"\u5F00\u59CB\u65F6\u95F4",key:"start",width:160,dataIndex:"start",render:function(e,n){return(0,a.jsx)("span",{children:c[0]})}},{title:"\u7ED3\u675F\u65F6\u95F4",key:"end",width:160,dataIndex:"end",render:function(e,n){return(0,a.jsx)("span",{children:c[1]})}},{title:"\u83B7\u53D6\u603B\u6570\u636E\u91CF",key:"count",width:160,dataIndex:"count"},{title:"\u603B\u6210\u4EA4\u91CF",key:"dealCount",width:160,dataIndex:"dealCount"},{title:"\u603B\u6210\u4EA4\u91D1\u989D",key:"amount",width:160,dataIndex:"amount"},{title:"\u603B\u6210\u4EA4\u8F6C\u5316\u7387",key:"Transactionrate",width:160,dataIndex:"Transactionrate",render:function(e,n){return(0,a.jsxs)("span",{children:[n.count?(n.dealCount/n.count*100).toFixed(2):0,"%"]})}}],Ze=function(){var t=(0,v.Z)((0,d.Z)().mark(function e(n){return(0,d.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise(function(u){xe(n.createTime[0],n.createTime[1]),me(n.createTime),u(!0)}));case 1:case"end":return s.stop()}},e)}));return function(n){return t.apply(this,arguments)}}(),q=function(e){var n=e==1?F:S,i=n.reduce(function(o,j){return o+j.count},0),s=n.reduce(function(o,j){return o+j.dealCount},0);if(i==0)return"0%";var u="".concat((s/i*100).toFixed(2),"%");return u},Ce={id:"\u603B\u8BA1",start:c[0],end:c[1],amount:F.reduce(function(t,e){return t+e.amount},0),dealCount:F.reduce(function(t,e){return t+e.dealCount},0),count:F.reduce(function(t,e){return t+e.count},0),Transactionrate:q(1)},ge={id:"\u603B\u8BA1",bumen:"-",start:c[0],end:c[1],amount:S.reduce(function(t,e){return t+e.amount},0),dealCount:S.reduce(function(t,e){return t+e.dealCount},0),count:S.reduce(function(t,e){return t+e.count},0),Transactionrate:q(2)},_=function(){var t=(0,v.Z)((0,d.Z)().mark(function e(n){var i,s;return(0,d.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(p.length!=0){o.next=3;break}return Z.default.error("\u8BF7\u5148\u5DE6\u4FA7\u52FE\u9009\u62DB\u751F\u8001\u5E08"),o.abrupt("return");case 3:return i={parentId:-1,enable:!0,"createTime-start":c[0],"createTime-end":c[1],"status-isNot":0,_isGetAll:!0},n==0?i["provider-in"]=p.join(","):n==1&&(i["userId-in"]=p.join(",")),o.next=7,m.Z.get("/sms/business/bizOrder",i);case 7:s=o.sent.data.content,(0,$.Z)(s,ee,"\u8BA2\u5355\u4FE1\u606F","charge");case 9:case"end":return o.stop()}},e)}));return function(n){return t.apply(this,arguments)}}(),ye=function(){var t=(0,v.Z)((0,d.Z)().mark(function e(){var n,i;return(0,d.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(p.length!=0){u.next=3;break}return Z.default.error("\u8BF7\u5148\u5DE6\u4FA7\u52FE\u9009\u62DB\u751F\u8001\u5E08"),u.abrupt("return");case 3:return n={enable:!0,"chargeTime-start":c[0],"chargeTime-end":c[1],"provider-in":p.join(","),"auditType-in":"0,4",confirm:!0,_isGetAll:!0},u.next=6,m.Z.get("/sms/business/bizCharge/getListOfFinance3",n);case 6:i=u.sent.data,(0,$.Z)(i,te.Z.jiaoPayHeader,"\u7F34\u8D39\u4FE1\u606F","charge");case 8:case"end":return u.stop()}},e)}));return function(){return t.apply(this,arguments)}}();return(0,a.jsx)(D.ZP,{children:(0,a.jsxs)(h.ZP,{split:"vertical",className:"cardsd",children:[(0,a.jsx)(h.ZP,{colSpan:"20%",style:{padding:"0 5px"},children:L&&(0,a.jsx)(E.Z,{CardVisible:!0,checkable:!0,CardContent:L,setUserID:function(e){de(e)}})}),(0,a.jsxs)(h.ZP,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(O.ZP,{layout:"inline",onFinish:function(){var t=(0,v.Z)((0,d.Z)().mark(function e(n){return(0,d.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Ze(n);case 2:case"end":return s.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),formRef:G,children:(0,a.jsx)(T.Z,{name:"createTime",label:"\u65E5\u671F\u65F6\u95F4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.ZP,{title:"\u5B66\u5458\u4FE1\u606F\u63D0\u4F9B\u6210\u4EA4\u6BD4",children:(0,a.jsx)(M.Z,{columns:J,dataSource:F,search:!1,toolBarRender:[(0,a.jsx)("a",{onClick:function(){return _(0)},children:"\u5BFC\u51FA\u4E0B\u5355\u660E\u7EC6"}),(0,a.jsx)("a",{onClick:function(){return ye()},children:"\u5BFC\u51FA\u7F34\u8D39\u660E\u7EC6"})],footer:function(){return(0,a.jsx)("tr",{children:J.map(function(e){return(0,a.jsx)("td",{className:"ant-table-cell",style:{width:"160px"},children:Ce[e.dataIndex]},"Transactionrate")})})}})}),(0,a.jsx)(h.ZP,{title:"\u603B\u6570\u636E\u6210\u4EA4\u6BD4",children:(0,a.jsx)(M.Z,{columns:Q,dataSource:S,search:!1,toolBarRender:[(0,a.jsx)("a",{onClick:function(){return _(1)},children:"\u5BFC\u51FA\u4E0B\u5355\u660E\u7EC6"})],footer:function(){return(0,a.jsx)("tr",{children:Q.map(function(e){return(0,a.jsx)("td",{className:"ant-table-cell",style:{width:"160px"},children:ge[e.dataIndex]},"Transactionrates")})})}})})]})]})]})})}}}]);
