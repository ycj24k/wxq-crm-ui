(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3173],{22:function(Re,M,t){"use strict";var B=t(39428),v=t(11849),S=t(3182),p=t(2824),N=t(66801),te=t(63863),O=t(67294),D=t(85893);M.Z=function(e){var z=e.columns,F=e.actionRef,G=e.formRef,j=e.cardBordered,H=j===void 0?!0:j,o=e.scroll,ae=o===void 0?!1:o,i=e.request,T=e.beforeSearchSubmit,L=e.toolbar,C=L===void 0?void 0:L,V=e.pagesizes,ne=V===void 0?10:V,y=e.rowKey,x=y===void 0?"id":y,c=e.toolBarRender,A=c===void 0?[]:c,I=e.dateFormatter,K=I===void 0?"string":I,R=e.rowSelection,J=R===void 0?!1:R,$=e.expandable,Q=$===void 0?void 0:$,g=e.tableAlertOptionRender,X=g===void 0?void 0:g,Z=e.onRow,U=e.params,Y=U===void 0?"":U,W=e.dataSource,l=W===void 0?void 0:W,n=e.tableStyle,_=n===void 0?void 0:n,r=e.footer,m=r===void 0?void 0:r,f=e.onReset,_e=f===void 0?void 0:f,E=e.onSubmit,ge=E===void 0?void 0:E,re=e.onFn,se=re===void 0?void 0:re,oe=e.getTotalElements,ie=oe===void 0?void 0:oe,le=e.getData,de=le===void 0?void 0:le,ue=e.loding,ce=ue===void 0?void 0:ue,me=e.search,Pe=me===void 0?void 0:me,fe=e.searchData,Me=fe===void 0?{}:fe,Be=e.headerTitle,ve=e.editable,Se=ve===void 0?void 0:ve,Ee=e.className,he=Ee===void 0?"tables":Ee,be=e.rowClassName,je=be===void 0?void 0:be,pe=!1;i&&(pe=i.sortList);var u={_orderBy:"",_direction:""},Te=(0,O.useState)(ne),Oe=(0,p.Z)(Te,2),Le=Oe[0],Ce=Oe[1],ye=(0,O.useState)({}),De=(0,p.Z)(ye,2),Ie=De[0],xe=De[1];return(0,D.jsx)(N.ZP,{columns:z,className:he,actionRef:F,formRef:G,cardBordered:H,scroll:ae,headerTitle:Be,tableStyle:_,dataSource:l,rowClassName:je,request:function(){var q=(0,S.Z)((0,B.Z)().mark(function k(d,w,Ae){var P,s,h;return(0,B.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return Object.keys(d).forEach(function(a){(d[a]=="null"||d[a]==null)&&(d["".concat(a,"-isNull")]=!0,delete d[a])}),Object.keys(w).length>0?Object.keys(w).forEach(function(a){var ee;u._orderBy=a,((ee=w[a])===null||ee===void 0?void 0:ee.indexOf("desc"))==0?u._direction="desc":u._direction="asc"}):pe?Object.keys(i.sortList).forEach(function(a){u._orderBy=a,u._direction=i.sortList[a]}):u={_orderBy:"",_direction:""},P=d,Object.keys(P).forEach(function(a){P[a]===""&&delete P[a]}),s=(0,v.Z)((0,v.Z)((0,v.Z)((0,v.Z)({},Ae),i.params),P),Me),Object.keys(s).forEach(function(a){(s[a]==""||s[a]==[""]||s[a]=="-isNull")&&s[a]!==0&&s[a]!==!1&&(s["".concat(a)+"-isNull"]=!0,delete s[a]),s[a]===null&&delete s[a],s[a]=="All"&&delete s[a]}),u._orderBy!==""&&Object.assign(s,u),xe(s),b.next=10,te.Z.get(i.url,(0,v.Z)({},s));case 10:return h=b.sent,se&&se(h.data.content),de&&de(s),ce&&ce(!1),ie&&ie(h.data.totalElements),b.abrupt("return",{data:h.data.content,success:h.success,total:h.data.totalElements});case 16:case"end":return b.stop()}},k)}));return function(k,d,w){return q.apply(this,arguments)}}(),rowKey:x,pagination:{pageSize:Le,showSizeChanger:!0,onChange:function(k,d){Ce(d)}},toolBarRender:function(){return A},rowSelection:J,params:Y,expandable:Q,dateFormatter:K,tableAlertOptionRender:X,toolbar:C,onRow:Z,beforeSearchSubmit:T,onReset:_e,onSubmit:ge,search:Pe,editable:Se,footer:m,columnsState:{persistenceKey:he,persistenceType:"localStorage"}})}},56876:function(Re,M,t){"use strict";t.r(M);var B=t(32059),v=t(57663),S=t(71577),p=t(39428),N=t(3182),te=t(34792),O=t(48086),D=t(2824),e=t(67294),z=t(40110),F=t(71906),G=t(68503),j=t(63863),H=t(22),o=t(85893),ae,i;M.default=function(){var T=(0,e.useRef)(),L=(0,e.useState)(!1),C=(0,D.Z)(L,2),V=C[0],ne=C[1],y=(0,e.useState)(""),x=(0,D.Z)(y,2),c=x[0],A=x[1],I=(0,e.useState)({}),K=(0,D.Z)(I,2),R=K[0],J=K[1],$=function(){T.current.reload()},Q=function(n,_){var r=n-1;return n<=0&&(r=_,clearInterval(i),A("")),r},g=function(n){var _=document.getElementById("timeLength"+n.id);i=setInterval(function(){var r=_.innerText;_.innerHTML=Q(r,n.timeLength)},1e3)},X=function(n){var _=document.getElementById("audio");if(!!n.file){var r="";if(n.file.split(",").forEach(function(f){f.indexOf(".mp3")>=0&&(r=f)}),r==""){O.default.error("\u5F53\u524D\u901A\u8BDD\u6CA1\u6709\u5F55\u97F3");return}if(c==r&&c!=""){_.paused===!1?(_.pause(),clearInterval(i)):(_.play(),g(n));return}if(c!=r&&c!=""){var m=document.getElementById("timeLength"+R.id);m.innerHTML=R.timeLength,clearInterval(i),Z(n,r,_)}else Z(n,r,_)}},Z=function(n,_,r){(0,G.Z)("/sms/ec/ecCallLog/download",n.id,_,".mp3").then(function(m){A(_),r.src=m,r.load(),r.play(),g(n),J(n)})},U=[{title:"\u5B66\u5458\u59D3\u540D",dataIndex:"studentName",copyable:!0,ellipsis:!0},{title:"\u5B66\u5458\u624B\u673A\u53F7",dataIndex:"mobile",copyable:!0,ellipsis:!0},{title:"\u6C9F\u901A\u4EBA",dataIndex:"userName",ellipsis:!0},{title:"\u901A\u8BDD\u65F6\u957F(\u79D2)",dataIndex:"timeLength",render:function(n,_){return(0,o.jsxs)("div",{children:[(0,o.jsx)("a",{id:"timeLength"+_.id,onClick:function(m){return X(_)},children:_.timeLength}),(0,o.jsx)("a",{children:"\u2033"})]})}},{title:"\u8BF7\u6C42\u65F6\u95F4",key:"startTime",dataIndex:"startTime",valueType:"dateRange",sorter:!0,render:function(n,_){return(0,o.jsx)("span",{children:_.startTime})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",fixed:"right",render:function(n,_,r,m){return[(0,o.jsx)(S.Z,{type:"primary",size:"small",icon:(0,o.jsx)(z.Z,{}),onClick:(0,N.Z)((0,p.Z)().mark(function f(){return(0,p.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:case"end":return E.stop()}},f)})),children:"\u67E5\u770B"},"view")]}}],Y=[(0,o.jsx)(S.Z,{type:"primary",onClick:function(){j.Z.post("/sms/ec/ecCallLog/synchronize").then(function(n){n.status=="success"&&(O.default.success("\u540C\u6B65\u6210\u529F"),$())})},children:"\u7ACB\u5373\u540C\u6B65\u901A\u8BDD\u8BB0\u5F55"}),(0,o.jsx)("audio",{id:"audio"})],W=(0,B.Z)({},"startTime","desc");return(0,o.jsx)(F.ZP,{children:(0,o.jsx)(H.Z,{actionRef:T,columns:U,request:{url:"/sms/ec/ecCallLog",sortList:W},toolBarRender:Y})})}}}]);
