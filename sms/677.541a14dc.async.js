(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[677],{6821:function(Be,ae,e){"use strict";var me=e(39428),ie=e(3182),H=e(43185),B=e(43027),F=e(34792),O=e(48086),T=e(11849),P=e(2824),L=e(80876),I=e(28975),A=e(67294),S=e(61261),j=e(41574),l=e(85893);ae.Z=function(_){var x=_.width,r=_.action,se=_.name,y=_.fieldProps,le=y===void 0?{}:y,ee=_.label,N=_.rules,M=_.renderData,ye=_.fileUrl,s=(0,A.useState)(!1),G=(0,P.Z)(s,2),Y=G[0],J=G[1],oe=(0,A.useState)(),ce=(0,P.Z)(oe,2),V=ce[0],he=ce[1],te=(0,A.useState)(),Q=(0,P.Z)(te,2),ne=Q[0],t=Q[1],U=(0,A.useState)(!1),ve=(0,P.Z)(U,2),g=ve[0],pe=ve[1],X=sessionStorage.getItem("tokenName"),q=sessionStorage.getItem("tokenValue"),re={};return re[X]=q,(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(L.Z,{width:x,action:r,name:se,label:ee,fieldProps:(0,T.Z)((0,T.Z)({},le),{},{multiple:!0,listType:"picture",headers:(0,T.Z)({},re),defaultFileList:[],beforeUpload:function(i){if(i.size>4096e4)return O.default.error("\u4E0A\u6B21\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC740M"),B.Z.LIST_IGNORE},onPreview:function(){var Z=(0,ie.Z)((0,me.Z)().mark(function d(f){var v;return(0,me.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:console.log("file",f),f.thumbUrl?(he(f.thumbUrl),J(!0)):(v=f.name.slice(f.name.indexOf(".")),v==".pdf"?(0,S.Z)(M.id,f.name,ye,t,pe):(0,S.Z)(M.id,f.name,ye,he,J));case 2:case"end":return z.stop()}},d)}));function i(d){return Z.apply(this,arguments)}return i}(),onChange:function(i){var d=i.file.status;console.log("info",i),d==="done"?O.default.success("".concat(i.file.name," \u4E0A\u4F20\u6210\u529F.")):d==="error"&&O.default.error("".concat(i.file.name," \u4E0A\u4F20\u5931\u8D25."))}}),rules:N}),Y&&(0,l.jsx)(I.Z,{imgSrc:V,isModalVisibles:Y,setisModalVisibles:function(i){return J(i)}}),(0,l.jsx)(j.Z,{previewVisible:g,setPreviewVisible:function(){return pe(!1)},previewImage:ne})]})}},57126:function(Be,ae,e){"use strict";var me=e(71194),ie=e(50146),H=e(78697),B=e(85893);ae.Z=function(F){var O=F.CardVisible,T=F.setCardVisible,P=F.setGrouptment,L=F.ment;return(0,B.jsx)(ie.Z,{visible:O,onCancel:function(){return T()},onOk:function(){T(),L()},children:(0,B.jsx)(H.Z,{type:"modal",setParentIdTree:function(A){P(A)},setCardVisible:function(){return T()}})})}},78697:function(Be,ae,e){"use strict";var me=e(32157),ie=e(5816),H=e(86582),B=e(39428),F=e(3182),O=e(11849),T=e(2824),P=e(47673),L=e(4107),I=e(30202),A=e(67294),S=e(63863),j=e(85893),l=L.Z.Search,_=[];ae.Z=function(x){var r=x.setParentIdTree,se=x.setParentIdFalg,y=x.callbackRef,le=x.type,ee=(0,A.useState)([]),N=(0,T.Z)(ee,2),M=N[0],ye=N[1],s=(0,A.useState)([]),G=(0,T.Z)(s,2),Y=G[0],J=G[1],oe=(0,A.useState)(""),ce=(0,T.Z)(oe,2),V=ce[0],he=ce[1],te=(0,A.useState)(!0),Q=(0,T.Z)(te,2),ne=Q[0],t=Q[1];(0,A.useEffect)(function(){pe()},[]);var U=function(i){return i.forEach(function(d,f){d.children=[],d.title=d.name,i.forEach(function(v,k){d.id==Math.abs(v.parentId)&&f!=k&&d.children.push(v)}),d.children.length==0&&delete d.children}),i},ve=function Z(i,d){return i.forEach(function(f,v){f.key=v+"-"+d,f.children&&Z(f.children,f.key)}),i},g=function Z(i){return i.filter(function(d){return d.isDel>=0}).map(function(d){return d.children&&d.children.length?(0,O.Z)((0,O.Z)({},d),{},{children:Z(d.children)}):d})},pe=function(){var Z=(0,F.Z)((0,B.Z)().mark(function i(){var d,f,v,k,z;return(0,B.Z)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,S.Z.get("/sms/share/getDepartment",{_isGetAll:!0});case 2:d=Ce.sent,f=[],v=d.data.reverse(),v=g(v),v.forEach(function(Fe){f.push({title:Fe.name,key:Fe.id})}),k=U(v),z=ve(k,0),ye(z);case 10:case"end":return Ce.stop()}},i)}));return function(){return Z.apply(this,arguments)}}(),X=function(i){J(i),t(!1)},q=function(i){var d=i.target.value;he(d),t(!0)},re=function Z(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=[];return i.forEach(function(f){var v,k=(v=f.title)===null||v===void 0?void 0:v.indexOf(V);if(f.children&&V.length>0){var z;(z=d).push.apply(z,(0,H.Z)(Z(f.children)))}k>-1&&V.length>0&&d.push({title:f.title,id:f.id,key:f.key}),V.length==0&&(d=[],d.push(f))}),d};return(0,j.jsxs)(I.ZP,{title:"\u90E8\u95E8\u5217\u8868",colSpan:"25%",style:{width:le=="modal"?"100%":"25%"},children:[(0,j.jsx)(l,{style:{marginBottom:30},placeholder:"Search",onChange:function(i){return q(i)}}),M.length>0&&(0,j.jsx)(ie.Z,{showIcon:!0,defaultExpandAll:!0,onExpand:function(i){return X(i)},autoExpandParent:ne,defaultCheckedKeys:_,onSelect:function(i,d){r({id:d.node.id,name:d.node.title}),se&&se(!1),y&&y()},treeData:re(M)})]})}},22034:function(Be,ae,e){"use strict";e.d(ae,{Z:function(){return s}});var me=e(11849),ie=e(57663),H=e(71577),B=e(2824),F=e(22),O=e(37490),T=e(51042),P=e(67294),L=e(34792),I=e(48086),A=e(39428),S=e(3182),j=e(952),l=e(37476),_=e(5966),x=e(90672),r=e(63863),se=e(57126),y=e(85893),le=function(G){var Y=(0,P.useRef)(),J=(0,P.useState)(!1),oe=(0,B.Z)(J,2),ce=oe[0],V=oe[1],he=(0,P.useState)({name:""}),te=(0,B.Z)(he,2),Q=te[0],ne=te[1],t=G.modalVisible,U=G.setModalVisible,ve=G.callbackRef,g=G.renderData;(0,P.useEffect)(function(){if(g.type!="add"){if(g.type=="eidt"){var Z;X(),console.log("department",Q),Y==null||(Z=Y.current)===null||Z===void 0||Z.setFieldsValue((0,me.Z)((0,me.Z)({},g),{},{departmentId:Q.name}))}}},[]);var pe=function(){var i;Y==null||(i=Y.current)===null||i===void 0||i.setFieldsValue({departmentId:Q.name})},X=function(){var Z=(0,S.Z)((0,A.Z)().mark(function i(){return(0,A.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.t0=ne,f.next=3,O.Z.getDepartment(g.departmentId);case 3:f.t1=f.sent.data.content[0],(0,f.t0)(f.t1);case 5:case"end":return f.stop()}},i)}));return function(){return Z.apply(this,arguments)}}();(0,P.useEffect)(function(){pe()},[Q]);var q={labelCol:{span:4},wrapperCol:{span:14}},re=function(i){return i.departmentId&&(i.departmentId=Q.id),g.type=="eidt"&&(i.id=g.id),new Promise(function(d,f){r.Z.post("/sms/system/sysGroup",i).then(function(v){v.status=="success"&&(d(!0),I.default.success("\u63D0\u4EA4\u6210\u529F"),U(),ve())}).catch(function(v){d(!0)})})};return(0,y.jsxs)(l.Y,{title:g.type=="add"?"\u65B0\u5EFA\u5C0F\u7EC4":"\u4FEE\u6539\u5C0F\u7EC4\u4FE1\u606F",autoFocusFirstInput:!0,width:600,modalProps:{onCancel:function(){return U()}},formRef:Y,onFinish:function(){var Z=(0,S.Z)((0,A.Z)().mark(function i(d){return(0,A.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,re(d);case 2:case"end":return v.stop()}},i)}));return function(i){return Z.apply(this,arguments)}}(),visible:t,children:[(0,y.jsx)(_.Z,{width:"xl",name:"name",label:"\u5C0F\u7EC4\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u6B63\u786E\u586B\u5199\uFF0C\u4E0D\u80FD\u5305\u542B\u7A7A\u683C",pattern:new RegExp(/^\S*$/)}]}),(0,y.jsxs)(j.ZP.Group,{children:[(0,y.jsx)(_.Z,{name:"departmentId",label:"\u90E8\u95E8",rules:[{required:!0}],width:"md"}),(0,y.jsx)(H.Z,{style:{marginTop:"30px",marginLeft:"-30px"},type:"primary",onClick:(0,S.Z)((0,A.Z)().mark(function Z(){return(0,A.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r.Z.get("/sms/share/getDepartmentAndUser"),V(!0);case 2:case"end":return d.stop()}},Z)})),children:"\u9009\u62E9"})]}),(0,y.jsx)(x.Z,{width:"md",name:"description",label:"\u63CF\u8FF0"}),(0,y.jsx)(se.Z,{CardVisible:ce,setCardVisible:function(){return V(!1)},setGrouptment:function(i){return ne(i)},ment:function(){return pe()}})]})},ee=e(71194),N=e(50146),M=e(7e3),ye=function(G){var Y=G.CardVisible,J=G.setCardVisible,oe=G.renderData;return(0,y.jsx)(N.Z,{width:1200,visible:Y,onCancel:function(){return J()},onOk:function(){J()},children:(0,y.jsx)(M.default,{params:oe})})},s=function(G){var Y=G.falg,J=Y===void 0?!0:Y,oe=G.setGrouptment,ce=G.setCardVisible,V=(0,P.useRef)(),he=(0,P.useState)({}),te=(0,B.Z)(he,2),Q=te[0],ne=te[1],t=(0,P.useState)(!1),U=(0,B.Z)(t,2),ve=U[0],g=U[1],pe=(0,P.useState)(!1),X=(0,B.Z)(pe,2),q=X[0],re=X[1],Z=function(){setTimeout(function(){var v;V==null||(v=V.current)===null||v===void 0||v.reload()},100)},i=[{title:"\u540D\u5B57",dataIndex:"name"},{title:"\u90E8\u95E8",dataIndex:"departmentId",render:function(v,k){return(0,y.jsx)("span",{children:O.Z.getDepartmentName(k.departmentId)[0]})}},{title:"\u63CF\u8FF0",dataIndex:"description"},{title:"\u64CD\u4F5C",render:function(v,k){return[(0,y.jsx)(H.Z,{type:"primary",size:"small",style:{marginRight:"10px"},hidden:J,onClick:function(Ee){oe({name:k.name,id:k.id}),ce()},children:"\u9009\u62E9"}),(0,y.jsx)(H.Z,{type:"primary",size:"small",style:{marginRight:"10px"},onClick:function(Ee){ne(k),re(!0)},children:"\u67E5\u770B"}),(0,y.jsx)(H.Z,{type:"primary",size:"small",onClick:function(Ee){ne((0,me.Z)((0,me.Z)({},k),{},{type:"eidt"})),g(!0)},children:"\u7F16\u8F91"})]}}],d=[(0,y.jsx)(H.Z,{icon:(0,y.jsx)(T.Z,{}),type:"primary",onClick:function(){ne({type:"add"}),g(!0)},children:"\u65B0\u5EFA"},"button")];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(F.Z,{request:{url:"/sms/system/sysGroup"},columns:i,toolBarRender:d,actionRef:V}),ve&&(0,y.jsx)(le,{modalVisible:ve,setModalVisible:function(){return g(!1)},callbackRef:function(){return Z()},renderData:Q}),q&&(0,y.jsx)(ye,{CardVisible:q,setCardVisible:function(){return re(!1)},callbackRef:function(){return Z()},renderData:Q})]})}},14037:function(Be,ae,e){"use strict";var me=e(71194),ie=e(50146),H=e(34792),B=e(48086),F=e(32157),O=e(5816),T=e(88983),P=e(55742),L=e(86582),I=e(2824),A=e(47673),S=e(4107),j=e(54618),l=e(89366),_=e(63863),x=e(67294),r=e(85893),se=S.Z.Search;ae.Z=function(y){var le=y.CardVisible,ee=y.setCardVisible,N=y.setDepartment,M=y.CardContent,ye=y.departments,s=y.parentIdTree,G=y.checkable,Y=G===void 0?!1:G,J=y.callbackRef,oe=y.setchargePerson,ce=y.setUserID,V=y.getUserList,he=y.departNameList,te=he===void 0?!1:he,Q,ne=[],t=[],U=[],ve=(0,x.useState)([]),g=(0,I.Z)(ve,2),pe=g[0],X=g[1],q=(0,x.useState)(""),re=(0,I.Z)(q,2),Z=re[0],i=re[1],d=(0,x.useState)(!0),f=(0,I.Z)(d,2),v=f[0],k=f[1],z=(0,x.useState)(!1),Ee=(0,I.Z)(z,2),Ce=Ee[0],Fe=Ee[1],ke=function C(D){var o=[];return D.forEach(function(m,p){if(m.enable||Ce||m.departmentName){var n=[];m.children&&(n=C(m.children));var u="",de,E;m.departmentName?(u=m.departmentName,de=(0,r.jsx)(j.Z,{}),E=!1):(u=m.name,de=(0,r.jsx)(l.Z,{}),E=!1),n.length>0?o.push({title:u,key:p,userId:m.userId,children:n,icon:de,disabled:E,id:m.id}):o.push({title:u,key:p,userId:m.userId,icon:de,disabled:E,id:m.id})}}),o},Te=[];M.content.forEach(function(C){C.departmentName?C.departmentName.indexOf("\u79BB\u804C")==-1&&Te.push(C):Te.push(C)}),M&&(U=ke(Te));var Ne=function C(D,o){D.forEach(function(m,p){m.key=o+"-"+p,m.children&&C(m.children,m.key)})},c=function C(D,o){D.forEach(function(m,p){["role","user","achievement","Groups","projectDepartment","sysuser"].includes(M.type)?m.userId==o&&(t.push(m.key),ne.push(m)):m.id==o&&t.push(m.key),m.children&&C(m.children,o)})};U.length>0&&(Ne(U,0),ye&&ye.forEach(function(C){c(U,C.id)}),te&&te.split(",").forEach(function(C){c(U,C)}));var Ue=function C(D,o){for(var m=[],p=0;p<o.length;p++){var n=o[p];n.children&&(n.children.some(function(u){return u.title.indexOf(D)!=-1})?m.push(n.key):C(D,n.children)&&m.push.apply(m,(0,L.Z)(C(D,n.children))))}return m},Ve=function(D){X(D),k(!1)},Ze=function(D){var o=D.target.value;X(Ue(o,U)),i(o),k(!0)},we=function(D){var o=D.target.value;Fe(o)},Me=function C(D){return D.map(function(o){var m=o.title.indexOf(Z),p=o.title.substring(0,m),n=o.title.slice(m+Z.length),u=m>-1?(0,r.jsxs)("span",{children:[p,(0,r.jsx)("span",{className:"site-tree-search-value",children:Z}),n]}):(0,r.jsx)("span",{children:o.title});return o.children?{title:u,key:o.key,disabled:o.disabled,icon:o.icon,children:C(o.children),userId:o.userId}:{title:u,key:o.key,icon:o.icon,userId:o.userId,titles:o.title,disabled:o.disabled}})};return(0,x.useEffect)(function(){if(!Z){let D=function(o){o.forEach(function(m){m.children&&(C.push(m.key),D(m.children))})};var C=[];D(U),X(C)}},[Z]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(P.ZP.Group,{onChange:we,value:Ce,defaultValue:Ce,children:[(0,r.jsx)(P.ZP,{value:!1,children:"\u4E0D\u67E5\u770B\u79BB\u804C"}),(0,r.jsx)(P.ZP,{value:!0,children:"\u67E5\u770B\u79BB\u804C"})]}),(M==null?void 0:M.type)=="performance"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(se,{style:{marginBottom:8},placeholder:"Search",onChange:function(D){return Ze(D)}}),(0,r.jsx)(O.Z,{showIcon:!0,checkable:Y,defaultExpandAll:!0,onExpand:function(D){return Ve(D)},autoExpandParent:v,defaultCheckedKeys:t,onCheck:function(D,o){var m=o.checkedNodes,p=[];m.forEach(function(n){n.userId&&p.push(n.userId)}),ce(p)},onSelect:function(D,o){o.node.userId&&ce(o.node.userId)},treeData:Me(U)})]}):(0,r.jsx)(ie.Z,{title:"\u9009\u62E9\u4EBA\u5458",visible:le,destroyOnClose:!0,onCancel:function(){t=[],ee(!1)},onOk:function(){var D,o=[],m=[];if((D=ne)===null||D===void 0||D.forEach(function(E){E.userId&&(o.push(E),m.push(E.userId))}),M.type=="projectDepartment"){_.Z.post("/sms/system/sysDepartment",{id:s,projects:m.join(",")}).then(function(E){E.status=="success"&&(B.default.success("\u6388\u6743\u6210\u529F"),t=[],J(),setTimeout(function(){ee(!1)},500))});return}if(M.type=="project"&&_.Z.post2("/sms/business/bizUserJob/updateFromTree",{id:s},{array:m}).then(function(E){E.status=="success"&&(B.default.success("\u6388\u6743\u6210\u529F"),t=[],J(),setTimeout(function(){ee(!1)},500))}),M.type=="user"&&_.Z.post2("/sms/system/sysUserUser/updateFromTree",{id:s},{array:m}).then(function(E){E.status=="success"&&(B.default.success("\u6388\u6743\u6210\u529F"),t=[],J(),setTimeout(function(){ee(!1)},500))}),M.type=="order")if(o.length>1){B.default.error("\u53EA\u80FD\u9009\u62E9\u4E00\u4F4D");return}else o.length==0?B.default.error("\u8BF7\u9009\u62E9\u6536\u8D39\u4EBA\uFF0C\u6536\u8D39\u4EBA\u4E0D\u80FD\u4E3A\u90E8\u95E8"):(N({name:o[0].titles,id:o[0].userId}),t=[],ee(!1));if(M.type=="role"&&_.Z.post2("/sms/system/sysUserRole/updateFromTree",{id:s},{array:m}).then(function(E){E.status=="success"&&(B.default.success("\u6388\u6743\u6210\u529F"),t=[],J(),setTimeout(function(){ee(!1)},500))}),M.type=="achievement"){var p=m.map(function(E){return{id:E,newOrderType:M.typeNum}}),n=ye.map(function(E){return E.id});n.forEach(function(E){m.includes(E)||p.push({id:E,newOrderType:0})}),_.Z.postAll("/sms/system/sysUser/saveArray",{array:p}).then(function(E){E.status=="success"&&(B.default.success("\u6388\u6743\u6210\u529F"),t=[],V(),setTimeout(function(){ee(!1)},500))})}if(M.type=="Groups"){var u=m.map(function(E){return{id:E,groupId:M.groups}}),de=ye.map(function(E){return E.id});de.forEach(function(E){m.includes(E)||u.push({id:E,groupId:-1})}),_.Z.postAll("/sms/system/sysUser/saveArray",{array:u}).then(function(E){E.status=="success"&&(B.default.success("\u6388\u6743\u6210\u529F"),t=[],J(),setTimeout(function(){ee(!1)},500))})}M.type=="sysuser"&&_.Z.postAll("/sms/system/sysUserLevel/correlationUser/".concat(s),m).then(function(E){E.status=="success"&&(B.default.success("\u6388\u6743\u6210\u529F"),t=[],J(),setTimeout(function(){ee(!1)},500))})},children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(se,{style:{marginBottom:8},placeholder:"Search",onChange:function(D){return Ze(D)}}),(0,r.jsx)(O.Z,{showIcon:!0,checkable:(M==null?void 0:M.type)!="pay",defaultExpandAll:!0,onExpand:function(D){return Ve(D)},expandedKeys:pe,autoExpandParent:v,defaultCheckedKeys:t,onCheck:function(D,o){ne=o.checkedNodes},onSelect:function(D,o){Q={name:o.node.title,id:o.node.userId},M.type=="pay"&&o.node.userId&&(oe({name:o.node.titles,id:o.node.userId}),ee(!1))},treeData:Me(U)})]})})]})}},7e3:function(Be,ae,e){"use strict";e.r(ae),e.d(ae,{default:function(){return ve}});var me=e(71194),ie=e(50146),H=e(49111),B=e(19650),F=e(62350),O=e(24565),T=e(77576),P=e(12028),L=e(34792),I=e(48086),A=e(57663),S=e(71577),j=e(11849),l=e(39428),_=e(3182),x=e(2824),r=e(67294),se=e(51042),y=e(32779),le=e(66801),ee=e(71906),N=e(63863),M=e(37490),ye=e(14037),s=e(57840),G=e(79046),Y=e(92786),J=e(15258),oe={id:"id",\u59D3\u540D:"name",\u529E\u516C\u5730\u70B9:"officeAddress",\u90E8\u95E8:"departmentId",\u4EBA\u5458\u72B6\u6001:"status",\u804C\u79F0\u7EA7\u522B:"level",\u8EAB\u4EFD\u8BC1:"idCard",\u751F\u65E5\u65E5\u671F:"birthday",\u5165\u804C\u65F6\u95F4:"entryTime",\u8F6C\u6B63\u65F6\u95F4:"formalTime",\u79BB\u804C\u65F6\u95F4:"turnoverTime",\u79C1\u4EBA\u624B\u673A\u53F7:"privateMobile",\u5DE5\u4F5C\u624B\u673A\u53F7:"mobile",\u5BB6\u5C5E\u53CA\u8054\u7CFB\u65B9\u5F0F:"familyInfo",\u6BD5\u4E1A\u9662\u6821:"graduationSchool",\u6BD5\u4E1A\u65F6\u95F4:"graduationTime",\u5B66\u5386:"degree",\u6C11\u65CF:"ethnic",\u5A5A\u59FB\u4FE1\u606F:"marriageInfo",\u653F\u6CBB\u9762\u8C8C:"formalAppearance",\u4E13\u4E1A:"profession",\u73B0\u5C45\u4F4F\u5730\u5740:"residentialAddress",\u8EAB\u4EFD\u8BC1\u5C45\u4F4F\u5730\u5740:"idCardAddress",\u6237\u7C4D\u6240\u5728\u5730:"householdRegistrationAddress",\u7C4D\u8D2F:"nativePlace",\u90AE\u7BB1:"email"," \u63A8\u8350\u4EBA/\u62DB\u8058\u4EBA":"userId",\u524D\u5355\u4F4D:"frontUnit",\u521B\u5EFA\u65E5\u671F:"createTime",\u662F\u5426\u5DF2\u91CD\u7F6E\u5BC6\u7801:"isReset",\u662F\u5426\u542F\u7528:"enable"},ce=e(30202),V=e(37476),he=e(6821),te=e(59255),Q=e(66573),ne=e(47038),t=e(85893),U=null,ve=function(g){var pe=g.type,X=pe===void 0?0:pe,q=(0,r.useRef)(),re=(0,r.useRef)(),Z=(0,r.useState)(!1),i=(0,x.Z)(Z,2),d=i[0],f=i[1],v=(0,r.useState)({}),k=(0,x.Z)(v,2),z=k[0],Ee=k[1],Ce=(0,r.useState)(!1),Fe=(0,x.Z)(Ce,2),ke=Fe[0],Te=Fe[1],Ne=(0,r.useState)("1"),c=(0,x.Z)(Ne,2),Ue=c[0],Ve=c[1],Ze=(0,r.useState)(!1),we=(0,x.Z)(Ze,2),Me=we[0],C=we[1],D=(0,r.useState)("-1"),o=(0,x.Z)(D,2),m=o[0],p=o[1],n=(0,r.useState)(!1),u=(0,x.Z)(n,2),de=u[0],E=u[1],_e=(0,r.useState)(),Pe=(0,x.Z)(_e,2),Ge=Pe[0],Le=Pe[1],$e=(0,r.useState)(),Ke=(0,x.Z)($e,2),Qe=Ke[0],Ie=Ke[1],De=(0,r.useState)([]),Ae=(0,x.Z)(De,2),ot=Ae[0],ct=Ae[1],ft=(0,r.useState)(!1),Xe=(0,x.Z)(ft,2),qe=Xe[0],Ye=Xe[1],mt=(0,r.useState)(!1),et=(0,x.Z)(mt,2),ze=et[0],He=et[1],ht=(0,r.useState)(!1),tt=(0,x.Z)(ht,2),vt=tt[0],nt=tt[1],pt=(0,r.useState)({}),at=(0,x.Z)(pt,2),st=at[0],Et=at[1],Zt=(0,r.useState)({}),rt=(0,x.Z)(Zt,2),ut=rt[0],gt=rt[1],yt=(0,r.useState)(),it=(0,x.Z)(yt,2),Ct=it[0],_t=it[1],xe=function(){var K;q==null||(K=q.current)===null||K===void 0||K.reload()},lt=function(){var R=(0,_.Z)((0,l.Z)().mark(function K(){var a,$,W,w;return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,N.Z.get("/sms/system/sysUser",{newOrderType:"1",_isGetAll:!0});case 2:return a=b.sent.data.content,$={userName:[],userId:[]},a.forEach(function(ue){$.userName.push(ue.name),$.userId.push({id:ue.id,name:ue.name})}),b.next=7,N.Z.get("/sms/system/sysUser",{newOrderType:"2",_isGetAll:!0});case 7:W=b.sent.data.content,w={userName:[],userId:[]},W.forEach(function(ue){w.userName.push(ue.name),w.userId.push({id:ue.id,name:ue.name})}),Et($),gt(w);case 12:case"end":return b.stop()}},K)}));return function(){return R.apply(this,arguments)}}(),Je=function(){var R=(0,_.Z)((0,l.Z)().mark(function K(a){var $,W;return(0,l.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(U){h.next=4;break}return h.next=3,N.Z.get("/sms/share/getDepartmentAndUser");case 3:U=h.sent;case 4:W="",a==3?W=Ct.userId:W=a==1?st.userId:ut.userId,Le({content:U.data,type:a==3?"Groups":"achievement",typeNum:a,groups:g==null||($=g.params)===null||$===void 0?void 0:$.id}),Ie(W),C(!0);case 9:case"end":return h.stop()}},K)}));return function(a){return R.apply(this,arguments)}}();(0,r.useEffect)(function(){Ue=="3"&&lt()},[Ue]),(0,r.useEffect)(function(){ze&&z.infoFile&&setTimeout(function(){var R;(R=re.current)===null||R===void 0||R.setFieldsValue({infoFile:[{uid:1,name:z.infoFile,response:{data:z.infoFile}}]})},200)},[ze]);var Dt=[{title:"\u540D\u5B57",dataIndex:"name",render:function(K,a){return(0,t.jsx)("a",{onClick:function(){Ee((0,j.Z)({},a)),Ye(!0)},children:a.name})}},{title:"\u6388\u6743\u4EBA\u5458",dataIndex:"userNames",colSpan:2,search:!1,ellipsis:!0,tip:"\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u5173\u8054",colSpan:0,search:!1,render:function(K,a,$,W){return(0,t.jsx)(S.Z,{size:"small",type:"primary",icon:(0,t.jsx)(se.Z,{}),onClick:(0,_.Z)((0,l.Z)().mark(function w(){return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(U){b.next=4;break}return b.next=3,N.Z.get("/sms/share/getDepartmentAndUser");case 3:U=b.sent;case 4:Le({content:U.data,type:"user"}),Ie(a.userList),p(a.id),C(!0);case 8:case"end":return b.stop()}},w)})),children:"\u6388\u6743"})}},{title:"\u6388\u6743\u9879\u76EE",dataIndex:"project",colSpan:2,search:!1,ellipsis:!0,tip:"\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29"},{title:"\u5173\u8054",search:!1,colSpan:0,render:function(K,a,$,W){return(0,t.jsx)(S.Z,{size:"small",type:"primary",icon:(0,t.jsx)(se.Z,{}),onClick:(0,_.Z)((0,l.Z)().mark(function w(){var h;return(0,l.Z)().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:h=M.Z.getTree("dict_reg_job"),Le({content:h,type:"project"}),Ie(a.projectList),p(a.id),C(!0);case 5:case"end":return ue.stop()}},w)})),children:"\u6388\u6743"})}}],xt=[{title:"\u540D\u5B57",dataIndex:"name",render:function(K,a){return(0,t.jsx)("a",{onClick:function(){Ee((0,j.Z)({},a)),Ye(!0)},children:a.name})}},{title:"\u6240\u5C5E\u516C\u53F8",dataIndex:"companyId",key:"companyId",valueType:"select",request:ne.ZL},{title:"\u90E8\u95E8",dataIndex:"departmentName",key:"departmentName",search:!1,render:function(K,a){return(0,t.jsx)("span",{children:M.Z.getDepartmentName(a.departmentId).join("-")})}},{title:"\u624B\u673A\u53F7",dataIndex:"mobile"},{title:"\u5728\u804C\u72B6\u6001",dataIndex:"status",valueType:"select",key:"status",filters:!0,filterMultiple:!1,valueEnum:M.Z.getSearch("onJobStatus"),render:function(K,a){return(0,t.jsx)("span",{children:M.Z.getName("onJobStatus",a.status)})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",dataIndex:"createTime",valueType:"dateTime",search:!1},{title:"\u6700\u540E\u767B\u5F55\u65F6\u95F4",key:"lastLoginTime",dataIndex:"lastLoginTime",valueType:"dateTime",search:!1,hideInTable:!0,hideInSearch:!0},{title:"\u662F\u5426\u5DF2\u91CD\u7F6E\u5BC6\u7801",key:"isReset",dataIndex:"isReset",search:!1,hideInSearch:!0,render:function(K,a){return(0,t.jsx)(t.Fragment,{children:a.isReset?"\u5DF2\u91CD\u7F6E":(0,t.jsx)("span",{style:{color:"red"},children:"\u672A\u91CD\u7F6E"})})}},{title:"\u4EBA\u5458\u8D44\u6599\u6587\u4EF6",dataIndex:"infoFile",hideInTable:X!=1,search:!1,render:function(K,a){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Z,{type:"primary",size:"small",hidden:!a.infoFile,onClick:function(){var $=(0,_.Z)((0,l.Z)().mark(function W(w){var h,b,ue;return(0,l.Z)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:h=sessionStorage.getItem("tokenName"),b=sessionStorage.getItem("tokenValue"),ue={},ue[h]=b,fetch("/sms/system/sysUser/download?id="+a.id+"&fileName="+a.infoFile,{method:"GET",headers:(0,j.Z)({},ue)}).then(function(be){be.blob().then(function(Re){var ge=new FileReader;ge.onload=function(Se){var We;(We=Se.target)!==null&&We!==void 0&&We.result&&Se.target.result instanceof ArrayBuffer&&te.convertToHtml({arrayBuffer:Se.target.result}).then(function(Oe){console.log(Oe);var dt=document.getElementById("infoFileDocx");dt&&(dt.innerHTML=Oe.value)}).catch(function(Oe){console.error(Oe)})},ge.readAsArrayBuffer(new Blob([Re]))})}),nt(!0);case 6:case"end":return fe.stop()}},W)}));return function(W){return $.apply(this,arguments)}}(),children:"\u67E5\u770B"}),(0,t.jsx)(S.Z,{style:{marginLeft:5},type:"primary",size:"small",hidden:!a.infoFile,onClick:function(){(0,Q.Z)("/sms/system/sysUser/download",a.id,{fileName:a.infoFile},a.name+".docx")},children:"\u4E0B\u8F7D"}),(0,t.jsx)(S.Z,{style:{marginLeft:5},type:"primary",size:"small",onClick:function(){var $=(0,_.Z)((0,l.Z)().mark(function W(w){return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:Ee((0,j.Z)({},a)),He(!0);case 2:case"end":return b.stop()}},W)}));return function(W){return $.apply(this,arguments)}}(),children:"\u4E0A\u4F20\u8D44\u6599"})]})}},{title:"\u7528\u6237\u72B6\u6001",dataIndex:"enable",hideInTable:X==1,search:!1,render:function(K,a){return(0,t.jsx)(P.Z,{checkedChildren:"\u542F\u7528",unCheckedChildren:"\u7981\u7528",defaultChecked:a.enable,loading:ke,onChange:(0,_.Z)((0,l.Z)().mark(function $(){var W;return(0,l.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return Te(!0),h.next=3,N.Z.post("/sms/system/sysUser",{id:a.id,enable:!a.enable});case 3:W=h.sent,W.status!="success"&&I.default.error(W.msg),Te(!1),xe();case 7:case"end":return h.stop()}},$)}))},a.id)}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",fixed:"right",hideInTable:g==null?void 0:g.params,render:function(K,a,$,W){return[(0,t.jsx)(S.Z,{type:"primary",size:"small",onClick:function(){Ee((0,j.Z)((0,j.Z)({},a),{},{type:"eidt",numberEidt:0})),f(!0)},children:"\u7F16\u8F91"},"editable-user-manage"),(0,t.jsx)(O.Z,{title:"\u662F\u5426\u91CD\u7F6E\u5BC6\u7801\uFF1F",onConfirm:function(){N.Z.post("/sms/system/sysUser/resetPassword",{id:a.id}).then(function(h){h.status=="success"&&(I.default.success("\u91CD\u7F6E\u6210\u529F"),xe())})},okText:"\u91CD\u7F6E",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(S.Z,{type:"primary",size:"small",danger:!0,children:"\u91CD\u7F6E\u5BC6\u7801"},"btn-resetPwd-".concat(a.id))},"".concat(a.id,"-resetPwd")),(0,t.jsx)(O.Z,{title:a.ecId?"\u662F\u5426\u5220\u9664EC\u8D26\u53F7\uFF1F":"\u662F\u5426\u521B\u5EFAEC\u8D26\u53F7\uFF1F",onConfirm:function(){a.ecId?N.Z.delete("/sms/system/sysUser/deleteEcUser",{id:a.id}).then(function(h){h.status=="success"&&(I.default.success("\u5220\u9664\u6210\u529F"),xe())}):N.Z.post("/sms/system/sysUser/createEcUser",{id:a.id}).then(function(h){h.status=="success"&&(I.default.success("\u521B\u5EFA\u6210\u529F"),xe())})},okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(S.Z,{type:"primary",size:"small",danger:!!a.ecId,hidden:X==1,children:a.ecId?"\u5220\u9664EC":"\u521B\u5EFAEC"},"btn-ec-".concat(a.id))},"".concat(a.id,"-ec")),(0,t.jsx)(O.Z,{title:"\u662F\u5426\u91CD\u7F6E\u5BC6\u7801\uFF1F",onConfirm:function(){N.Z.post("/sms/share/buildAccount").then(function(h){h.status=="success"&&(I.default.success("\u91CD\u6784\u6210\u529F"),xe())})},okText:"\u91CD\u6784",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(S.Z,{type:"primary",size:"small",danger:!0,hidden:X==1,children:"\u91CD\u6784\u6CD5\u5927\u5927"},"btn-rebuild-".concat(a.id))},"".concat(a.id,"-rebuild")),(0,t.jsx)(O.Z,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",onConfirm:function(){N.Z.delete("/sms/system/sysUser",{id:a.id}).then(function(h){h.status=="success"&&(I.default.success("\u5220\u9664\u6210\u529F"),xe())})},okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(S.Z,{type:"primary",size:"small",danger:!0,hidden:X==1,children:"\u5220\u9664"},"btn-delete-".concat(a.id))},"".concat(a.id,"-delete"))]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",fixed:"right",hideInTable:!(g!=null&&g.params),render:function(K,a,$,W){return[(0,t.jsx)(O.Z,{title:"\u662F\u5426\u786E\u5B9A\u79FB\u9664\uFF1F",onConfirm:function(){N.Z.post("/sms/system/sysUser",{groupId:"-1",id:a.id}).then(function(h){h.status=="success"&&(I.default.success("\u79FB\u9664\u6210\u529F"),xe())})},okText:"\u79FB\u9664",cancelText:"\u53D6\u6D88",children:(0,t.jsx)(S.Z,{type:"primary",size:"small",danger:!0,children:"\u79FB\u9664\u5C0F\u7EC4"},"btn-remove-".concat(a.id))},"".concat(a.id,"-remove"))]}}],jt=function(K){var a=(0,t.jsx)("span",{});if(K=="1"&&(a=(0,t.jsx)(le.ZP,{columns:xt,actionRef:q,cardBordered:!0,request:(0,_.Z)((0,l.Z)().mark(function w(){var h,b,ue,je,fe,be=arguments;return(0,l.Z)().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return h=be.length>0&&be[0]!==void 0?be[0]:{},b=be.length>1?be[1]:void 0,ue=be.length>2?be[2]:void 0,g!=null&&g.params&&(h.groupId=g.params.id),ge.next=6,N.Z.get("/sms/system/sysUser",h);case 6:return je=ge.sent,g!=null&&g.params&&(fe={userName:[],userId:[]},je.data.content.forEach(function(Se){fe.userName.push(Se.name),fe.userId.push({id:Se.id,name:Se.name})}),_t(fe)),ge.abrupt("return",{data:je.data.content,success:je.success,total:je.data.totalElements});case 9:case"end":return ge.stop()}},w)})),rowKey:"id",search:{labelWidth:"auto"},rowSelection:{onChange:function(h,b){ct(b)}},tableAlertOptionRender:function(h){var b=h.selectedRowKeys,ue=h.selectedRows,je=h.onCleanSelected;return(0,t.jsxs)(B.Z,{size:24,children:[(0,t.jsx)("span",{children:(0,t.jsx)("a",{style:{marginInlineStart:8},onClick:je,children:"\u53D6\u6D88\u9009\u62E9"})}),(0,t.jsx)("a",{onClick:function(){N.Z.get("/sms/system/sysUser",{_isGetAll:!0}).then(function(be){be.status=="success"&&(0,G.Z)(be.data.content,oe,"\u5458\u5DE5\u4FE1\u606F","user")})},children:"\u5BFC\u51FA\u5168\u90E8\u6570\u636E"}),(0,t.jsx)("a",{onClick:function(){(0,G.Z)(ot,oe,"\u5458\u5DE5\u4FE1\u606F","user")},children:"\u5BFC\u51FA\u9009\u62E9\u6570\u636E"})]})},dateFormatter:"string",headerTitle:"\u7528\u6237\u7BA1\u7406",toolBarRender:function(){return[(0,t.jsx)(S.Z,{icon:(0,t.jsx)(se.Z,{}),type:"primary",onClick:function(){Je(3)},hidden:!(g!=null&&g.params),children:"\u6DFB\u52A0\u7528\u6237"},"addUser"),(0,t.jsx)(S.Z,{icon:(0,t.jsx)(se.Z,{}),type:"primary",onClick:function(){Ee({type:"add"}),f(!0)},children:"\u65B0\u5EFA"},"addsbutton")]}})),K=="2"&&(a=(0,t.jsx)(le.ZP,{columns:Dt,actionRef:q,cardBordered:!0,request:(0,_.Z)((0,l.Z)().mark(function w(){var h,b,ue,je,fe=arguments;return(0,l.Z)().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return h=fe.length>0&&fe[0]!==void 0?fe[0]:{},b=fe.length>1?fe[1]:void 0,ue=fe.length>2?fe[2]:void 0,g!=null&&g.params&&(h.groupId=g.params.id),Re.next=6,N.Z.get("/sms/system/sysUser/getUserPermission",h);case 6:return je=Re.sent,je.data.content.forEach(function(ge){var Se=[],We=[];ge.userList&&ge.userList.forEach(function(Oe){Se.push(Oe.name)}),ge.projectList.length>0&&ge.projectList.forEach(function(Oe){We.push(Oe.name)}),ge.userNames=Se.join(","),ge.project=We.join(",")}),Re.abrupt("return",{data:je.data.content,success:je.success,total:je.data.totalElements});case 9:case"end":return Re.stop()}},w)})),rowKey:"id",search:{labelWidth:"auto"},dateFormatter:"string",headerTitle:"\u7528\u6237\u7BA1\u7406",toolBarRender:function(){return[(0,t.jsx)(S.Z,{icon:(0,t.jsx)(y.Z,{}),type:"primary",onClick:function(){N.Z.post("/sms/system/sysUserUser/reload").then(function(b){b.status=="success"&&(I.default.success("\u91CD\u8F7D\u6210\u529F"),xe())})},children:"\u91CD\u8F7D\u6388\u6743\u4EBA\u5458"},"chongbutton"),(0,t.jsx)(S.Z,{icon:(0,t.jsx)(se.Z,{}),type:"primary",onClick:function(){Ee({type:"add"}),f(!0)},children:"\u65B0\u5EFA"},"addbutton")]}})),K=="3"){var $,W;a=(0,t.jsx)("div",{children:(0,t.jsxs)(ce.ZP,{children:[(0,t.jsx)("a",{onClick:(0,_.Z)((0,l.Z)().mark(function w(){return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:Je(1);case 1:case"end":return b.stop()}},w)})),children:"\u4E2A\u4EBA\u4E1A\u7EE9\u5C55\u793A"}),(0,t.jsx)("div",{children:($=st.userName)===null||$===void 0?void 0:$.join(",")}),(0,t.jsx)("a",{onClick:(0,_.Z)((0,l.Z)().mark(function w(){return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:Je(2);case 1:case"end":return b.stop()}},w)})),children:"\u90E8\u95E8\u8D1F\u8D23\u4EBA\u5C55\u793A"}),(0,t.jsx)("div",{children:(W=ut.userName)===null||W===void 0?void 0:W.join(",")})]})})}return a};return(0,t.jsxs)(ee.ZP,{onTabChange:function(K){Ve(K),xe()},tabList:X==0?[{tab:"\u7528\u6237\u7BA1\u7406",key:"1"},{tab:"\u6743\u9650\u7BA1\u7406",key:"2"},{tab:"\u4E1A\u7EE9\u5C55\u793A\u7BA1\u7406",key:"3"}]:X==1?[{tab:"\u7528\u6237\u7BA1\u7406",key:"1"}]:[],children:[jt(Ue),d&&(0,t.jsx)(s.Z,{setModalVisible:function(){return f(!1)},modalVisible:d,callbackRef:function(){return xe()},renderData:z}),qe&&(0,t.jsx)(Y.Z,{setModalVisible:function(){return Ye(!1)},modalVisible:qe,callbackRef:function(){return xe()},renderData:z}),Me&&(0,t.jsx)(ye.Z,{CardVisible:Me,CardContent:Ge,callbackRef:function(){return xe()},getUserList:function(){return lt()},setCardVisible:function(){return C(!1)},parentIdTree:m,departments:Qe}),de&&(0,t.jsx)(J.Z,{setModalVisible:function(){return E(!1)},modalVisible:de,url:"/sms/system/sysUser/saveArray",type:"userManage",callbackRef:function(){return xe()}}),(0,t.jsx)(V.Y,{title:"\u4E0A\u4F20\u4EBA\u5458\u8D44\u6599",visible:ze,formRef:re,onLoad:function(){},onFinish:function(){var R=(0,_.Z)((0,l.Z)().mark(function K(a){return(0,l.Z)().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:!a.infoFile||a.infoFile.length==0?I.default.error("\u8BF7\u4E0A\u4F20\u6587\u4EF6"):a.infoFile.length>1?I.default.error("\u53EA\u80FD\u4E0A\u4F20\u4E00\u4E2A\u6587\u4EF6"):a.infoFile[0].response.data.indexOf(".docx")==-1?I.default.error("\u53EA\u80FD\u4E0A\u4F20docx\u683C\u5F0F\u6587\u4EF6"):(N.Z.post("/sms/system/sysUser",{id:z.id,infoFile:a.infoFile[0].response.data}),xe(),He(!1));case 1:case"end":return W.stop()}},K)}));return function(K){return R.apply(this,arguments)}}(),modalProps:{destroyOnClose:!0,onCancel:function(){He(!1)},maskClosable:!1},children:(0,t.jsx)(he.Z,{name:"infoFile",action:"/sms/system/sysUser/upload",renderData:z,fileUrl:"/sms/system/sysUser/download"})}),(0,t.jsx)(ie.Z,{width:1200,open:vt,footer:null,onCancel:function(){return nt(!1)},children:(0,t.jsx)("div",{id:"infoFileDocx"})})]})}},57840:function(Be,ae,e){"use strict";e.d(ae,{Z:function(){return ce}});var me=e(57663),ie=e(71577),H=e(34792),B=e(48086),F=e(39428),O=e(11849),T=e(3182),P=e(2824),L=e(67294),I=e(45510),A=e(952),S=e(71975),j=e(5966),l=e(64317),_=e(52688),x=e(90672),r=e(37490),se=e(63863),y=e(30381),le=e.n(y),ee=e(57126),N=e(71194),M=e(50146),ye=e(22034),s=e(85893),G=function(V){var he=V.CardVisible,te=V.setCardVisible,Q=V.setGrouptment,ne=V.ment;return(0,L.useEffect)(function(){},[]),(0,s.jsx)(M.Z,{visible:he,width:800,onCancel:function(){return te()},onOk:function(){te(),ne()},children:(0,s.jsx)(ye.Z,{falg:!1,setGrouptment:function(U){Q(U)},setCardVisible:function(){return te(!1)}})})},Y=e(6821),J=e(21874),oe=e(47038),ce=function(V){var he=(0,L.useState)(!1),te=(0,P.Z)(he,2),Q=te[0],ne=te[1],t=(0,L.useState)(!1),U=(0,P.Z)(t,2),ve=U[0],g=U[1],pe=(0,L.useState)({name:""}),X=(0,P.Z)(pe,2),q=X[0],re=X[1],Z=(0,L.useState)({name:""}),i=(0,P.Z)(Z,2),d=i[0],f=i[1],v=(0,L.useRef)(),k=(0,L.useRef)(null),z=(0,L.useState)(!1),Ee=(0,P.Z)(z,2),Ce=Ee[0],Fe=Ee[1],ke=V.modalVisible,Te=V.setModalVisible,Ne=V.callbackRef,c=V.renderData,Ue=V.typeStatus,Ve=V.setStatus,Ze=c.typeUser=="user",we=c.typeUser=="user"?"/sms/user":"/sms/system/sysUser",Me=c.typeUser=="user"?"/sms/user/upload":"/sms/system/sysUser/upload",C=c.typeUser=="user"?"/sms/user/download":"/sms/system/sysUser/download",D=function(){var n;v==null||(n=v.current)===null||n===void 0||n.setFieldsValue({departmentId:q.name})};(0,L.useEffect)(function(){D()},[q]);var o=function(){var n;v==null||(n=v.current)===null||n===void 0||n.setFieldsValue({groupId:d.name})};(0,L.useEffect)(function(){o()},[d]),(0,L.useEffect)(function(){if(c.type=="eidt",c.numberEidt==0&&setTimeout((0,T.Z)((0,F.Z)().mark(function de(){var E,_e,Pe,Ge,Le,$e,Ke;return(0,F.Z)().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(!(c.departmentId&&!Ze)){Ie.next=4;break}return Ie.next=3,r.Z.getDepartment(c.departmentId);case 3:q=Ie.sent.data.content[0];case 4:Ze&&(console.log("1"),q={name:c.departmentName,id:c.departmentId},re({name:c.departmentName,id:c.departmentId})),c.sex?c.sex="1":c.sex="0",Object.keys(c).forEach(function(De){typeof c[De]=="number"&&(c[De]=c[De]+"")}),Pe={},c.presenter&&(Pe={name:r.Z.getDepartmentUserName(Number(c.presenter)),id:c.presenter},k==null||(Ge=k.current)===null||Ge===void 0||Ge.setDepartment(Pe),Fe(Pe)),c.idCardPhoto&&(Le=[],c.idCardPhoto.split(",").forEach(function(De,Ae){Le.push({uid:Ae+1,name:De,response:{data:De}})}),c.idCardPhoto=Le),c.graduationPhoto&&($e=[],c.graduationPhoto.split(",").forEach(function(De,Ae){$e.push({uid:Ae+1,name:De,response:{data:De}})}),c.graduationPhoto=$e),c.gradePhoto&&(Ke=[],c.gradePhoto.split(",").forEach(function(De,Ae){Ke.push({uid:Ae+1,name:De,response:{data:De}})}),c.gradePhoto=Ke),console.log("department",q),v==null||(E=v.current)===null||E===void 0||E.setFieldsValue((0,O.Z)((0,O.Z)({},c),{},{sex:c.sex,departmentId:(_e=q)===null||_e===void 0?void 0:_e.name})),++c.numberEidt;case 15:case"end":return Ie.stop()}},de)})),100),c.type=="addUser"){var p={name:c.name,privateMobile:c.mobile,degree:c.degree+"",entryTime:le()().format("GGGG-MM-DD HH:mm:ss"),profession:c.profession,status:"0",newOrderType:"0"};if(c.presenter){var n,u={name:r.Z.getDepartmentUserName(Number(c.presenter)),id:c.presenter};k==null||(n=k.current)===null||n===void 0||n.setDepartment(u),Fe(u)}setTimeout(function(){var de;v==null||(de=v.current)===null||de===void 0||de.setFieldsValue(p)},100)}},[]);var m=function(n){if(n.departmentId&&(n.departmentId=q.id),n.groupId&&(n.groupId=d.id),n.departmentId||delete n.departmentId,n.groupId||delete n.groupId,n.percent||(n.percent=20),console.log(n.percent),Ce&&(n.presenter=Ce.id),delete n.userId,n.idCardPhoto){var u=[];n.idCardPhoto.forEach(function(_e){u.push(_e.response.data)}),n.idCardPhoto=u.join(",")}if(n.graduationPhoto){var de=[];n.graduationPhoto.forEach(function(_e){de.push(_e.response.data)}),n.graduationPhoto=de.join(",")}if(n.gradePhoto){var E=[];n.gradePhoto.forEach(function(_e){E.push(_e.response.data)}),n.gradePhoto=E.join(",")}return n.status==3&&(n.enable=!1),console.log(n,"value--------->"),new Promise(function(_e){se.Z.post(we,n).then(function(Pe){Pe.status=="success"&&(B.default.success("\u64CD\u4F5C\u6210\u529F"),Te(),re(""),Ne(),Ue=="Entry"&&Ve(6),_e(!0))}).catch(function(Pe){_e(!0)})})};return(0,s.jsxs)(S.a,{formRef:v,width:1200,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0,onClose:function(){Te(),re("")}},onFinish:function(){var p=(0,T.Z)((0,F.Z)().mark(function n(u){return(0,F.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log(u),c.id&&c.type!="addUser"&&(u.id=c.id),u.groupId||(u.groupId=-1),E.next=5,m(u);case 5:case"end":return E.stop()}},n)}));return function(n){return p.apply(this,arguments)}}(),visible:ke,children:[c.type!="look"?(0,s.jsxs)("div",{children:[(0,s.jsxs)(A.ZP.Group,{children:[(0,s.jsx)(j.Z,{name:"name",width:"md",label:"\u59D3\u540D",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",rules:[{required:!0,pattern:new RegExp(/^\S*$/),message:"\u4E0D\u80FD\u5305\u542B\u7A7A\u683C/\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u7528\u6237\u540D"}],disabled:Ze}),(0,s.jsx)(j.Z,{width:"md",name:"userName",label:"\u8D26\u53F7/\u59D3\u540D\u62FC\u97F3",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",rules:[{required:!0,pattern:new RegExp(/^\S*$/),message:"\u4E0D\u80FD\u5305\u542B\u7A7A\u683C/\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u8D26\u53F7"}]}),(0,s.jsx)(l.Z,{label:"\u6C11\u65CF",name:"ethnic",width:"xs",fieldProps:{showSearch:!0},request:(0,T.Z)((0,F.Z)().mark(function p(){return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",r.Z.getList("dict_nation"));case 1:case"end":return u.stop()}},p)}))}),(0,s.jsx)(_.Z,{name:"enable",label:"\u7528\u6237\u72B6\u6001",required:!0,disabled:Ze})]}),(0,s.jsxs)(A.ZP.Group,{children:[(0,s.jsx)(j.Z,{width:"md",name:"mobile",label:"\u5DE5\u4F5C\u7535\u8BDD",disabled:Ze,placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD",rules:[{required:!0,pattern:new RegExp(r.Z.getRegex("mobile")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"}]}),(0,s.jsx)(j.Z,{width:"md",name:"idCard",label:"\u8EAB\u4EFD\u8BC1",disabled:Ze,placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1",rules:[{required:!0,pattern:new RegExp(r.Z.getRegex("idCard")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u8EAB\u4EFD\u8BC1\u53F7"}]}),(0,s.jsx)(j.Z,{width:"md",name:"privateMobile",label:"\u79C1\u4EBA\u7535\u8BDD\u53F7\u7801",placeholder:"\u8BF7\u8F93\u5165\u79C1\u4EBA\u7535\u8BDD\u53F7\u7801",rules:[{pattern:new RegExp(r.Z.getRegex("mobile")),message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"}]}),(0,s.jsx)(j.Z,{width:"md",name:"weChat",label:"\u5FAE\u4FE1",placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1"}),(0,s.jsx)(j.Z,{width:"md",name:"email",label:"\u90AE\u7BB1",placeholder:"\u8BF7\u8F93\u5165email"}),(0,s.jsx)(l.Z,{label:"\u5B66\u5386",name:"degree",width:"xs",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5B66\u5386"}],request:(0,T.Z)((0,F.Z)().mark(function p(){return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",r.Z.getList("dict_education"));case 1:case"end":return u.stop()}},p)}))}),(0,s.jsx)(l.Z,{label:"\u653F\u6CBB\u9762\u8C8C",name:"formalAppearance",width:"xs",request:(0,T.Z)((0,F.Z)().mark(function p(){return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",r.Z.getList("PoliticalLandscape"));case 1:case"end":return u.stop()}},p)}))}),(0,s.jsx)(j.Z,{label:"\u5A5A\u59FB\u4FE1\u606F",name:"marriageInfo",width:"xs"}),(0,s.jsx)(j.Z,{label:"\u7C4D\u8D2F",name:"nativePlace",width:"xs"}),(0,s.jsx)(J.Z,{ref:k,userLabel:"\u63A8\u8350\u4EBA/\u62DB\u8058\u4EBA",userNames:"userId",userPlaceholder:"\u8BF7\u8F93\u5165\u63A8\u8350\u4EBA",setUserNameId:function(n){return Fe(n)},flag:!0}),(0,s.jsx)(j.Z,{label:"\u524D\u5355\u4F4D",name:"frontUnit",width:"sm"}),(0,s.jsx)(_.Z,{name:"isMiddle",label:"\u662F\u5426\u4E3A\u7BA1\u7406\u5C42",required:!0}),(0,s.jsx)(l.Z,{label:"\u4E1A\u7EE9\u6392\u540D\u7C7B\u578B",name:"newOrderType",width:"sm",valueEnum:{0:"\u4E0D\u5C55\u793A",1:"\u5C55\u793A\u5728\u4E2A\u4EBA\u6392\u540D",2:"\u5C55\u793A\u5728\u90E8\u95E8\u8D1F\u8D23\u4EBA\u6392\u540D"}})]}),(0,s.jsxs)(A.ZP.Group,{children:[(0,s.jsx)(j.Z,{name:"departmentId",label:"\u90E8\u95E8",rules:[{required:!0}]}),(0,s.jsx)(ie.Z,{style:{marginTop:"30px",marginLeft:"-30px"},type:"primary",onClick:(0,T.Z)((0,F.Z)().mark(function p(){return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:se.Z.get("/sms/share/getDepartmentAndUser"),ne(!0);case 2:case"end":return u.stop()}},p)})),children:"\u9009\u62E9"}),(0,s.jsx)(j.Z,{name:"groupId",label:"\u5C0F\u7EC4"}),(0,s.jsx)(ie.Z,{style:{marginTop:"30px",marginLeft:"-30px"},type:"primary",onClick:(0,T.Z)((0,F.Z)().mark(function p(){return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:g(!0);case 1:case"end":return u.stop()}},p)})),children:"\u9009\u62E9"}),(0,s.jsx)(l.Z,{label:"\u804C\u79F0\u7EA7\u522B",name:"level",width:"xs",disabled:Ze,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u804C\u79F0\u7EA7\u522B"}],request:(0,T.Z)((0,F.Z)().mark(function p(){return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",r.Z.getList("ProfessionalTitle"));case 1:case"end":return u.stop()}},p)}))}),(0,s.jsx)(l.Z,{label:"\u529E\u516C\u5730\u70B9",name:"officeAddress",width:"xs",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u529E\u516C\u5730\u70B9"}],request:(0,T.Z)((0,F.Z)().mark(function p(){return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",r.Z.getList("officeLocation"));case 1:case"end":return u.stop()}},p)}))}),(0,s.jsx)(l.Z,{label:"\u4EBA\u5458\u72B6\u6001",name:"status",width:"xs",disabled:Ze,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EBA\u5458\u72B6\u6001"}],request:(0,T.Z)((0,F.Z)().mark(function p(){return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",r.Z.getList("onJobStatus"));case 1:case"end":return u.stop()}},p)}))}),(0,s.jsx)(l.Z,{label:"\u6240\u5C5E\u516C\u53F8",name:"companyId",width:"xl",initialValue:c.companyId,request:oe.ZL,rules:[{required:!0}]}),(0,s.jsx)(l.Z,{label:"\u9500\u552E\u7B49\u7EA7",name:"salesLevel",width:"xs",initialValue:c.salesLevel,request:oe.CS}),(0,s.jsx)(j.Z,{name:"percent",width:"md",label:"\u51FA\u955C\u4EBA\u5206\u6210",placeholder:"\u8BF7\u8F93\u5165\u51FA\u955C\u4EBA\u5206\u6210\uFF08\u4E0D\u586B\u9ED8\u8BA420%\uFF09"})]}),(0,s.jsxs)(A.ZP.Group,{children:[(0,s.jsx)(I.Z,{name:"entryTime",fieldProps:{format:"YYYY-MM-DD"},width:"sm",label:"\u5165\u804C\u65F6\u95F4",disabled:Ze,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5165\u804C\u65F6\u95F4"}]}),(0,s.jsx)(I.Z,{name:"formalTime",fieldProps:{format:"YYYY-MM-DD"},width:"sm",disabled:Ze,label:"\u8F6C\u6B63\u65F6\u95F4"}),(0,s.jsx)(I.Z,{name:"turnoverTime",fieldProps:{format:"YYYY-MM-DD"},width:"sm",disabled:Ze,label:"\u79BB\u804C\u65F6\u95F4"}),(0,s.jsx)(I.Z,{name:"birthday",fieldProps:{format:"YYYY-MM-DD"},width:"sm",label:"\u751F\u65E5\u65E5\u671F"})]}),(0,s.jsxs)(A.ZP.Group,{children:[(0,s.jsx)(j.Z,{label:"\u6BD5\u4E1A\u9662\u6821",name:"graduationSchool",width:"sm"}),(0,s.jsx)(j.Z,{label:"\u4E13\u4E1A",name:"profession",width:"sm"}),(0,s.jsx)(I.Z,{name:"graduationTime",fieldProps:{format:"YYYY-MM-DD"},width:"sm",label:"\u6BD5\u4E1A\u65F6\u95F4"})]}),(0,s.jsx)(x.Z,{name:"residentialAddress",label:"\u73B0\u5C45\u4F4F\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u73B0\u5C45\u4F4F\u5730\u5740..."}),(0,s.jsx)(x.Z,{name:"idCardAddress",label:"\u8EAB\u4EFD\u8BC1\u5C45\u4F4F\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u5C45\u4F4F\u5730\u5740..."}),(0,s.jsx)(x.Z,{name:"householdRegistrationAddress",label:"\u6237\u7C4D\u6240\u5728\u5730",placeholder:"\u8BF7\u8F93\u5165\u6237\u7C4D\u6240\u5728\u5730..."}),(0,s.jsx)(x.Z,{name:"familyInfo",label:"\u5BB6\u5C5E\u8054\u7CFB\u65B9\u5F0F",placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0..."}),(0,s.jsx)(x.Z,{name:"description",label:"\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0..."}),(0,s.jsx)(Y.Z,{width:1100,label:"\u8EAB\u4EFD\u8BC1\u6B63\u53CD\u9762",name:"idCardPhoto",action:Me,renderData:c,fileUrl:C}),(0,s.jsx)(Y.Z,{width:1100,label:"\u6BD5\u4E1A\u8BC1\u7167\u7247",name:"graduationPhoto",action:Me,renderData:c,fileUrl:C}),(0,s.jsx)(Y.Z,{width:1100,label:"\u6280\u80FD\u7B49\u7EA7\u8BC1\u7167\u7247",name:"gradePhoto",action:Me,renderData:c,fileUrl:C})]}):null,Q&&(0,s.jsx)(ee.Z,{CardVisible:Q,setCardVisible:function(){return ne(!1)},setGrouptment:function(n){return re(n)},ment:function(){return D()}}),ve&&(0,s.jsx)(G,{CardVisible:ve,setCardVisible:function(){return g(!1)},setGrouptment:function(n){return f(n)}})]})}},66573:function(Be,ae,e){"use strict";var me=e(34792),ie=e(48086),H=e(11849),B=sessionStorage.getItem("tokenName"),F=sessionStorage.getItem("tokenValue"),O={};O[B]=F;var T=function(L,I){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".doc",j="";A?(j=L+"?id="+I,Object.keys(A).forEach(function(l){j=j+"&".concat(l,"=")+A[l]})):j=L+"?id="+I,fetch(j,{method:"GET",headers:(0,H.Z)({},O)}).then(function(l){l.blob().then(function(_){var x;x=new Blob([_],{type:"text/piain"});var r=new FileReader;r.readAsText(x,"utf-8"),r.onload=function(){if(r.result.indexOf("error")>0){var se=JSON.parse(r.result);ie.default.error(se.msg);return}else{var y=window.URL.createObjectURL(_),le=document.createElement("a");document.body.appendChild(le);var ee="\u9644\u4EF6"+S;le.href=y,le.download=ee,le.target="_blank",le.click(),le.remove()}}})})};ae.Z=T},28975:function(Be,ae,e){"use strict";var me=e(12968),ie=e(20352),H=e(85893);ae.Z=function(B){var F=B.isModalVisibles,O=B.imgSrc,T=B.setisModalVisibles;return(0,H.jsx)(H.Fragment,{children:(0,H.jsx)("div",{style:{display:"none"},children:(0,H.jsx)(ie.Z,{width:200,style:{display:"none"},preview:{visible:F,src:O,onVisibleChange:function(L){T(L)}}})})})}},61261:function(Be,ae,e){"use strict";var me=e(39428),ie=e(3182),H=e(68503),B=function(){var F=(0,ie.Z)((0,me.Z)().mark(function O(T,P,L,I,A){var S;return(0,me.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(S=P.slice(P.indexOf(".")),!(S!=".png"&&S!=".jpg"&&S!=".jpeg"&&S!=".pdf")){l.next=6;break}return l.next=4,(0,H.Z)(L,T,P,P);case 4:l.next=8;break;case 6:return l.next=8,(0,H.Z)(L,T,P).then(function(_){I(_),A(!0)});case 8:case"end":return l.stop()}},O)}));return function(T,P,L,I,A){return F.apply(this,arguments)}}();ae.Z=B}}]);
